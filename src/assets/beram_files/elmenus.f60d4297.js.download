!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers",function(a,b,c){var d={};return d.get=function(a,d){a=a||0,d=d||10;var e=c.buildUrl("cuisines");return b(e,{params:{start:a,limit:d}})},d}]},{}],2:[function(a,b,c){"use strict";b.exports=["API",function(a){return console.warn("[DEPRECATED] => Please use API instead of Api."),a}]},{}],3:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers",function(a,b,c){var d={};return d.get=function(a,d){a=a||0,d=d||15;var e=c.buildUrl("leaderboard");return b(e,{params:{start:a,limit:d}})},d.getCurrentWinners=function(){var a=c.buildUrl("gamification/winners/current");return b(a)},d}]},{}],4:[function(a,b,c){"use strict";b.exports=["RestaurantsApi","CuisinesApi","MoodsApi","PhotosApi","ReviewsApi","SearchApi","UsersApi","NewsFeedApi","Profile","StaticPagesApi","Gamification",function(a,b,c,d,e,f,g,h,i,j,k){var l={};return l.restaurants=a,l.moods=c,l.cuisines=b,l.photos=d,l.reviews=e,l.search=f,l.users=g,l.NewsFeed=h,l.Profile=i,l.staticPages=j,l.Gamification=k,l}]},{}],5:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers","LocalStorageSrv",function(a,b,c,d){var e,f,g={};return g.get=function(a,g){return a=a||0,g=g||10,void 0!==d.getItem("selected_city")&&(f=JSON.parse(d.getItem("selected_city")).id),e=void 0!==f?c.buildUrl("tags?cityId="+f):c.buildUrl("tags"),b(e,{params:{start:a,limit:g}})},g}]},{}],6:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers",function(a,b,c){var d={};return d.foodiesFeed=function(a){var d=c.buildUrl("newsfeed");return b(d,{params:a})},d}]},{}],7:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers",function(a,b,c){var d={};return d.toggleYum=function(a){var d=c.buildUrl("photos/"+a+"/yums");return b(d,{method:"POST"})},d.get=function(a,d,e){d=d||0,e=e||10;var f=c.buildUrl("photos/"+a);return b(f,{params:{start:d,limit:e}})},d.addComment=function(a,d){var e=c.buildUrl("photos/"+a+"/comments");return b(e,{method:"POST",data:{body:d}})},d.getReportsTypes=function(){var a=c.buildUrl("reportsTypes?entity=photos");return b(a,{method:"GET",data:{body:""}})},d.reportPhotos=function(a,d){var e=c.buildUrl("photos/"+a+"/report/"+d);return b(e,{method:"POST",data:{body:""}})},d.sharePhoto=function(a){var d=c.buildUrl("photos/"+a+"/share");return b(d,{method:"GET",data:{body:""}})},d.deletePhoto=function(a){var d=c.buildUrl("photos/"+a+"/");return b(d,{method:"DELETE"})},d.taggedphoto=function(a,d,e,f){var g=c.buildUrl("photos/"+a+"/tag");return b(g,{method:"POST",data:{restaurantId:d,itemId:e,suggestedItemName:f}})},d}]},{}],8:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers",function(a,b,c){var d={};return d.timeLine=function(a){var d=c.buildUrl("profile/"+a.id+"/timeline");return b(d,{params:a})},d.yums=function(a){var d=c.buildUrl("profile/"+a.id+"/yums");return b(d,{params:a})},d.userInfo=function(a){var d=c.buildUrl("profile/"+a);return b(d)},d.getUntaggedPhotos=function(a){var d=c.buildUrl("profile/unTaggedPhotos");return b(d,{params:a})},d.favorites=function(a){var d=c.buildUrl("profile/"+a.id+"/favorites");return b(d,{params:a})},d.followers=function(a){var d=c.buildUrl("profile/"+a.id+"/followers");return b(d,{params:a})},d.followings=function(a){var d=c.buildUrl("profile/"+a.id+"/followings");return b(d,{params:a})},d}]},{}],9:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers",function(a,b,c){var d={};return d.get=function(a,d,e,f){var g=c.buildUrl("restaurants/"+a),h={};return d&&(h.branchId=d),e&&f&&(h.lat=e,h.lon=f),b(g,{params:h})},d.discovery=function(a){var d=c.buildUrl("restaurants/"+a+"/discovery");return b(d,{})},d.branches=function(a){var d=c.buildUrl("restaurants/"+a+"/branches");return b(d,{})},d.photos=function(a,d,e,f){d=d||0,e=e||10,f=f||"leastLiked";var g=c.buildUrl("restaurants/"+a+"/photos");return b(g,{params:{sort:f,start:d,limit:e}})},d.reviews=function(a,d,e,f){d=d||0,e=e||10,f=f||"newest";var g=c.buildUrl("restaurants/"+a+"/reviews");return b(g,{params:{start:d,limit:e,sort:f}})},d.dishesAutoCompleteUrl=function(a,d,e,f){e=e||0,f=f||10,d=d||"";var g=c.buildUrl("restaurants/"+a+"/items/autocomplete");return b(g,{params:{q:d,start:e,limit:f}})},d.foodiesFeed=function(a){var d=c.buildUrl("newsfeed");return b(d,{params:a})},d.menu=function(a){var d=c.buildUrl("restaurants/"+a+"/menu");return b(d)},d.scannedMenu=function(a){var d=c.buildUrl("restaurants/"+a+"/scanned_menu");return b(d)},d.toggleLike=function(a){var d=c.buildUrl("items/"+a+"/likes");return b(d,{method:"POST"})},d.toggleDislike=function(a){var d=c.buildUrl("items/"+a+"/dislikes");return b(d,{method:"POST"})},d.toggleFavorite=function(a){var d=c.buildUrl("restaurants/"+a+"/favorite");return b(d,{method:"POST"})},d.uploadPhoto=function(a){var d=c.buildUrl("restaurants/"+a.id+"/photos");a.reviewId&&(d=c.buildUrl("restaurants/"+a.id+"/reviews/"+a.reviewId+"/photos"));var e={dishId:a.dishId||"",branchId:a.branchId||"",originX:0,originY:0,width:"100%",height:"100%",photos:a.photos};return a.done&&(e.done=a.done),b(d,{method:"POST",url:d,headers:{"Content-Type":void 0},data:e,transformRequest:function(a){var b=new FormData;return angular.forEach(a,function(a,c){""!==a&&b.append(c,a)}),b}})},d.addReview=function(a){var d=c.buildUrl("restaurants/"+a.id+"/reviews");return b(d,{method:"POST",data:a})},d.reportTypes=function(a){var d=c.buildUrl("reportsTypes"),e={};return a&&(e.entity=a),b(d,{params:e})},d.reportRestaurant=function(a){var d=c.buildUrl("restaurants/"+a.id+"/report/"+a.reportTypeId);return b(d,{method:"POST",data:a})},d["new"]=function(a){var d=c.buildUrl("restaurants/search");return b(d,{method:"POST",data:a})},d.trending=function(a){var d=c.buildUrl("restaurants/search");return b(d,{method:"POST",data:a})},d.requestMenu=function(a){var d=c.buildUrl("restaurants/"+a+"/requestMenu");return b(d,{method:"POST"})},d}]},{}],10:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers",function(a,b,c){var d={};return d.toggleHelpful=function(a){var d=c.buildUrl("reviews/"+a+"/helpful");return b(d,{method:"POST"})},d.deleteReview=function(a){var d=c.buildUrl("reviews/"+a);return b(d,{method:"DELETE"})},d}]},{}],11:[function(a,b,c){"use strict";var d=["$http","request","Helpers","LocalStorageSrv",function(a,b,c,d){var e=this;return e.itemsUrl=c.buildUrl("items/search"),e.restaurantUrl=c.buildUrl("restaurants/search"),e.restaurantAutoCompleteUrl=c.buildUrl("restaurants/autocomplete"),e.areasUrl=c.buildUrl("areas"),e.cusinesUrl=c.buildUrl("cuisines"),e.citiesUrl=c.buildUrl("cities"),e.featuresUrl=c.buildUrl("features"),e.countriesUrl=c.buildUrl("countries"),e.moodsUrl=c.buildUrl("tags"),e.locateMeUrl=c.buildUrl("locateMe"),e.items=function(a){return b(e.itemsUrl,{data:a,method:"POST"})},e.restaurants=function(a){a&&a.cityId&&(a.cityId=parseInt(a.cityId));var c={};return a&&a.lat&&(c.lat=a.lat),a&&a.lon&&(c.lon=a.lon),a&&a.features&&(c.features=a.features),a&&a.cuisines&&(c.cuisines=a.cuisines),a&&a.tags&&(c.tags=a.tags),a&&a.areas&&(c.areas=a.areas),a&&a.cityId&&(c.cityId=a.cityId),!a||1!=a.isopen&&0!=a.isopen?!a||1!=a.isOpen&&0!=a.isOpen||(c.isopen=a.isOpen):c.isopen=a.isopen,a&&a.deliveryAreas&&(c.deliveryAreas=a.deliveryAreas),a&&a.start&&(c.start=a.start),a&&a.limit&&(c.limit=a.limit),a&&a.sort&&(c.sort=a.sort),a&&a.q&&(c.q=a.q),a&&a.priceMin&&(c.priceMin=a.priceMin),a&&a.priceMax&&(c.priceMax=a.priceMax),b(e.restaurantUrl,{data:c,method:"POST"})},e.restaurantsAutoComplete=function(a){a&&a.cityId&&(a.cityId=parseInt(a.cityId));var c={};return a&&a.cityId&&(c.cityId=a.cityId),a&&a.start&&(c.start=a.start),a&&a.limit&&(c.limit=a.limit),a&&a.q&&(c.q=a.q),b(e.restaurantAutoCompleteUrl,{params:c,method:"GET"})},e.areas=function(a){return null==a.cityId&&(a.cityId=1e3),b(e.areasUrl,{params:a,method:"GET"})},e.cusines=function(){return b(e.cusinesUrl,{method:"GET"})},e.features=function(){return b(e.featuresUrl,{method:"GET"})},e.cities=function(){return b(e.citiesUrl,{method:"GET"})},e.countries=function(){return b(e.countriesUrl,{method:"GET"})},e.moods=function(){var a;void 0!==d.getItem("selected_city")&&(a=JSON.parse(d.getItem("selected_city")).id),void 0!==a&&(e.moodsUrl=c.buildUrl("tags?cityId="+a));var f=b(e.moodsUrl,{method:"GET",cache:!1});return f},e.locateMe=function(a){return b(e.locateMeUrl,{params:a,method:"GET"})},e}];b.exports=d},{}],12:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers",function(a,b,c){var d={};return d.sendAdvertiseEmail=function(a){var d=c.buildUrl("contact/advertise");return b(d,{method:"POST",data:a})},d.sendAddMenuEmail=function(a){var d=c.buildUrl("contact/addMenu");return b(d,{method:"POST",url:d,headers:{"Content-Type":void 0},data:a,transformRequest:function(a){var b=new FormData;return angular.forEach(a,function(a,c){""!==a&&b.append(c,a)}),b}})},d}]},{}],13:[function(a,b,c){"use strict";b.exports=["$http","request","Helpers",function(a,b,c){var d={};return d.follow=function(a){var d=c.buildUrl("follow/"+a);return b(d,{method:"POST"})},d.authenticate=function(a,d){var e=c.buildUrl("authenticate"),f=c.encodeAuthenticationMessage(a,d);return b(e,{method:"POST",data:a&&d?{message:f}:void 0})},d.forgotPassword=function(a){var d=c.buildUrl("forgotPassword");return b(d,{method:"POST",data:{email:a}})},d.resetPassword=function(a,d,e){var f=c.buildUrl("resetPassword");return b(f,{method:"POST",data:{resetToken:a,password:d,confirmPassword:e}})},d.logout=function(a){var d=c.buildUrl("logout");return b(d,{method:"DELETE",data:{token:a}})},d.authenticate.facebook=function(a){var d=c.buildUrl("authenticate/facebook");return b(d,{method:"POST",data:{fbAccessToken:a}})},d.authenticate.google=function(a){var d=c.buildUrl("authenticate/google");return b(d,{method:"POST",data:{accessToken:a}})},d.logCall=function(a,d,e,f,g,h){var i=c.buildUrl("users/logCall"),j={};return f&&(j.branchID=f),g&&h&&(j.lat=g,j.lon=h),j.restaurantID=d,j.telephoneNumber=e,b(i,{data:j,method:"POST"})},d.logMapView=function(a,d,e,f,g){var h=c.buildUrl("users/logMapView"),i={};return e&&(i.branchId=e),f&&g&&(i.lat=f,i.lon=g),d&&(i.restaurantID=d),e&&(i.branch_id=e),b(h,{data:i,method:"POST"})},d.signup=function(a){a.photos&&(a.photos=b.upload.rename(a.photos,"photos.jpg"));var d=c.buildUrl("register");return b(d,{url:d,method:"POST",data:a},!0)},d.suggestedFollowings=function(a){var d=c.buildUrl("users/suggestedFollowings");return b(d,{method:"GET",data:a})},d.getNotification=function(a){var d=c.buildUrl("notifications");return b(d,{data:a})},d.readAllNotification=function(){var a=c.buildUrl("readall");return b(a,{method:"POST"})},d.openNotification=function(a){var d=c.buildUrl("open/"+a.type+"/"+a.id);return b(d,{method:"POST"})},d.editeUserInfo=function(a,d){d&&(a.photos=b.upload.rename(d,"photos.jpg"));var e=c.buildUrl("profile");return b(e,{url:e,method:"PUT",data:a},!0)},d.search=function(a,d,e){d=d||0,e=e||10,a=a||"";var f=c.buildUrl("users/search");return b(f,{method:"POST",data:{q:a}})},d}]},{}],14:[function(a,b,c){(function(b){"use strict";var c=(a("es6-set"),angular.module("core",["ngStorage","ngNotificationsBar","ngFileUpload","env"]));a("./common/services/constants"),a("./common/services/env");c.factory("log",a("./common/services/logs")),c.factory("API",a("./api/api")),c.factory("Api",a("./api/api.deprecated")),c.factory("Session",a("./common/services/session")),c.factory("FBSrv",a("./common/services/facebook")),c.factory("ReviewsApi",a("./api/api.reviews")),c.factory("UsersApi",a("./api/api.users")),c.factory("RestaurantsApi",a("./api/api.restaurants")),c.factory("MoodsApi",a("./api/api.moods")),c.factory("CuisinesApi",a("./api/api.cuisines")),c.factory("SearchApi",a("./api/api.search")),c.factory("PhotosApi",a("./api/api.photos")),c.factory("NewsFeedApi",a("./api/api.newsFeed")),c.factory("Gamification",a("./api/api.gamification")),c.factory("Profile",a("./api/api.profile")),c.factory("StaticPagesApi",a("./api/api.staticPages")),c.factory("Lookups",a("./lookup/lookup")),c.factory("CitiesLookup",a("./lookup/lookup.cities")),c.factory("AreasLookup",a("./lookup/lookup.areas")),c.factory("CuisinesLookup",a("./lookup/lookup.cuisines")),c.factory("MoodsLookup",a("./lookup/lookup.moods")),c.factory("FeaturesLookup",a("./lookup/lookup.features")),c.factory("Helpers",a("./common/services/helpers")),c.factory("request",a("./common/services/request")),c.factory("preloader",a("./photos/services/preloader")),c.factory("LocalStorageSrv",a("./common/services/localStorage")),b.app=a("./common/elmenus"),b._=a("underscore"),app.directive("imgLoaded",a("./common/directives/img_loaded/img_loaded")),app.directive("starRating",a("./common/directives/star_rating/star_rating")),app.directive("addReviewBox",a("./reviews/add_review_box.directive")),app.directive("photoUploadBox",a("./photos/photo_upload_box.directive")),app.directive("modal",a("./common/directives/modal/modal")),app.directive("scrollusing",a("./common/directives/scroll/scroll.js")),app.directive("itemFeed",a("./common/directives/newsFeed/itemFeed/itemFeed")),app.directive("photoFeed",a("./common/directives/newsFeed/photoFeed/photoFeed")),app.directive("followsFeed",a("./common/directives/newsFeed/followsFeed/followsFeed")),app.directive("reviewFeed",a("./common/directives/newsFeed/reviewFeed/reviewFeed")),app.directive("compareTo",a("./common/directives/compare-to/compare-to")),app.directive("footer",a("./common/directives/footer/footer.js")),app.directive("preventParentScroll",a("./common/directives/scrollLock/scrollLock.js")),app.directive("owlCarousel",a("./common/directives/carousel/carousel.js")),app.controller("RootController",a("./common/controllers/root")),app.controller("HomeController",a("./home/home.controller.js")),app.controller("MiniDiscoveryController",a("./restaurants/minidiscovery.controller")),app.controller("PhotoController",a("./photos/photo.controller")),app.controller("PhotoUploadController",a("./photos/photo.upload.controller")),app.controller("AddReviewController",a("./reviews/add.review.controller")),app.controller("RestaurantController",a("./restaurants/restaurant.controller.js")),app.controller("MoodController",a("./home/home.moods.controller.js")),app.controller("CuisineController",a("./home/home.cuisines.controller.js")),app.controller("RestaurantBranchesController",a("./restaurants/restaurant.branches.controller.js")),app.controller("RestaurantMenuController",a("./restaurants/restaurant.menu.controller.js")),app.controller("RestaurantPhotosController",a("./restaurants/restaurant.photos.controller.js")),app.controller("RestaurantReviewsController",a("./restaurants/restaurant.reviews.controller.js")),app.controller("RestaurantScannedMenuController",a("./restaurants/restaurant.scanned.menu.controller.js")),app.controller("SearchBarController",a("./search/search.bar.controller.js")),app.controller("SearchController",a("./search/search.page.controller.js")),app.controller("NewsFeedController",a("./newsFeed/newsFeed.controller.js")),app.controller("ProfileController",a("./profile/profile.controller.js")),app.controller("GamificationController",a("./gamification/gamification.controller.js")),app.controller("ResetPasswordController",a("./signin-up/reset.password.controller.js"))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api/api":4,"./api/api.cuisines":1,"./api/api.deprecated":2,"./api/api.gamification":3,"./api/api.moods":5,"./api/api.newsFeed":6,"./api/api.photos":7,"./api/api.profile":8,"./api/api.restaurants":9,"./api/api.reviews":10,"./api/api.search":11,"./api/api.staticPages":12,"./api/api.users":13,"./common/controllers/root":18,"./common/directives/carousel/carousel.js":19,"./common/directives/compare-to/compare-to":20,"./common/directives/footer/footer.js":21,"./common/directives/img_loaded/img_loaded":22,"./common/directives/modal/modal":23,"./common/directives/newsFeed/followsFeed/followsFeed":24,"./common/directives/newsFeed/itemFeed/itemFeed":25,"./common/directives/newsFeed/photoFeed/photoFeed":26,"./common/directives/newsFeed/reviewFeed/reviewFeed":27,"./common/directives/scroll/scroll.js":28,"./common/directives/scrollLock/scrollLock.js":29,"./common/directives/star_rating/star_rating":30,"./common/elmenus":31,"./common/services/constants":32,"./common/services/env":33,"./common/services/facebook":34,"./common/services/helpers":35,"./common/services/localStorage":36,"./common/services/logs":37,"./common/services/request":38,"./common/services/session":39,"./gamification/gamification.controller.js":41,"./home/home.controller.js":42,"./home/home.cuisines.controller.js":43,"./home/home.moods.controller.js":44,"./lookup/lookup":49,"./lookup/lookup.areas":45,"./lookup/lookup.cities":46,"./lookup/lookup.cuisines":47,"./lookup/lookup.features":48,"./lookup/lookup.moods":50,"./newsFeed/newsFeed.controller.js":51,"./photos/photo.controller":53,"./photos/photo.upload.controller":54,"./photos/photo_upload_box.directive":55,"./photos/services/preloader":56,"./profile/profile.controller.js":57,"./restaurants/minidiscovery.controller":58,"./restaurants/restaurant.branches.controller.js":59,"./restaurants/restaurant.controller.js":60,"./restaurants/restaurant.menu.controller.js":61,"./restaurants/restaurant.photos.controller.js":62,"./restaurants/restaurant.reviews.controller.js":63,"./restaurants/restaurant.scanned.menu.controller.js":64,"./reviews/add.review.controller":65,"./reviews/add_review_box.directive":66,"./search/search.bar.controller.js":67,"./search/search.page.controller.js":70,"./signin-up/reset.password.controller.js":72,"es6-set":124,underscore:136}],15:[function(a,b,c){"use strict";b.exports=["$scope","API","notifications","$rootScope","$uibModalInstance",function(a,b,c,d,e){a.dismiss=function(){e.dismiss("cancel")}}]},{}],16:[function(a,b,c){"use strict";b.exports=["$stateProvider","$urlRouterProvider","$locationProvider","$provide",function(b,c,d,e){e.decorator("$state",["$delegate","$rootScope","$translate","LocalStorageSrv",function(a,b,c,d){var e=a;e.baseGo=e.go;var f=function(a,e,f){var g=d.getItem("activeLang"),h=e&&e.lang&&e.lang!==g?e.lang:g,i=a.split(".")[1];b.opendMenue=null,f=f||{};var j=a.substr(0,3);if("ar"==h&&"app"==j){var k=a.substr(3);a="ar"+k,d.setItem("activeLang","ar"),c.use("ar")}e&&d.getItem("selected_city")&&("ar"==d.getItem("activeLang")?e.location=b.clearURL(JSON.parse(d.getItem("selected_city")).nameAr):e.location=b.clearURL(JSON.parse(d.getItem("selected_city")).nameEn)),"search"==i&&e&&(e.searchq=e.keyword?"-"+e.keyword:"",e.areas=e.area?"area-"+b.serializeArea(e.area):null,e.cuisines=e.cuisine?"cuisines-"+b.serializeCuisines(e.cuisine):null,e.features=e.feature?"features-"+b.serializeFeatures(e.feature):null,e.moods=e.mood?"moods-"+b.serializeMoods(e.mood):null),d.getItem("selected_city")&&a.indexOf("city")==-1&&a.indexOf("profile")==-1&&a.indexOf("home")==-1&&a.indexOf("about")==-1&&a.indexOf("careers")==-1&&a.indexOf("advertise")==-1&&a.indexOf("add-menu")==-1&&(a="ar"==d.getItem("activeLang")?a.replace("ar","arcity"):a.replace("app","appcity")),a.indexOf("profile")==-1&&(a.indexOf("home")==-1||"cairo"!=e.location&&"القاهرة"!=e.location)||(e.location=null),this.baseGo(a,e,f)};return e.go=f,a}]);var f=["$document",function(a){var b=angular.element(document.getElementById("restaurant-content")),c=angular.element(".something-is-sticky .restaurant-content");if(c.length)a.scrollToElementAnimated(b,65,500);else{if(!b.length)return;a.scrollToElementAnimated(b,100,500)}}];f.$inject=["$document"];var g;LocalStorageSrv.getItem("selected_city")&&(g="ar"==LocalStorageSrv.getItem("activeLang")?JSON.parse(LocalStorageSrv.getItem("selected_city")).nameAr.toLowerCase().replace(/ /g,"-"):JSON.parse(LocalStorageSrv.getItem("selected_city")).nameEn.toLowerCase().replace(/ /g,"-")),g&&"cairo"!=g&&"القاهرة"!=g&&c.otherwise("/"+g);var h;b.state("app",{url:"","abstract":!0,template:"<ui-view/>"}).state("main",{url:"",templateUrl:"common/views/main.html"}).state("app.careers",{url:"/careers",templateUrl:"common/views/static-page.careers.html"}).state("app.gamification",{url:"/leaderboard",templateUrl:"gamification/views/gamification.html"}).state("app.add-menu",{url:"/add-menu",templateUrl:"common/views/static-page.add-menu.html"}).state("app.terms",{url:"/terms",templateUrl:"common/views/static-page.terms.html"}).state("app.privacy",{url:"/privacy",templateUrl:"common/views/static-page.privacy.html"}).state("app.insights2014",{url:"/insights/2014",templateUrl:"common/views/static-page.insights.2014.html"}).state("app.insights2015",{url:"/insights/2015",templateUrl:"common/views/static-page.insights.2015.html"}).state("app.insights2016",{url:"/insights/2016",templateUrl:"common/views/static-page.insights.2016.html"}).state("app.about",{url:"/about",templateUrl:"common/views/static-page.about.html"}).state("app.advertise",{url:"/advertise",templateUrl:"common/views/static-page.advertise.html"}).state("app.home",{url:"",templateUrl:"common/views/main.html"}).state("app.profile",{url:"/users",templateUrl:"profile/views/profile-container.html",params:{tab:"timeline",popup:"unknown"}}).state("app.profile.user",{url:"/:userName-:id",templateUrl:"profile/views/profile-container.html",redirectTo:"app.profile.user.timeline"}).state("app.profile.user.favorite",{url:"/favorite",templateUrl:"profile/views/timeline-favorites.html"}).state("app.profile.user.timeline",{url:"/foodie-timeline",templateUrl:"profile/views/timeline-favorites.html"}).state("app.profile.user.yums",{url:"/yums",templateUrl:"profile/views/timeline-favorites.html"}).state("app.restaurant",{url:"/restaurants/:restaurantName-:id",templateUrl:"restaurants/views/restaurant.html",redirectTo:"app.restaurant.menu.text"}).state("app.restaurant.photos",{url:"/photos",templateUrl:"restaurants/views/restaurant.photos.html",onEnter:f}).state("app.restaurant.reviews",{url:"/reviews",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("app.restaurant.menu",{url:"",redirectTo:"app.restaurant.menu.text",templateUrl:"restaurants/views/restaurant.menu.html"}).state("app.restaurant.branches",{url:"/branches",templateUrl:"restaurants/views/restaurant.branches.html",onEnter:f}).state("app.restaurant.menu.text",{url:"",templateUrl:"restaurants/views/restaurant.menu.text.html"}).state("app.restaurant.menu.scanned",{url:"/scanned-menu",templateUrl:"restaurants/views/restaurant.menu.scanned.html"}).state("app.restaurant.photo",{url:"/photo-:photoId"}).state("app.restaurant.review",{url:"/review-:reviewId",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("app.restaurantbranches",{url:"/restaurants/:restaurantName-:id/:branchName-:branchId",templateUrl:"restaurants/views/restaurant.html",redirectTo:"app.restaurantbranches.menu.text"}).state("app.restaurantbranches.photo",{url:"/photo-:photoId"}).state("app.restaurantbranches.review",{url:"/review-:reviewId",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("app.restaurantbranches.photos",{url:"/photos",templateUrl:"restaurants/views/restaurant.photos.html",onEnter:f}).state("app.restaurantbranches.reviews",{url:"/reviews",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("app.restaurantbranches.branches",{url:"/branches",templateUrl:"restaurants/views/restaurant.branches.html",onEnter:f}).state("app.restaurantbranches.menu",{url:"",templateUrl:"restaurants/views/restaurant.menu.html",onEnter:f}).state("app.restaurantbranches.menu.text",{url:"",templateUrl:"restaurants/views/restaurant.menu.text.html"}).state("app.restaurantbranches.menu.scanned",{url:"/scanned-menu",templateUrl:"restaurants/views/restaurant.menu.scanned.html"}).state("app.resetPassword",{url:"/reset-password",onEnter:["$rootScope","$uibModal","$state",function(b,c,d){h=c.open({templateUrl:"signin-up/views/resetpassword.html",scope:b,size:"xmd",controller:a("../../signin-up/reset.password.controller.js")}),$(document).on("keyup",function(a){27==a.keyCode&&($(document).off("keyup"),d.go("main"))}),$(document).on("click",".Modal-backdrop, .Modal-holder",function(){d.go("main")}),$(document).on("click",".Modal-box, .Modal-box *",function(a){a.stopPropagation()})}],onExit:function(){h.close()}}).state("app.search",{url:"/search{searchq}/{areas:(?:area-[a-zA-Z0-9_؀-ۿ-]*|null)}/{cuisines:(?:cuisines-[a-zA-Z0-9_,؀-ۿ-]*|null)}/{moods:(?:moods-[a-zA-Z0-9_,؀-ۿ-]*|null)}/{features:(?:features-[a-zA-Z0-9_,؀-ۿ-]*|nu)}?{delivery:bool}&{isopen:bool}&delivery_areas&sort&lat&lon",templateUrl:"search/views/search.html",params:{keyword:{value:null},area:{value:null,squash:!0},areas:{value:null,squash:!0},city:{value:null},cities:{value:null,squash:!0},cuisine:{value:null},cuisines:{value:null,squash:!0},mood:{value:null},moods:{value:null,squash:!0},delivery:{value:!1},isopen:{value:!1},feature:{value:null},features:{value:null,squash:!0},delivery_areas:{value:null},sort:{value:null},lat:{value:null},lon:{value:null},isDeliverySection:{value:!1}},resolve:{keyword:["$stateParams","$rootScope",function(a,b){return a.keyword?(a.searchq=a.keyword?"-"+a.keyword:"",a.keyword):a.searchq&&""!=a.searchq?(a.keyword=decodeURIComponent(a.searchq.substr(1)),a.searchq):void 0}],area:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.area?(a.areas="area-"+b.serializeArea(a.area),a.area):a.areas?c.areas.getFromUrl(a.areas).then(function(b){a.area=b}):null}],cuisine:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.cuisine?(a.cuisines="cuisines-"+b.serializeCuisines(a.cuisine),a.cuisine):a.cuisines?c.cuisines.getFromUrl(a.cuisines).then(function(b){a.cuisine=b}):null}],mood:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.mood?(a.moods="moods-"+b.serializeMoods(a.mood),a.mood):a.moods?c.moods.getFromUrl(a.moods).then(function(b){a.mood=b}):null}],feature:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.feature?(a.features="features-"+b.serializeFeatures(a.feature),a.feature):a.features?c.features.getFromUrl(a.features).then(function(b){a.feature=b}):null}],city:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.city?(a.cities="city-"+b.serializeCity(a.city),a.city):a.cities?c.cities.getFromUrl(a.cities).then(function(b){a.city=b}):null}]}}).state("app.photo",{url:"/photo/:id",templateUrl:"photos/views/photo.standalone.html"}).state("ar",{url:"/ar","abstract":!0,template:"<ui-view/>"}).state("ar.home",{url:"",templateUrl:"common/views/main.html"}).state("ar.careers",{url:"/careers",templateUrl:"common/views/static-page.careers.html"}).state("ar.add-menu",{url:"/add-menu",templateUrl:"common/views/static-page.add-menu.html"}).state("ar.terms",{url:"/terms",templateUrl:"common/views/static-page.terms.html"}).state("ar.privacy",{url:"/privacy",templateUrl:"common/views/static-page.privacy.html"}).state("ar.about",{url:"/about",templateUrl:"common/views/static-page.about.html"}).state("ar.advertise",{url:"/advertise",templateUrl:"common/views/static-page.advertise.html"}).state("ar.restaurant",{url:"/restaurants/:restaurantName-:id",templateUrl:"restaurants/views/restaurant.html",redirectTo:"ar.restaurant.menu.text"}).state("ar.restaurant.photos",{url:"/photos",templateUrl:"restaurants/views/restaurant.photos.html",onEnter:f}).state("ar.restaurant.photo",{url:"/photo-:photoId"}).state("ar.restaurant.review",{url:"/review-:reviewId",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("ar.restaurant.branches",{url:"/branches",templateUrl:"restaurants/views/restaurant.branches.html",onEnter:f}).state("ar.restaurant.reviews",{url:"/reviews",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("ar.restaurant.menu",{redirectTo:"ar.restaurant.menu.text",templateUrl:"restaurants/views/restaurant.menu.html"}).state("ar.restaurant.menu.text",{templateUrl:"restaurants/views/restaurant.menu.text.html"}).state("ar.restaurant.menu.scanned",{url:"/scanned-menu",templateUrl:"restaurants/views/restaurant.menu.scanned.html"}).state("ar.restaurantbranches",{url:"/restaurants/:restaurantName-:id/:branchName-:branchId",templateUrl:"restaurants/views/restaurant.html",redirectTo:"ar.restaurantbranches.menu.text"}).state("ar.restaurantbranches.photo",{url:"/photo-:photoId"}).state("ar.restaurantbranches.review",{url:"/review-:reviewId",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("ar.restaurantbranches.photos",{url:"/photos",templateUrl:"restaurants/views/restaurant.photos.html",onEnter:f}).state("ar.restaurantbranches.reviews",{url:"/reviews",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("ar.restaurantbranches.branches",{url:"/branches",templateUrl:"restaurants/views/restaurant.branches.html",onEnter:f}).state("ar.restaurantbranches.menu",{templateUrl:"restaurants/views/restaurant.menu.html",onEnter:f}).state("ar.restaurantbranches.menu.text",{templateUrl:"restaurants/views/restaurant.menu.text.html"}).state("ar.restaurantbranches.menu.scanned",{url:"/scanned-menu",templateUrl:"restaurants/views/restaurant.menu.scanned.html"}).state("ar.search",{url:"/search{searchq}/{areas:(?:area-[a-zA-Z0-9_؀-ۿ-]*|null)}/{cuisines:(?:cuisines-[a-zA-Z0-9_,؀-ۿ-]*|null)}/{moods:(?:moods-[a-zA-Z0-9_,؀-ۿ-]*|null)}/{features:(?:features-[a-zA-Z0-9_,؀-ۿ-]*|nu)}?{delivery:bool}&{isopen:bool}&delivery_areas&sort&lat&lon",templateUrl:"search/views/search.html",params:{keyword:{value:null},area:{value:null,squash:!0},areas:{value:null,squash:!0},city:{value:null},cities:{value:null,squash:!0},cuisine:{value:null},cuisines:{value:null,squash:!0},mood:{value:null},moods:{value:null,squash:!0},delivery:{value:!1},isopen:{value:!1},feature:{value:null},features:{value:null,squash:!0},delivery_areas:{value:null},sort:{value:null},lat:{value:null},lon:{value:null},isDeliverySection:{value:!1}},resolve:{keyword:["$stateParams","$rootScope",function(a,b){return a.keyword?(a.searchq=a.keyword?"-"+a.keyword:"",a.keyword):a.searchq&&""!=a.searchq?(a.keyword=decodeURIComponent(a.searchq.substr(1)),a.searchq):void 0}],area:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.area?(a.areas="area-"+b.serializeArea(a.area),a.area):a.areas?c.areas.getFromUrl(a.areas).then(function(b){a.area=b}):null}],cuisine:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.cuisine?(a.cuisines="cuisines-"+b.serializeCuisines(a.cuisine),a.cuisine):a.cuisines?c.cuisines.getFromUrl(a.cuisines).then(function(b){a.cuisine=b}):null}],mood:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.mood?(a.moods="moods-"+b.serializeMoods(a.mood),a.mood):a.moods?c.moods.getFromUrl(a.moods).then(function(b){a.mood=b}):null}],feature:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.feature?(a.features="features-"+b.serializeFeatures(a.feature),a.feature):a.features?c.features.getFromUrl(a.features).then(function(b){a.feature=b}):null}],city:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.city?(a.cities="city-"+b.serializeCity(a.city),a.city):a.cities?c.cities.getFromUrl(a.cities).then(function(b){a.city=b}):null}]}}).state("ar.photo",{url:"/photo/:id",templateUrl:"photos/views/photo.standalone.html"}).state("ar.profile",{url:"/users",templateUrl:"profile/views/profile-container.html",params:{tab:"timeline",popup:"unknown"}}).state("ar.profile.user",{url:"/:userName-:id",templateUrl:"profile/views/profile-container.html",redirectTo:"ar.profile.user.timeline"}).state("ar.profile.user.favorite",{url:"/favorite",templateUrl:"profile/views/timeline-favorites.html"
}).state("ar.profile.user.timeline",{url:"/foodie-timeline",templateUrl:"profile/views/timeline-favorites.html"}).state("ar.profile.user.yums",{url:"/yums",templateUrl:"profile/views/timeline-favorites.html"}).state("appcity",{url:"/:location","abstract":!0,template:"<ui-view/>",params:{location:{value:null,squash:!0}}}).state("appcity.home",{url:"",templateUrl:"common/views/main.html"}).state("appcity.restaurant",{url:"/restaurants/:restaurantName-:id",templateUrl:"restaurants/views/restaurant.html",redirectTo:"appcity.restaurant.menu.text"}).state("appcity.restaurant.photos",{url:"/photos",templateUrl:"restaurants/views/restaurant.photos.html",onEnter:f}).state("appcity.restaurant.reviews",{url:"/reviews",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("appcity.restaurant.menu",{url:"",redirectTo:"appcity.restaurant.menu.text",templateUrl:"restaurants/views/restaurant.menu.html"}).state("appcity.restaurant.branches",{url:"/branches",templateUrl:"restaurants/views/restaurant.branches.html",onEnter:f}).state("appcity.restaurant.menu.text",{url:"",templateUrl:"restaurants/views/restaurant.menu.text.html"}).state("appcity.restaurant.menu.scanned",{url:"/scanned-menu",templateUrl:"restaurants/views/restaurant.menu.scanned.html"}).state("appcity.restaurant.photo",{url:"/photo-:photoId",templateUrl:"restaurants/views/restaurant.html",redirectTo:"appcity.restaurant.menu.text"}).state("appcity.restaurant.review",{url:"/review-:reviewId",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("appcity.restaurantbranches",{url:"/restaurants/:restaurantName-:id/:branchName-:branchId",templateUrl:"restaurants/views/restaurant.html",redirectTo:"appcity.restaurantbranches.menu.text"}).state("appcity.restaurantbranches.photo",{url:"/photo-:photoId"}).state("appcity.restaurantbranches.review",{url:"/review-:reviewId",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("appcity.restaurantbranches.photos",{url:"/photos",templateUrl:"restaurants/views/restaurant.photos.html",onEnter:f}).state("appcity.restaurantbranches.reviews",{url:"/reviews",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("appcity.restaurantbranches.branches",{url:"/branches",templateUrl:"restaurants/views/restaurant.branches.html",onEnter:f}).state("appcity.restaurantbranches.menu",{url:"",templateUrl:"restaurants/views/restaurant.menu.html",onEnter:f}).state("appcity.restaurantbranches.menu.text",{url:"",templateUrl:"restaurants/views/restaurant.menu.text.html"}).state("appcity.restaurantbranches.menu.scanned",{url:"/scanned-menu",templateUrl:"restaurants/views/restaurant.menu.scanned.html"}).state("appcity.search",{url:"/search{searchq}/{areas:(?:area-[a-zA-Z0-9_؀-ۿ-]*|null)}/{cuisines:(?:cuisines-[a-zA-Z0-9_,؀-ۿ-]*|null)}/{moods:(?:moods-[a-zA-Z0-9_,؀-ۿ-]*|null)}/{features:(?:features-[a-zA-Z0-9_,؀-ۿ-]*|nu)}?{delivery:bool}&{isopen:bool}&delivery_areas&sort&lat&lon",templateUrl:"search/views/search.html",params:{keyword:{value:null},area:{value:null,squash:!0},areas:{value:null,squash:!0},city:{value:null},cities:{value:null,squash:!0},cuisine:{value:null},cuisines:{value:null,squash:!0},mood:{value:null},moods:{value:null,squash:!0},delivery:{value:!1},isopen:{value:!1},feature:{value:null},features:{value:null,squash:!0},delivery_areas:{value:null},sort:{value:null},lat:{value:null},lon:{value:null},isDeliverySection:{value:!1}},resolve:{keyword:["$stateParams","$rootScope",function(a,b){return a.keyword?(a.searchq=a.keyword?"-"+a.keyword:"",a.keyword):a.searchq&&""!=a.searchq?(a.keyword=decodeURIComponent(a.searchq.substr(1)),a.searchq):void 0}],area:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.area?(a.areas="area-"+b.serializeArea(a.area),a.area):a.areas?c.areas.getFromUrl(a.areas).then(function(b){a.area=b}):null}],cuisine:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.cuisine?(a.cuisines="cuisines-"+b.serializeCuisines(a.cuisine),a.cuisine):a.cuisines?c.cuisines.getFromUrl(a.cuisines).then(function(b){a.cuisine=b}):null}],mood:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.mood?(a.moods="moods-"+b.serializeMoods(a.mood),a.mood):a.moods?c.moods.getFromUrl(a.moods).then(function(b){a.mood=b}):null}],feature:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.feature?(a.features="features-"+b.serializeFeatures(a.feature),a.feature):a.features?c.features.getFromUrl(a.features).then(function(b){a.feature=b}):null}],city:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.city?(a.cities="city-"+b.serializeCity(a.city),a.city):a.cities?c.cities.getFromUrl(a.cities).then(function(b){a.city=b}):null}]}}).state("appcity.photo",{url:"/photo/:id",templateUrl:"photos/views/photo.standalone.html"}).state("arcity",{url:"/ar/:location","abstract":!0,template:"<ui-view/>",params:{location:{value:null,squash:!0}}}).state("arcity.home",{url:"",templateUrl:"common/views/main.html"}).state("arcity.restaurant",{url:"/restaurants/:restaurantName-:id",templateUrl:"restaurants/views/restaurant.html",redirectTo:"arcity.restaurant.menu.text"}).state("arcity.restaurant.photos",{url:"/photos",templateUrl:"restaurants/views/restaurant.photos.html",onEnter:f}).state("arcity.restaurant.photo",{url:"/photo-:photoId",templateUrl:"restaurants/views/restaurant.html",redirectTo:"arcity.restaurant.menu.text"}).state("arcity.restaurant.review",{url:"/review-:reviewId",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("arcity.restaurant.branches",{url:"/branches",templateUrl:"restaurants/views/restaurant.branches.html",onEnter:f}).state("arcity.restaurant.reviews",{url:"/reviews",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("arcity.restaurant.menu",{redirectTo:"arcity.restaurant.menu.text",templateUrl:"restaurants/views/restaurant.menu.html"}).state("arcity.restaurant.menu.text",{templateUrl:"restaurants/views/restaurant.menu.text.html"}).state("arcity.restaurant.menu.scanned",{url:"/scanned-menu",templateUrl:"restaurants/views/restaurant.menu.scanned.html"}).state("arcity.restaurantbranches",{url:"/restaurants/:restaurantName-:id/:branchName-:branchId",templateUrl:"restaurants/views/restaurant.html",redirectTo:"arcity.restaurantbranches.menu.text"}).state("arcity.restaurantbranches.photo",{url:"/photo-:photoId"}).state("arcity.restaurantbranches.review",{url:"/review-:reviewId",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("arcity.restaurantbranches.photos",{url:"/photos",templateUrl:"restaurants/views/restaurant.photos.html",onEnter:f}).state("arcity.restaurantbranches.reviews",{url:"/reviews",templateUrl:"restaurants/views/restaurant.reviews.html",onEnter:f}).state("arcity.restaurantbranches.branches",{url:"/branches",templateUrl:"restaurants/views/restaurant.branches.html",onEnter:f}).state("arcity.restaurantbranches.menu",{templateUrl:"restaurants/views/restaurant.menu.html",onEnter:f}).state("arcity.restaurantbranches.menu.text",{templateUrl:"restaurants/views/restaurant.menu.text.html"}).state("arcity.restaurantbranches.menu.scanned",{url:"/scanned-menu",templateUrl:"restaurants/views/restaurant.menu.scanned.html"}).state("arcity.search",{url:"/search{searchq}/{areas:(?:area-[a-zA-Z0-9_؀-ۿ-]*|null)}/{cuisines:(?:cuisines-[a-zA-Z0-9_,؀-ۿ-]*|null)}/{moods:(?:moods-[a-zA-Z0-9_,؀-ۿ-]*|null)}/{features:(?:features-[a-zA-Z0-9_,؀-ۿ-]*|nu)}?{delivery:bool}&{isopen:bool}&delivery_areas&sort&lat&lon",templateUrl:"search/views/search.html",params:{keyword:{value:null},area:{value:null,squash:!0},areas:{value:null,squash:!0},city:{value:null},cities:{value:null,squash:!0},cuisine:{value:null},cuisines:{value:null,squash:!0},mood:{value:null},moods:{value:null,squash:!0},delivery:{value:!1},isopen:{value:!1},feature:{value:null},features:{value:null,squash:!0},delivery_areas:{value:null},sort:{value:null},lat:{value:null},lon:{value:null},isDeliverySection:{value:!1}},resolve:{keyword:["$stateParams","$rootScope",function(a,b){return a.keyword?(a.searchq=a.keyword?"-"+a.keyword:"",a.keyword):a.searchq&&""!=a.searchq?(a.keyword=decodeURIComponent(a.searchq.substr(1)),a.searchq):void 0}],area:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.area?(a.areas="area-"+b.serializeArea(a.area),a.area):a.areas?c.areas.getFromUrl(a.areas).then(function(b){a.area=b}):null}],cuisine:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.cuisine?(a.cuisines="cuisines-"+b.serializeCuisines(a.cuisine),a.cuisine):a.cuisines?c.cuisines.getFromUrl(a.cuisines).then(function(b){a.cuisine=b}):null}],mood:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.mood?(a.moods="moods-"+b.serializeMoods(a.mood),a.mood):a.moods?c.moods.getFromUrl(a.moods).then(function(b){a.mood=b}):null}],feature:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.feature?(a.features="features-"+b.serializeFeatures(a.feature),a.feature):a.features?c.features.getFromUrl(a.features).then(function(b){a.feature=b}):null}],city:["$stateParams","$rootScope","Lookups",function(a,b,c){return a.city?(a.cities="city-"+b.serializeCity(a.city),a.city):a.cities?c.cities.getFromUrl(a.cities).then(function(b){a.city=b}):null}]}}).state("arcity.photo",{url:"/photo/:id",templateUrl:"photos/views/photo.standalone.html"}),d.html5Mode(!0)}]},{"../../signin-up/reset.password.controller.js":72}],17:[function(a,b,c){"use strict";b.exports=["$translateProvider",function(a){a.useStaticFilesLoader({prefix:"resources/locales_/",suffix:".json"}),a.usePostCompiling(!0),a.preferredLanguage(LocalStorageSrv.getItem("activeLang")||"en"),a.useSanitizeValueStrategy("escapeParameters")}]},{}],18:[function(a,b,c){"use strict";b.exports=["$rootScope","$anchorScroll","$location","$translate","$state","$stateParams","API","Lookups","constants","Session","$uibModal","hotkeys","notifications","$timeout","$window","timeAgoSettings","$cookies","conf","LocalStorageSrv",function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(a){return(a.item?a.item.name:"")+" Photo at "+(a.restaurantName?a.restaurantName:a.restaurant?a.restaurant.name:"")+" by "+(a.author?a.author.name:"")+" | elmenus.com"}function v(a){return a.item.name+" في "+(a.restaurantName?a.restaurantName:a.restaurant?a.restaurant.name:"")+" بواسطة "+(a.author?a.author.name:"")+" | elmenus.com"}function w(a){return(a.item?a.item.name:"")+" at "+(a.restaurantName?a.restaurantName:a.restaurant?a.restaurant.name:"")+" : "+(a.caption?a.caption:"")+" | Food photo taken by "+(a.author?a.author.name:"")}function x(a){return(a.item?a.item.name:"")+" في "+(a.restaurantName?a.restaurantName:a.restaurant?a.restaurant.name:"")+" : "+(a.caption?a.caption:"")+" | بواسطة "+(a.author?a.author.name:"")}function y(a){var b=1;return"-"===a[0]&&(b=-1,a=a.substr(1)),function(c,d){var e=c[a]<d[a]?-1:c[a]>d[a]?1:0;return e*b}}if(b.$state=f,b.constants=j,b.currentUser=JSON.parse(t.getItem("auth_data"))||null,b.badge=9,b.userFavoritesCount=0,b.unreadCount=0,b.LoadFooter=!1,b.restaurant,b.photoId,b.previousState,b.previousStateParams,b.title,b.description,b.titleAr,b.descriptionAr,b.selectedMood=[],b.selectedFeature=[],b.selectedCuisine=[],b.cities=[],b.firstByURL=!1,b.selectedCity=JSON.parse(t.getItem("selected_city"))||null,b.advertiseClient={},b.addMenuClient={},b.cuisines=JSON.parse(t.getItem("cuisines")),b.isMobileDevice={android:function(){return/Android/.test(navigator.userAgent)},blackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},any:function(){return isMobile.android()||isMobile.blackBerry()||isMobile.ios()}},b.hideBanner=!1,b.hideAppBanner=function(){b.hideBanner=!0},!b.selectedCity||!b.selectedCity.name||!t.getItem("selected_city")){var z="ar"===b.activeLang?"القاهرة":"Cairo";b.selectedCity={name:z,nameEn:"Cairo",nameAr:"القاهرة",id:1e3,index:0},t.setItem("selected_city",JSON.stringify(b.selectedCity))}b.areas=[],b.selectedArea=JSON.parse(t.getItem("selected_area"))||null,b.areaResturants=[],b.featureList=[],b.dropdownToggle=!0,b.requestGuestUserToken=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!a&&void 0!==r.get("guestUserToken")&&null!==r.get("guestUserToken")&&void 0!==t.getItem("guestUserToken")&&k.getCurrentUser().accessToken||h.users.authenticate().then(function(a){t.setItem("guestUserToken",JSON.stringify("00."+a.accessToken+".00")),r.put("guestUserToken","00."+a.accessToken+".00")})["catch"](function(a){})},b.getGuestUserToken=function(){return r.get("guestUserToken")||JSON.parse(t.getItem("guestUserToken"))||s.devToken},b.requestGuestUserToken(),b.getCities=function(){i.cities.get().then(function(a){b.cities=a,t.setItem("cities",JSON.stringify(a))})["catch"](function(a){})},b.getCities(),b.opendMenue=null,b.selectCity=function(a){b.selectedCity=a,b.selectedCity.index=b.cities.indexOf(a),t.setItem("selected_city",JSON.stringify(a)),b.getAreas(),delete b.selectedArea,delete t.selected_area;var c=(b.getSelectedCity()?b.getSelectedCity().nameEn:"")+" Restaurant Menus - Egypt | elmenus.com",d="منيو مطاعم - "+(b.getSelectedCity()?b.getSelectedCity().nameAr:"")+" - مصر | elmenus.com",e="elmenus is a Food Discovery Platform that will Inspire you to Discover Food you will Love! Check out Menus, Reviews and Food Photos of the Top Restaurants by Foodies in your City! elmenus is Available on iPhone and Android.",f="المنيوز هي منصة لإكتشاف الاكل تتضمن أكثر من 3,000 قائمة مطعم و 300,000 أكلة لتساعدك في قرار ماذا تأكل اليوم";b.seoMetaTags(c,e,d,f),b.setCity(),b.fetchMoods()},b.setCity=function(){b.selectedCity&&(b.search.cityId=b.selectedCity.id,b.search.selectedUserCity=b.selectedCity.id,g.city=b.selectedCity.id,b.search.selectedCity=b.selectedCity)},b.getAreas=function(){b.selectedCity&&(b.selectedCity.cityId=b.selectedCity.id),i.areas.get({cityId:b.selectedCity.cityId}||{}).then(function(a){b.areas=a})["catch"](function(a){})},b.getAreas(),b.isMobile=function(){return p.innerWidth<=1e3},b.selectArea=function(a){b.selectedArea=a,b.selectedArea.index=b.areas.indexOf(a),t.setItem("selected_area",JSON.stringify(a)),b.setArea(),b.searchByArea(a),b.getAreaResturants()},b.searchByArea=function(a){g.area=a.id,g.city=b.selectedCity.id,b.glaobalArea=a,g.delivery=!0,g.isDeliverySection=!0,f.go("app.search",g)},b.setArea=function(){b.selectedArea&&(b.search.areaId=b.selectedArea.id,b.search.areaSelected=b.selectedArea.id,b.search.selectedUserArea=b.selectedArea.id,b.search.selectedArea=b.selectedArea)},b.getAreaResturants=function(){b.selectedArea&&h.search.restaurants({areas:b.selectedArea.id.toString(),deliveryAreas:b.selectedArea.id.toString(),limit:10}).then(function(a){b.areaResturants=a.results})["catch"](function(a){})},b.getFeatures=function(){0==b.featureList.length&&i.features.get().then(function(a){b.featureList=a})["catch"](function(a){})},b.getFeatures(),b.getAreaResturants(),q.overrideLang="ar"===b.activeLang?"ar_EG":"en_US",b.glaobalArea_default_en={id:1e3,name:"6th of October"},b.glaobalArea_default_ar={id:1e3,name:"6 أكتوبر"},b.glaobalArea=b.glaobalArea_default_en,b.clearURL=function(a){if(a)return a.toString().toLowerCase().replace(/[`'~!@#$%^&*()_|+\-=?;:<>\{\}\[\]\\\/\.]/gi,"").replace(/ +(?= )/g,"").split(" ").join("-")},m.add({combo:"esc",description:"Dismiss opened photo",callback:function(){b.dismissPhoto()}}),b.followUser=function(a){if(b.activeuser){if(!b.currentUser.id)return;a.isFollowing=!a.isFollowing,h.users.follow(a.id).then(function(b){a.isFollowing=b.isFollowing,a.followersCount=a.isFollowing?a.followersCount+1:a.followersCount>0?a.followersCount-1:0})["catch"](function(){a.isFollowing=!a.isFollowing})}else b.openLoginModal()},b.changeLanguage=function(a){b.activeLang=a,"ar"==a?(q.overrideLang="ar_EG",b.glaobalArea=b.glaobalArea_default_ar,f.current.name=f.current.name.replace("app","ar"),f.current.name.indexOf("restaurant")!=-1&&(f.params.restaurantName=b.clearURL(b.restaurant.nameAr)),f.current.name.indexOf("branches")!=-1&&(f.params.branchName=b.clearURL(b.restaurant.currentBranch.area.name_ar))):(q.overrideLang="en_US",b.glaobalArea=b.glaobalArea_default_en,f.current.name=f.current.name.replace("ar","app"),f.current.name.indexOf("restaurant")!=-1&&(f.params.restaurantName=b.clearURL(b.restaurant.nameEn)),f.current.name.indexOf("branches")!=-1&&(f.params.branchName=b.clearURL(b.restaurant.currentBranch.area.name_en))),e.use(a),t.setItem("activeLang",a),delete t.cities,f.current.name.indexOf("search")!=-1?i.areas.get({cityId:b.selectedCity.cityId}||{}).then(function(a){return b.areas=a,i.cuisines.get()}).then(function(a){return b.cuisineList=a,b.cuisines=a,t.setItem("cuisines",JSON.stringify(a)),i.features.get()}).then(function(a){return b.featureList=a,i.moods.get()}).then(function(a){b.moodList=a,f.go(f.current.name,f.params,{notify:!0,location:!0})}):(f.go(f.current.name,f.params,{notify:!0}),location.reload())},b.getNotification=function(){h.users.getNotification({start:0,limit:10}).then(function(a){b.unreadCount=a.unreadCount,b.myNotifications=a.notifications})["catch"](function(a){console.log(a)})},b.getUserFavorites=function(){var a=b.currentUser.id;h.Profile.favorites({id:a,start:0,limit:10}).then(function(a){b.userFavorites=a})["catch"](function(a){console.log(a)})},b.readAllNotification=function(){b.myNotifications.forEach(function(a){a.isOpen=!0})},b.openAllNotification=function(){h.users.readAllNotification().then(function(a){b.unreadCount=0,b.myNotifications.forEach(function(a){a.isRead=!0})})["catch"](function(a){console.log(a)})},b.openNotification=function(a){var c=b.myNotifications.indexOf(a);c!==-1&&(b.myNotifications[c].isOpen=!0),console.log(b.myNotifications[c]),h.users.openNotification(a).then(function(a){})["catch"](function(a){console.log(a)})},b.basicUserInfo=function(){var a=b.currentUser.id;h.Profile.userInfo(a).then(function(a){b.userFavoritesCount=a.favoritesCount})["catch"](function(a){console.log(a)})},b.yumPhoto=function(a){b.activeuser?(a.isYummed||(a.isAnimating=!0,o(function(){a.isAnimating=!1},1e3)),a.isYummed=!a.isYummed,h.photos.toggleYum(a.id).then(function(b){a.isYummed=b.isYummed,a.yumsCount=b.yumsCount})["catch"](function(b){a.isYummed=!a.isYummed,console.log(b),n.showError({message:"Failed to yum photo",hideDelay:1500,hide:!0})})):b.openLoginModal()},b.getPhoto=function(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];b.prevTitle=b.title,b.prevDescription=b.description,b.seoMetaTags(u(a),w(a),v(a),x(a)),a.id&&(f.current.name.indexOf("photo")==-1&&(b.previousStateParams=f.params,b.previousState=f.current),b.photoId=a.id,c?a.restaurant=c:c=a.restaurant,c&&b.goToRestaurant("app.restaurant.photo",c?c.id:"",c?c.name:"",c.currentBranch,a.id)),d.length>0&&(b.photoPool=d,b.nextPhotoIndex=(d.indexOf(a)+1)%d.length,b.prevPhotoIndex=(d.indexOf(a)-1)%d.length!==-1?(d.indexOf(a)-1)%d.length:d.length-1),h.photos.get(a.id).then(function(a){b.photo=a})["catch"](function(a){console.log(a)})["finally"](function(){})},b.openPhoto=function(c,d){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];b.photoPool=[],b.restaurant=d,b.prevTitle=b.title,b.prevDescription=b.description,c.id&&(f.current.name.indexOf("photo")==-1&&(b.previousStateParams=f.params,b.previousState=f.current),b.photoId=c.id,d?c.restaurant=d:d=c.restaurant,d&&b.goToRestaurant("app.restaurant.photo",d?d.id:"",d?d.name:"",d.currentBranch,c.id)),b.userComment="",b.openedPhoto=!0,b.photo={},e.length>0&&(b.photoPool=e,b.nextPhotoIndex=(e.indexOf(c)+1)%e.length,b.prevPhotoIndex=(e.indexOf(c)-1)%e.length!==-1?(e.indexOf(c)-1)%e.length:e.length-1),h.photos.get(c.id).then(function(c){b.photo=c,l.open({templateUrl:"photos/views/photo.box.html",scope:b,size:"lg",controller:a("../../photos/photo.controller.js")}).result["finally"](function(){b.seoMetaTags(b.prevTitle,b.prevDescription),"app.restaurant.photo"==b.previousState.name?f.go("app.restaurant",b.previousStateParams,{notify:!0,reload:!0}):"app.restaurantbranches.photo"==b.previousState.name?f.go("app.restaurantbranches",b.previousStateParams,{notify:!0,reload:!0}):"ar.restaurant.photo"==b.previousState.name?f.go("ar.restaurant",b.previousStateParams,{notify:!0,reload:!0}):"ar.restaurantbranches.photo"==b.previousState.name?f.go("ar.restaurantbranches",b.previousStateParams,{notify:!0,reload:!0}):f.go(b.previousState.name,b.previousStateParams,{notify:!1,reload:!1})})})["catch"](function(a){console.log(a)})["finally"](function(){b.seoMetaTags(u(b.photo),w(b.photo),v(b.photo),x(b.photo))})},b.makehelpful=function(a){b.activeuser?h.reviews.toggleHelpful(a.id).then(function(b){a.helpfulCount=b.helpfulCount,a.isHelpful=b.isHelpful})["catch"](function(a){console.log(a)}):b.openLoginModal()},b.reportPhoto=function(a){b.activeuser?h.photos.reportPhotos(a.id,a.repTypeId).then(function(a){n.showSuccess({message:"Reported Successfully!",hideDelay:1500,hide:!0})})["catch"](function(a){n.showError({message:"Failed to report",hideDelay:1500,hide:!0})})["finally"](function(){a.repTypeId=void 0}):b.openLoginModal()},b.getReportsTypes=function(){t.photoReportsTypes?b.reportsTypes=JSON.parse(t.getItem("photoReportsTypes")):h.photos.getReportsTypes().then(function(a){b.reportsTypes=a,t.setItem("photoReportsTypes",JSON.stringify(a))})},b.sharePhoto=function(a){h.photos.sharePhoto(a.id).then(function(a){n.showSuccess({message:"Shared Successfully!",hideDelay:1500,hide:!0})})["catch"](function(a){n.showError({message:"Failed to share",hideDelay:1500,hide:!0})})},b.getReportsTypes(),b.openLoginOrSignupModal=function(){b.dismissPhoto&&b.dismissPhoto(),b.mood=0,b.currentUser.id||l.open({templateUrl:"signin-up/views/login.or.signup.modal.html",scope:b,size:"lg",controller:a("../../signin-up/login.or.signup.controller.js")})},b.openLoginModal=function(c){b.dismissPhoto&&b.dismissPhoto(),b.mood=1,b.login=c,l.open({templateUrl:"signin-up/views/login.or.signup.modal.html",scope:b,size:"xmd",controller:a("../../signin-up/login.or.signup.controller.js")})},b.openEditModal=function(){b.dismissPhoto&&b.dismissPhoto(),b.mood=1,l.open({templateUrl:"edit-profile/views/edit-profile.html",scope:b,size:"md",controller:a("../../edit-profile/edit-profile.js")})},b.openOfferModal=function(c){b.dismissPhoto&&b.dismissPhoto(),b.mood=1,l.open({templateUrl:"offer/views/offer.html",scope:b,size:"md",controller:a("../../offer/offer.js"),resolve:{offer:c}})},b.openJobModal=function(c){b.dismissPhoto&&b.dismissPhoto(),b.jobId=c,l.open({templateUrl:"careers/views/job-application.html",scope:b,size:"md",controller:a("../../careers/job-application.js")})},b.openSignupModal=function(){b.dismissPhoto&&b.dismissPhoto(),b.mood=0,l.open({templateUrl:"signin-up/views/login.or.signup.modal.html",scope:b,size:"xmd",controller:a("../../signin-up/login.or.signup.controller.js")})},b.storeResData=function(a,c){var d=b.loadResData();d||(d=[]);var e=_.findIndex(d,function(b){return b.id==a.id});if(e>-1&&d[e].visitCount>1)return d.splice(e,1),b.currentUser&&t.setItem("visited_restaurant_"+b.currentUser.id,JSON.stringify(d)),!1;if(!a.isFavorited&&!c){var f={id:a.id,visitCount:e>=0&&d&&d[e].visitCount?d[e].visitCount+1:1};return e>-1&&d.splice(e,1),d.push(f),b.currentUser&&t.setItem("visited_restaurant_"+b.currentUser.id,JSON.stringify(d)),!0}},b.loadResData=function(){var a,c;return b.currentUser&&(a=t.getItem("visited_restaurant_"+b.currentUser.id),c=JSON.parse(a)),null!==c&&(b.restaurantUserVisited=c),c},b.storeAuthData=function(a){t.setItem("auth_data",JSON.stringify(a))},b.loudAuthData=function(){var a=t.getItem("auth_data"),c=JSON.parse(a);return null!==c&&(b.activeuser=c),c},b.loudAuthData(),b.logout=function(){h.users.logout(b.activeuser.accessToken),k.currentUser={},f.go(f.current.name,f.params,{notify:!0,reload:!0}),b.storeAuthData(null),b.activeuser=null,b.userFavorites=null},b.reInit=function(){b.activeuser&&b.getNotification()},b.spliter=function(a){var c=a.slice();c.sort(y("sequence"));for(var d=[];c.length;)d.push(c.splice(0,4));b.noModes=0==d.length,b.moodsList=d},b.fetchMoods=function(){i.moods.get().then(function(a){b.moodList=a,b.spliter(a)})["catch"](function(a){console.log(a)})},o(function(){b.fetchMoods()},1e3),b.openProfile=function(a,c,d,e,g){var h=a.id,i=a.name,j="app.profile";i&&(i=b.clearURL(i)),c&&c.preventDefault&&c.preventDefault(),d?(g&&(j+=g),f.go(j,{popup:e},{reload:!0})):(j+=".user",g&&(j+=g),f.go(j,{id:h,userName:i,userBio:a.bio},{reload:!1}))},b.seoMetaTags=function(a,c,d,e){b.title=a,b.description=c,b.titleAr=d,b.descriptionAr=e,"en"==b.activeLang?$("meta[name=description]").attr("content",c):$("meta[name=description]").attr("content",e)},b.reloadPage=function(){location.reload()},b.getURL=function(a,c,d){var e=location.href.split("/"),g=e[0]+"/"+e[1]+"/"+e[2];if("ar"==t.getItem("activeLang")&&(g+="/"+e[3]),f.current.name.indexOf("appcity")!=-1&&t.getItem("selected_city")&&"Cairo"!=JSON.parse(t.getItem("selected_city")).nameEn?(g+="/"+b.clearURL(JSON.parse(t.getItem("selected_city")).nameEn),"search"==a&&(g+="/s?",d&&c&&(g+=d+"="+c+"&"),g+="delivery=0&isopen=0")):f.current.name.indexOf("arcity")!=-1&&t.getItem("selected_city")&&"Cairo"!=JSON.parse(t.getItem("selected_city")).nameEn?(g+="/"+b.clearURL(JSON.parse(t.getItem("selected_city")).nameAr),"search"==a&&(g+="/s?",void 0!==d&&void 0!==c&&(g+=d+"="+c+"&"),g+="delivery=0&isopen=0")):"search"==a&&(g+="/s?",void 0!==d&&void 0!==c&&(g+=d+"="+c+"&"),g+="delivery=0&isopen=0"),"restaurant"==a&&void 0!==d&&void 0!==c){var h="en"==b.activeLang?JSON.parse(t.getItem("selected_city")).nameEn:JSON.parse(t.getItem("selected_city")).nameAr,i=b.clearURL(h);g+=g.indexOf(i)===-1?"/"+b.clearURL(h)+"/restaurants/"+b.clearURL(d)+"-"+c:"/restaurants/"+b.clearURL(d)+"-"+c}return g},b.openRestaurantReview=function(a,c){f.go("app.restaurant.review",{id:a.id,restaurantName:b.clearURL(a.name),reviewId:c},{reload:!0,notify:!0})},b.goToRestaurant=function(a,c,d,e,h){var i,j;if(e){if(i=e.area.name,j=e.id,"en"==b.activeLang)var k=b.toTitleCase(g.restaurantName)+" "+a.split(".")[3]+" menu on elmenus.com, "+b.selectedCity.name+" , Egypt | Restaurant Menu",l=b.toTitleCase(g.restaurantName)+" : "+e.address+", "+e.area.name+", "+b.selectedCity.name+", Egypt, Restaurant Menu. Phone Numbers: …";else var k="منيو "+g.restaurantName+" "+b.selectedCity.name+" مصر |منيو المطعم| المنيوز |";void 0==h&&b.seoMetaTags(k,l)}d&&(d=b.clearURL(d)),i&&(i=b.clearURL(i)),void 0!==j&&(a=a.slice(0,"app.restaurant".length)+"branches"+a.slice("app.restaurant".length,a.length)),void 0!=h?f.go(a,{id:c,restaurantName:d,branchId:j,branchName:i,photoId:h},{reload:!1,notify:!1}):f.go(a,{id:c,restaurantName:d,branchId:j,branchName:i},{reload:!1,notify:!0})},b.getBaseUrl=function(a){return"ar"==t.getItem("activeLang")&&a.replace("app","ar"),a},b.returnToTheTop=function(){c()},b.scrollTo=function(a){d.hash(a),c()},b.carouselNext=function(){var a=$(".owl-carousel");a.trigger("next.owl.carousel")},b.carouselPrev=function(){var a=$(".owl-carousel");a.trigger("prev.owl.carousel")},b.startsWith=function(a,b){var c=(a+"").toLowerCase();return 0===c.indexOf(b.toLowerCase())},b.getCityById=function(a){var c=b.cities.map(function(a){return a.id}).indexOf(a);return b.cities[c]},o(function(){b.LoadFooter=!0},2e3),b.getCuisines=function(){h.search.cusines().then(function(a){b.cuisineList=a})["catch"](function(a){console.log(a)})},b.getCuisines(),b.sendAdvertiseEmail=function(a){h.staticPages.sendAdvertiseEmail(a).then(function(a){b.advertiseClient.success=!0})["catch"](function(a){console.log("sendAdvertiseEmailError",a),b.advertiseClient.success=!1})},b.sendAddMenuEmail=function(a){var c={};c.restaurantCity=a.selectedResturantCity.name,delete a.selectedResturantCity,a.areas&&(c.restaurantDeliveryAreas=Object.keys(a.areas).join(","),delete a.areas),a.cuisines&&(c.restaurantCuisines=Object.keys(a.cuisines).join(","),delete a.cuisines),c=Object.assign(a,c),h.staticPages.sendAddMenuEmail(a).then(function(a){b.addMenuClient.success=!0})["catch"](function(a){console.log("sendAdvertiseEmailError",a),b.addMenuClient.success=!1})},b.LoadScannedMenuData=function(a){b.addMenuClient.scannedMenuFile=a[0]},b.LoadExcelMenuData=function(a){b.addMenuClient.excelMenuFile=a[0]},b.serializeCity=function(a){return b.clearURL(_.find(b.cities,function(b){return b.id==parseInt(a)}).name)},b.serializeArea=function(a){return b.clearURL(_.find(b.areas,function(b){return b.id==parseInt(a)}).name)},b.serializeCuisines=function(a){a=a.toString().split(",");for(var c=[],d=a.length-1;d>=0;d--){var e=_.find(b.cuisines,function(b){return b.id==parseInt(a[d])});if(e){var f=b.clearURL(e.name);c.push(f)}}return c.join(",")},b.serializeMoods=function(a){var c=[];a=a.toString().split(",");for(var d=a.length-1;d>=0;d--)c.push(b.clearURL(_.find(b.moodList,function(b){return b.id==parseInt(a[d])}).name));return c.join(",")},b.serializeFeatures=function(a){var c=[];a=a.toString().split(",");for(var d=a.length-1;d>=0;d--)c.push(b.clearURL(_.find(b.featureList,function(b){return b.id==parseInt(a[d])}).name));return c.join(",")},b.topDishPhotos=function(a){var b=[];return a.forEach(function(a){var c={};c=a.photo,c.item=a,b.push(c)}),b},b.toTitleCase=function(a){return a.split("-").join(" ").replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},b.getSelectedCity=function(){return JSON.parse(t.getItem("selected_city")||JSON.stringify(b.selectedCity))},b.getSelectedArea=function(){return JSON.parse(t.selected_area||null)},b.reInit()}]},{"../../careers/job-application.js":15,"../../edit-profile/edit-profile.js":40,"../../offer/offer.js":52,"../../photos/photo.controller.js":53,"../../signin-up/login.or.signup.controller.js":71}],19:[function(a,b,c){"use strict";b.exports=["$compile","$rootScope",function(a,b){return{restrict:"EA",scope:{data:"="},templateUrl:"search/views/selected-area.carousel.html",link:function(a,c){a.hide=!0;var d=$(".owl-carousel");setTimeout(function(){d.owlCarousel({center:!0,items:2,responsive:{600:{items:2},1e3:{items:3},1200:{items:4},1500:{items:5},1800:{items:6}},rtl:!0,loop:!0,margin:5,autoplay:!0,autoplayTimeout:3e3,autoplayHoverPause:!0}),d.on("click",".item",function(){if(this.hasAttribute("resturant-id")){var a=this.getAttribute("resturant-id"),c=this.getAttribute("resturant-name");b.goToRestaurant("app.restaurant.menu",a,c)}})},1),setTimeout(function(){a.hide=!1},3)}}}]},{}],20:[function(a,b,c){"use strict";b.exports=function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b==a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}}},{}],21:[function(a,b,c){"use strict";b.exports=["$window","$rootScope",function(a,b){return["scope","element","attrs","document",function(c,d,e,f){var g=angular.element(a);g.bind("scroll",function(){var c=angular.element("#footerContainer"),d=this.pageYOffset,e=a.innerHeight,f=d+e,g=c[0].offsetTop;b.windowInerHeight=e,b.bottomOffset=f,b.footerTopOffset=g,b.faDirection="fa-angle-right","ar"==LocalStorageSrv.getItem("activeLang")&&(b.faDirection="fa-angle-left")})}]}]},{}],22:[function(a,b,c){"use strict";b.exports=["$parse",function(a){return{restrict:"A",link:function(b,c,d){var e=a(d.imgLoaded);c.load(function(a){b.$apply(function(){e(b,{$event:a})})})}}}]},{}],23:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"E",replace:!0,transclude:!0,link:function(a){a.cancel=function(){a.$dismiss("cancel")}},templateUrl:"common/directives/modal/modal.html"}}},{}],24:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"E",replace:!0,templateUrl:"common/directives/newsFeed/followsFeed/followsFeed.html",scope:{feed:"=",openPhoto:"&",followUser:"&followUser"},controllerAs:"ctrl",controller:["$scope",function(a){this.openPhotoInner=function(b,c,d){var e=a.openPhoto();e(b,c,d)}}]}}},{}],25:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"E",replace:!0,templateUrl:"common/directives/newsFeed/itemFeed/itemFeed.html",
scope:{feed:"="},controllerAs:"ctrl",controller:["$rootScope",function(a){var b=this;b.getURL=a.getURL,b.goToRestaurant=a.goToRestaurant}]}}},{}],26:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"E",replace:!0,templateUrl:"common/directives/newsFeed/photoFeed/photoFeed.html",scope:{feed:"=",ondeletephoto:"&onDeletePhoto",followUser:"&followUser",yumPhoto:"&",openPhoto:"&",reportPhoto:"&",getReportsTypes:"&",sharePhoto:"&",reportsTypes:"=",rep:"="},controllerAs:"ctrl",controller:["$scope","$rootScope",function(a,b){function c(b,c){b.repTypeId=c,a.reportPhoto(b)}var d=this;d.getURL=b.getURL,d.goToRestaurant=b.goToRestaurant,d.reportPhotoInner=c}]}}},{}],27:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"E",replace:!0,templateUrl:"common/directives/newsFeed/reviewFeed/reviewFeed.html",scope:{feed:"=",ondeletereview:"&onDeleteReview",makehelpful:"&makeHelpful",followUser:"&followUser"},controllerAs:"ctrl",controller:["$scope","$rootScope",function(a,b){function c(b,c){b.repTypeId=c,a.reportPhoto(b)}var d=this;d.getURL=b.getURL,d.goToRestaurant=b.goToRestaurant,d.reportPhotoInner=c}]}}},{}],28:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"A",link:function(a,b,c){var d=b[0];$document.find("body").bind("scroll",function(){d.scrollTop+d.offsetHeight>=d.scrollHeight&&a.$apply(c.scrollusing)})}}}},{}],29:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"A",scope:!1,link:function(a,b,c){function d(a){b[0].scrollTop-=a.originalEvent.wheelDeltaY||a.originalEvent.wheelDelta||0,a.stopPropagation(),a.preventDefault(),a.returnValue=!1}b.bind("mousewheel",d)}}}},{}],30:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"E",templateUrl:"common/directives/star_rating/star_rating.html",scope:{rating:"=value",reviewCount:"=count",module:"=module"},link:function(a,b){a.editableModules=["addReview"],a.setRating=function(b){a.editableModules.indexOf(a.module)!==-1&&(a.rating=b)}}}}},{}],31:[function(a,b,c){"use strict";var d=a("./config/translate.config.js"),e=a("./config/state.config.js");b.exports=angular.module("elmenus",["core","ngAnimate","ngCookies","ngResource","angucomplete-alt","ngSanitize","ngTouch","ui.bootstrap","ui.router","ui.utils","ui.select","sticky","hl.sticky","infinite-scroll","slick","angularSpinners","duScroll","hm.readmore","debounce","wu.masonry","monospaced.elastic","ngDroplet","yaru22.angular-timeago","ngNotificationsBar","toaster","jkuri.gallery","uiGmapgoogle-maps","ngStorage","pascalprecht.translate","cfp.hotkeys","once","ngFileUpload","mgcrea.ngStrap","angular-google-gapi","esc-key","seo","updateMeta","ngPhotoswipe","pouchdb","ngDfp","angular-google-analytics"]).value("duScrollOffset","80").config(d).config(e).config(["uiSelectConfig",function(a){a.theme="selectize"}]).config(["timeAgoSettings",function(a){a.strings.ar_EG={prefixAgo:"منذ",prefixFromNow:null,suffixAgo:null,suffixFromNow:"الأن",seconds:"أقل من دقيقه",minute:"من دقيقه",minutes:"%d دقائق",hour:" ساعه",hours:"ساعه %d ",day:" يوم",days:"%d أيام",month:" شهر",months:"%d أشهر",year:" سنه",years:"%d سنه",numbers:[]}}]).config(["DoubleClickProvider",function(a){a.setSingleRequest(!1),a.defineSlot("/11531733/AllpagesLeaderboardmobile",[320,50],"leaderboard-mob-tag"),a.defineSizeMapping("leaderboard-mob-tag").addSize([1e3,200],[50,50]).addSize([1,1],[320,50]),a.defineSlot("/11531733/AllpagesTopLeaderboard728*90",[728,90],"div-gpt-ad-1442947493461-1"),a.defineSizeMapping("div-gpt-ad-1442947493461-1").addSize([1e3,200],[728,90]).addSize([1,1],[50,50]),a.defineSlot("/11531733/Searchdisc1",[[250,125],[300,150]],"div-gpt-ad-1442950921236-2"),a.defineSlot("/11531733/Searchdisc2",[[250,125],[300,150]],"div-gpt-ad-1442950921236-3"),a.defineSlot("/11531733/Searchdisc3",[[250,125],[300,150]],"div-gpt-ad-1442950921236-4"),a.defineSlot("/11531733/Searchdisc4",[[250,125],[300,150]],"div-gpt-ad-1442950921236-5"),a.defineSlot("/11531733/Searchdisc5",[[250,125],[300,150]],"div-gpt-ad-1442950921236-6"),a.defineSlot("/11531733/Searchdisc6",[[250,125],[300,150]],"div-gpt-ad-1442950921236-7"),a.defineSlot("/11531733/Searchdisc7",[[250,125],[300,150]],"div-gpt-ad-1442950921236-8"),a.defineSlot("/11531733/Searchdisc8",[[250,125],[300,150]],"div-gpt-ad-1442950921236-9"),a.defineSizeMapping("div-gpt-ad-1442950921236-2").addSize([1e3,200],[[250,125],[300,150]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442950921236-3").addSize([1e3,200],[[250,125],[300,150]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442950921236-4").addSize([1e3,200],[[250,125],[300,150]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442950921236-5").addSize([1e3,200],[[250,125],[300,150]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442950921236-6").addSize([1e3,200],[[250,125],[300,150]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442950921236-7").addSize([1e3,200],[[250,125],[300,150]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442950921236-8").addSize([1e3,200],[[250,125],[300,150]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442950921236-9").addSize([1e3,200],[[250,125],[300,150]]).addSize([1,1],[50,50]),a.defineSlot("/11531733/RestSkyScraperRight",[160,600],"div-gpt-ad-1466094068364-0"),a.defineSlot("/11531733/RestSkyscraperHover",[160,600],"div-gpt-ad-1466094068364-1"),a.defineSlot("/11531733/InMenuAd1",[[300,150],[468,60]],"div-gpt-ad-1442947493461-2"),a.defineSlot("/11531733/Restdisc1",[[302,151],[300,150],[250,125]],"div-gpt-ad-1442947493461-mobile"),a.defineSlot("/11531733/Restdisc1",[[302,151],[300,150],[250,125]],"div-gpt-ad-1442947493461-3"),a.defineSlot("/11531733/Restdisc2",[[300,150],[250,125]],"div-gpt-ad-1442947493461-4"),a.defineSlot("/11531733/Restdisc3",[[300,150],[250,125]],"div-gpt-ad-1442947493461-5"),a.defineSlot("/11531733/Restdisc4",[[300,150],[250,125]],"div-gpt-ad-1442947493461-6"),a.defineSlot("/11531733/Restdisc5",[[300,150],[250,125]],"div-gpt-ad-1442947493461-7"),a.defineSlot("/11531733/Restdisc6",[[300,150],[250,125]],"div-gpt-ad-1442947493461-8"),a.defineSlot("/11531733/Restdisc7",[[300,150],[250,125]],"div-gpt-ad-1442947493461-9"),a.defineSlot("/11531733/Restdisc8",[[300,150],[250,125]],"div-gpt-ad-1442947493461-10"),a.defineSlot("/11531733/LeaderboardBottom",[728,90],"div-gpt-ad-1447156152181-0"),a.defineSlot("/11531733/RestdiscMobile1",[302,151],"mobtag1"),a.defineSlot("/11531733/Restdiscmobile2",[302,151],"mobtag2"),a.defineSlot("/11531733/RestMeidumRectTopRight",[300,250],"div-gpt-ad-1453986296406-0"),a.defineSlot("/11531733/Leaderboard72890Home",[728,90],"div-gpt-ad-1406067834204-0"),a.defineSizeMapping("div-gpt-ad-1406067834204-0").addSize([1e3,200],[728,90]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442947493461-mobile").addSize([1e3,200],[50,50]).addSize([1,1],[[302,151],[300,150],[250,125]]),a.defineSizeMapping("div-gpt-ad-1447156152181-0").addSize([1e3,200],[728,90]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442947493461-2").addSize([1050,200],[300,150]),a.defineSizeMapping("div-gpt-ad-1442947493461-3").addSize([1050,200],[300,150]),a.defineSizeMapping("div-gpt-ad-1442947493461-4").addSize([1e3,200],[[300,150],[250,125]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442947493461-5").addSize([1e3,200],[[300,150],[250,125]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442947493461-6").addSize([1e3,200],[[300,150],[250,125]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442947493461-7").addSize([1e3,200],[[300,150],[250,125]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442947493461-8").addSize([1,1],[50,50]).addSize([1e3,200],[[300,150],[250,125]]),a.defineSizeMapping("div-gpt-ad-1442947493461-9").addSize([1e3,200],[[300,150],[250,125]]).addSize([1,1],[50,50]),a.defineSizeMapping("div-gpt-ad-1442947493461-10").addSize([1e3,200],[[300,150],[250,125]]).addSize([1,1],[50,50]),a.defineSizeMapping("mobtag1").addSize([1050,200],[300,150]).addSize([320,480],[302,151]),a.defineSizeMapping("mobtag2").addSize([1050,200],[300,150]).addSize([320,480],[302,151])}]).config(["AnalyticsProvider",function(a){a.setAccount("UA-13140101-2"),a.trackPages(!0)}]).run(["Analytics","$location","$rootScope","$timeout",function(a,b,c,d){c.$on("$stateChangeSuccess",function(){d(function(){var d="en"==c.activeLang?c.title:c.titleAr;a.trackPage(b.path(),d)},1e3)})}]).config(["$httpProvider",function(a){var b,c=["$q","$injector",function(a,c){function d(a){b=b||c.get("$http");var d=c.get("$timeout"),e=c.get("$rootScope");return b.pendingRequests.length<1&&d(function(){b.pendingRequests.length<1&&e.htmlReady()},700),a}function e(d){return b=b||c.get("$http"),a.reject(d)}var e;return function(a){return a.then(d,e)}}];a.interceptors.push(c)}]).run(["$rootScope","$state","$stateParams","$window","$location","FBSrv",function(a,b,c,d,e,f){a.$state=b,a.$stateParams=c,a.$on("$stateChangeStart",function(a,c,d){c.redirectTo&&(a.preventDefault(),b.go(c.redirectTo,d))}),d.fbAsyncInit=function(){FB.init({appId:"130949746951756",channelUrl:"./common/views/channel.html",status:!0,cookie:!0,xfbml:!0}),f.watchAuthenticationStatusChange()},function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="https://connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document)}]).run(["GAuth","GApi","GData","$state","$rootScope",function(a,b,c,d,e){e.gdata=c;var f="624762958330-3uhmc0u8adrlj5c15k9aivb4750fo0m8.apps.googleusercontent.com";a.setClient(f),a.setScope("https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/calendar.readonly")}]).run(["$translate",function(a){a("Like").then(function(a){})}]).filter("userName",["$rootScope",function(a){return function(b){return a.currentUser&&a.currentUser.id===b.id?"You":b.name}}]).filter("sizeWithNames",function(){return function(a){var b=!1;return a.forEach(function(a){a.name&&""!=a.name&&(b=!0)}),b}}).filter("joinBy",function(){return function(a,b){return(a||[]).join(b||",")}}).filter("cleanAreasAndCities",function(){return function(a){var b=[];return _.forEach(a,function(a){var c=a;c.type="city",c.cityId=a.id,c.cityName=a.name,b.push(c),_.forEach(c.areas,function(c){c.cityName=a.name,c.cityId=a.id,c.type="area",b.push(c)})}),b}})},{"./config/state.config.js":16,"./config/translate.config.js":17}],32:[function(a,b,c){"use strict";var d={conf:{apiUrl:"http://dev.api.elmenus.com/v2/",appId:"51c7335ded44daf25d000022",devToken:"00.ZXlKaGJHY2lPaUpJVXpJMU5pSjkuTkRFdU5EVXVNVEU1TGpJek9DMC5fTm5PcVFEUXNVOUhZUS1UTXBoMnlNamdlOTFOeUhYUTdSdDZ4UGI3c0N3.00"},constants:{defaultAvatarUrl:"images/assets/default_avatar.png"},ENV:{dev:!0,staging:!1,prod:!1}},e={conf:{apiUrl:"http://staging2.api.elmenus.com:3000/v2/",appId:"51c7335ded44daf25d000022",devToken:"00.ZXlKaGJHY2lPaUpJVXpJMU5pSjkuTkRFdU5EVXVNVEU1TGpJek9DMC5fTm5PcVFEUXNVOUhZUS1UTXBoMnlNamdlOTFOeUhYUTdSdDZ4UGI3c0N3.00"},constants:{defaultAvatarUrl:"images/assets/default_avatar.png"},ENV:{dev:!1,staging:!0,prod:!1}},f={conf:{apiUrl:"http://api.elmenus.com/v2/",appId:"51c7335ded44daf25d000022",devToken:"00.ZXlKaGJHY2lPaUpJVXpJMU5pSjkuTkRFdU5EVXVNVEU1TGpJek9DMC5fTm5PcVFEUXNVOUhZUS1UTXBoMnlNamdlOTFOeUhYUTdSdDZ4UGI3c0N3.00"},constants:{defaultAvatarUrl:"images/assets/default_avatar.png"},ENV:{dev:!1,staging:!1,prod:!0}},g="staging";switch(g){case"staging":case"stageing":b.exports=e;case"dev":case"local":case"development":b.exports=d;case"prod":case"docker":case"live":case"production":b.exports=f;default:b.exports=e}},{}],33:[function(a,b,c){"use strict";b.exports=angular.module("env",[]).constant("conf",{apiUrl:"https://api.elmenus.com/v2/",appId:"51c7335ded44daf25d000013",devToken:"00.ZXlKaGJHY2lPaUpJVXpJMU5pSjkuTkRFdU5EVXVNVEU1TGpJek9DMC5fTm5PcVFEUXNVOUhZUS1UTXBoMnlNamdlOTFOeUhYUTdSdDZ4UGI3c0N3.00"}).constant("constants",{defaultAvatarUrl:"images/assets/default_avatar.png"}).constant("ENV",{dev:!1,staging:!1,prod:!0})},{}],34:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.exports=["Session",function(a){var b=function(){function b(){d(this,b)}return e(b,[{key:"facebookLogin",value:function(){var a=this;FB.login(function(b){b.authResponse?a.watchFacebookLoginChange():console.log("User cancelled login or did not fully authorize.")},{scope:"email,user_photos,user_videos"})}},{key:"watchFacebookLoginChange",value:function(){var a=this;FB.Event.subscribe("auth.authResponseChange",function(b){"connected"===b.status&&a.getUserInfo()})}},{key:"getUserInfo",value:function(){FB.api("/me",function(b){a.setCurrentUser(b)})}},{key:"facebookLogout",value:function(){FB.logout(function(b){a.setCurrentUser({})})}},{key:"watchAuthenticationStatusChange",value:function(){var a=this;FB.getLoginStatus(function(b){a.statusChangeCallback(b)})}},{key:"statusChangeCallback",value:function(a){"connected"===a.status||"not_authorized"===a.status}}]),b}();return new b}]},{}],35:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c,e,f){d(this,a),this.conf=b,this.$document=c,this.notifications=e,this.prod=f.prod}return e(a,[{key:"buildUrl",value:function(a){return this.conf.apiUrl+a}},{key:"encodeAuthenticationMessage",value:function(a,b){var c=JSON.stringify({email:a,password:b});return btoa(c)}},{key:"forgetPasswordMessage",value:function(a,b){var c=JSON.stringify({email:a});return btoa(c)}},{key:"buildAuthorizationHeader",value:function(a){return(new Date).getTime()+"."+a+".*&"}},{key:"exceptionHandler",value:function(a,b){var c=this.$document[0],d='\n            <style>\n                .header{\n                    text-align:center;\n                    background-color:#aaa;\n                    padding:10px;\n                }\n                h4 { text-align: center  }\n                p { padding-left: 20px; color: #aaa;text-align: center; }\n                pre {\n                    padding: 20px;\n                    margin: 20px;\n                    background: #333;\n                    color: #fff;\n                }\n                .logo {\n                    width: 130px;\n                    height: auto;\n                }\n                .wrapped{\n                    max-width: 100%;\n                }\n            </style>\n            <div class="header">\n                <img class="logo" src="assets/logo_dark.png" alt="" />\n            </div>\n            <h4>Sorry, Something went wrong.</h1>\n            <p>we\'re working on it and we\'ll get it fixed as soon as we can</p>\n            <div style="text-align: center;text-decoration: underline;">\n                <a style="color: blue;cursor:pointer" href=\'#/\' onClick="window.location.reload(true);">Go Back</a>\n            </div>\n        ';this.prod||(d+='<p><strong>EVENT:</strong> "'+b+'".<br /><strong>ERROR:</strong> See below</p>\n         <pre>'+(_.isObject(a)?JSON.stringify(a):a)+"</pre>"),c.body.innerHTML=d}},{key:"getLocation",value:function(){return new Promise(function(a,b){navigator.geolocation.getCurrentPosition(function(c,d){c?a(c):(a({latitude:"",longitude:""}),b(d))})})}},{key:"apiErrorHandler",value:function(a,b){throw console.trace("[ERROR] => Failed to query data from the API!",b),this.exceptionHandler(a,b),new Error(a)}},{key:"cleanNullValues",value:function(a){for(var b in a)a.hasOwnProperty(b)&&_.isNull(a[b])&&delete a[b];return a}},{key:"toggleScopeKey",value:function(a){return!a}}]),a}();b.exports=["conf","$document","notifications","ENV",function(a,b,c,d){return new f(a,b,c,d)}]},{}],36:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.exports=["$rootScope","$cookies","$window",function(a,b,c){var f=function(){function a(){d(this,a)}return e(a,[{key:"getItem",value:function(a){var d;try{d=c.localStorage?c.localStorage.getItem(a):b.get(a)}catch(e){console.log(e),d=b.get(a)||null}return d}},{key:"setItem",value:function(a,d){try{c.localStorage?c.localStorage.setItem(a,d):b.get(a,d)}catch(e){b.get(a,d)}}}]),a}();return new f}]},{}],37:[function(a,b,c){"use strict";b.exports=["ENV",function(a){var b=function(b){for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];a.dev&&(_.contains(["log","info","table","trace","error","warn"],b)?1===d.length?console[b]("["+b.toUpperCase()+"] "+(new Date).getTime()+":=>",d):console[b]("["+b.toUpperCase()+"] "+(new Date).getTime()+":=>",d[0],_.without(d,d[0])):console.log("[LOG] "+(new Date).getTime()+":=>",b,d))};return b}]},{}],38:[function(a,b,c){"use strict";b.exports=["$http","$q","$window","$rootScope","conf","log","Session","Helpers","Upload",function(a,b,c,d,e,f,g,h,i){var j=function(j,k,l){var m=b.defer();k=k||{},k.headers=k.headers||{},k.headers["App-Id"]=k.headers["App-Id"]||e.appId,k.headers.lang=g.getCurrentLang();var n;try{n=d.currentUser.accessToken?h.buildAuthorizationHeader(d.currentUser.accessToken):g.requetGuestUserToken()}catch(o){n=g.requetGuestUserToken()}return n?k.headers.Authorization=k.headers.Authorization||n:k.headers.Authorization=k.headers.Authorization||e.devToken,k.method=k.method||"GET",k.url=k.url||j,(l?i.upload(k):a(k)).then(function(a){m.resolve(a.data.data)},function(a){a.data&&a.data.error&&"User not found with this token"==a.data.error?(d.activeuser?d.logout():d.requestGuestUserToken(!0),c.location.reload()):(f("[ERROR] => API: "+a),m.reject(a))}),m.promise};return j.http=a,j.upload=i,j}]},{}],39:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();b.exports=["$rootScope","LocalStorageSrv",function(a,b){var c=function(){function c(){d(this,c),b.getItem("auth-data")?this.setCurrentUser(JSON.parse(b.getItem("auth_data"))):this.setCurrentUser({}),this.setCurrentLang(b.getItem("activeLang"))}return e(c,[{key:"getCurrentUser",value:function(){return this.currentUser}},{key:"setCurrentUser",value:function(b){this.currentUser=b,a.currentUser=this.currentUser}},{key:"getCurrentLang",value:function(){return b.getItem("activeLang")}},{key:"setCurrentLang",value:function(c){c?(b.setItem("activeLang",c),a.activeLang=c):(b.setItem("activeLang","en"),a.activeLang="en")}},{key:"requetGuestUserToken",value:function(){var b=a.getGuestUserToken;return b}}]),c}();return new c}]},{}],40:[function(a,b,c){"use strict";b.exports=["$scope","API","notifications","$rootScope","$uibModalInstance",function(a,b,c,d,e){a.user={},angular.copy(d.activeuser,a.user),a.user.birthdate=new Date(1e3*a.user.birthdate),a.dismiss=function(){e.dismiss("cancel")},a.validateEmail=function(a){var b=/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;return String(a).search(b)===-1},a.edit=function(f,g,h){if(a.loginErrors="",f.cityId=1e3,f.name&&""!==f.name)if(f.name.length<3)a.loginErrors="Name has to be bigger than 2 characters";else{var i={};f.name&&f.name!=d.activeuser.name&&(i.name=f.name),i.password=f.password,i.cityId=f.cityId;var j=new Date(f.birthdate);i.birthDate=Math.floor(j.getTime()/1e3)||-1,i.gender=f.gender,i.bio=f.bio,(Object.keys(i).length>0||h)&&b.users.editeUserInfo(i,h).then(function(a){a.avatarUrl&&""!=a.avatarUrl&&(d.activeuser.avatarUrl=a.avatarUrl);for(var b in i)"birthDate"===b?d.activeuser.birthdate=i[b]:d.activeuser[b]=i[b];d.storeAuthData(d.activeuser),c.showSuccess({message:"Edited Succesfully!",hideDelay:1500,hide:!0}),e.dismiss("cancel")})["catch"](function(a){c.showError({message:"Failed to Edit profile",hideDelay:1500,hide:!0})})["finally"](function(){})}else a.loginErrors="Name Required"}}]},{}],41:[function(a,b,c){"use strict";b.exports=["$scope","$http","$uibModal","$state","Helpers","request","API",function(a,b,c,d,e,f,g){d.gamificationIsLoaded=!1;var h,i,j=function(){g.Gamification.get().then(function(b){d.gamificationIsLoaded=!0,h=b;var c=h.leaderboard;a.winnersList=c.users,a.startDate=moment(1e3*c.startDate).format("YYYY/MM/DD"),a.endDate=moment(1e3*c.endDate).format("YYYY/MM/DD"),a.prizeImage=c.prizeImgBrief,a.prizeImgDesc=c.prizeImgDesc})["catch"](function(a){console.log(a)})};a.getCurrentWinners=function(){a.top10Window=!1,i?(a.winnersList=i.winners,a.startDate=moment(1e3*i.startDate).format("YYYY/MM/DD"),a.endDate=moment(1e3*i.endDate).format("YYYY/MM/DD"),a.prizeImage=i.prizeImgBrief,a.prizeImgDesc=i.prizeImgDesc):g.Gamification.getCurrentWinners().then(function(b){d.gamificationIsLoaded=!0,i=b,a.winnersList=i.winners,a.startDate=moment(1e3*i.startDate).format("YYYY/MM/DD"),a.endDate=moment(1e3*i.endDate).format("YYYY/MM/DD"),a.prizeImage=i.prizeImgBrief,a.prizeImgDesc=i.prizeImgDesc})["catch"](function(a){console.log(a)})},a.getTop10=function(){if(a.top10Window=!0,h){var b=h.leaderboard;a.winnersList=b.users,a.startDate=moment(1e3*b.startDate).format("YYYY/MM/DD"),a.endDate=moment(1e3*b.endDate).format("YYYY/MM/DD"),a.prizeImage=b.prizeImgBrief,a.prizeImgDesc=b.prizeImgDesc}else j()},a.openInvitaion=function(){c.open({template:"<div class='col-xs-12 text-center'> <img style='width:100%' ng-src='"+a.prizeImgDesc+"'/></div>"})},j()}]},{}],42:[function(a,b,c){"use strict";var d=a("./../search/search.js"),e=["$scope","$state","log","$http","Session","$stateParams","Helpers","notifications","$anchorScroll","API","$rootScope","$uibModal","DoubleClick",function(a,b,c,e,f,g,h,i,j,k,l,m,n){var o=new d("HomeController",a,b,g,e,l,h,k,c),p=function(){n.flushPageTargeting(),l.selectedCity.name||(l.selectedCity={name:"Cairo",id:1e3});var a=(l.getSelectedCity()?l.getSelectedCity().nameEn:"")+" Restaurant Menus - Egypt | elmenus.com",b="elmenus is a Food Discovery Platform that will Inspire you to Discover Food you will Love! Check out Menus, Reviews and Food Photos of the Top Restaurants by Foodies in your City! elmenus is Available on iPhone and Android.",c="منيو مطاعم - "+(l.getSelectedCity()?l.getSelectedCity().nameAr:"")+" - مصر | elmenus.com",b="elmenus is a Food Discovery Platform that will Inspire you to Discover Food you will Love! Check out Menus, Reviews and Food Photos of the Top Restaurants by Foodies in your City! elmenus is Available on iPhone and Android.",d="المنيوز هي منصة لإكتشاف الاكل تتضمن أكثر من 3,000 قائمة مطعم و 300,000 أكلة لتساعدك في قرار ماذا تأكل اليوم";l.seoMetaTags(a,b,c,d);var e=document.getElementById("sidebar");Stickyfill.add(e),l.selectedCity.clearName=l.selectedCity.clearName?l.selectedCity.clearName:l.selectedCity.nameEn.toLowerCase(),n.setPageTargeting("city",l.selectedCity.clearName),console.log("page set to city",l.selectedCity.clearName);var f="en"==l.activeLang?"english":"arabic";n.setPageTargeting("language",f),n.setPageTargeting("page","home"),n.refreshAds("div-gpt-ad-1406067834204-0"),n.refreshAll()};o.registerAction({name:"GET_CITIES_BASED_ON_COUNTRY",action:function(){return l.search.userCities}}),o.registerAction({name:"FETCH_MOODS_FROM_API",action:function(){}}),o.registerAction({name:"CHANGE_SELECTED_AREA",action:function(a){a&&a.id?a&&(g.area=a.id,l.glaobalArea=a):o.areaId=void 0;g.delivery=!0,g.isDeliverySection=!0;var c=g;b.go("app.search",c)}}),o.registerAction({name:"AUTOMATIC_LOCATION_DETECTION",action:function(a){return 0===a&&h.getLocation().then(function(a){var b={lat:a.coords.latitude,"long":a.coords.longitude};alert(JSON.stringify(b)),c("pos",b)})["catch"](function(){console.error("Failed to get location!")}),0===a}}),a.dispatch=function(a,b){return o.dispatch(a,b)},a.Search=o,a.restaurantBaseUrl=l.getBaseUrl("app.restaurant.menu"),a.state=b,p()}];jQuery(document).ready(function(){jQuery(".toggle-nav").click(function(a){jQuery(this).toggleClass("active"),jQuery(".toggle-menu ul").toggleClass("active"),a.preventDefault()})}),b.exports=e},{"./../search/search.js":69}],43:[function(a,b,c){"use strict";a("async");b.exports=["$scope","$stateParams","API","Lookups","$rootScope","$timeout",function(a,b,c,d,e,f){a.cuisinesList={},a.noCuisines=!1,a.all=!1;var g={};a.getCuisines=function(){d.cuisines.get({}).then(function(b){a.splitCuisines(b),LocalStorageSrv.setItem("cuisines",JSON.stringify(b)),e.cuisines=b,f(function(){g=a.cuisinesList,a.noCuisines=0==a.cuisinesList.length},1e3)})["catch"](function(a){console.log(a)})},a.splitCuisines=function(b){for(var c=b.slice(),d=[];c.length;)e.isMobile()?d.push(c.splice(0,4)):d.push(c.splice(0,6));a.noCuisines=0==d.length,a.cuisinesList=d},a.showMore=function(){a.all?angular.element(document.querySelector("#cuisines-list")).addClass("firstCuisinesOnly"):angular.element(document.querySelector("#cuisines-list")).removeClass("firstCuisinesOnly"),a.all=!a.all,a.btnText=a.all?"Show Less <i class='fa fa-angle-up'>":"View More <i class='fa fa-angle-down'>"},a.searchCuisine=function(b){for(var c=_.map(g,function(a){return b?_.filter(a,function(a){if(a.name.search(new RegExp("^"+b,"i"))!=-1)return a}):a}),d=[],e=0;e<c.length;e++)for(var f=c[e],h=0;h<f.length;h++)d.push(f[h]);a.splitCuisines(d)},f(function(){a.getCuisines()},1500)}]},{async:74}],44:[function(a,b,c){"use strict";a("async");b.exports=["$scope","$stateParams","API","$rootScope","$timeout","$filter",function(a,b,c,d,e,f){a.noModes=!1,a.all=!1,a.getMoods=function(){},a.showMore=function(){a.all?angular.element(document.querySelector("#moods-list")).addClass("firstMoodOnly"):angular.element(document.querySelector("#moods-list")).removeClass("firstMoodOnly"),a.all=!a.all,a.btnText=a.all?f("translate")("Show Less <i class='fa fa-angle-up'>"):f("translate")("View More <i class='fa fa-angle-down'>")}}]},{async:74}],45:[function(a,b,c){"use strict";b.exports=["$rootScope","API","pouchDB","$q",function(a,b,c,d){var e={},f=c("areas");c("cities");return e.get=function(e){var g=d.defer();return null==e.cityId&&(e.cityId=1e3),f.allDocs({include_docs:!0,attachments:!0}).then(function(d){if(0==d.rows)b.search.areas(e).then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].cityId=e.cityId,b[c].lang=a.activeLang;f.bulkDocs(b).then(function(a){g.resolve(b)})["catch"](function(a){console.log(a),g.reject(a)})})["catch"](function(a){console.log(a),g.reject(a)});else if(d.rows[0].doc.lang!=a.activeLang||d.rows[0].doc.cityId!=e.cityId)f.destroy().then(function(d){f=c("areas"),b.search.areas(e).then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].cityId=e.cityId,b[c].lang=a.activeLang;f.bulkDocs(b).then(function(a){g.resolve(b)})["catch"](function(a){console.log(a),g.reject(a)})})["catch"](function(a){console.log(a),g.reject(a)})});else{var h=_.pluck(d.rows,"doc");g.resolve(h)}})["catch"](function(c){b.search.areas(e).then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].cityId=e.cityId,b[c].lang=a.activeLang;g.resolve(b)})}),g.promise},e.getFromUrl=function(a){var b=d.defer(),c=a.split("-").slice(1).join("-");return 0==c.length&&b.resolve(null),f.query(function(a){emit(a.clearName)},{key:c}).then(function(a){a.rows.length>0?b.resolve(a.rows[0].id):b.resolve(1e3)}),b.promise},e.refresh=function(){f.destroy().then(function(a){f=c("areas")})},e}]},{}],46:[function(a,b,c){"use strict";b.exports=["$rootScope","API","pouchDB","$q",function(a,b,c,d){var e={},f=c("cities");return e.get=function(e,g){var h=d.defer();return f.allDocs({include_docs:!0,attachments:!0}).then(function(d){if(0==d.rows)b.search.cities().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;f.bulkDocs(b).then(function(a){h.resolve(b)})["catch"](function(a){console.log(a),h.reject(a)})})["catch"](function(a){console.log(a),h.reject(a)});else if(d.rows[0].doc.lang!=a.activeLang)f.destroy().then(function(d){f=c("cities"),b.search.cities().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;f.bulkDocs(b).then(function(a){h.resolve(b)})["catch"](function(a){console.log(a),h.reject(a)})})["catch"](function(a){console.log(a),h.reject(a)})});else{var e=_.pluck(d.rows,"doc");h.resolve(e)}})["catch"](function(c){b.search.cities().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;h.resolve(b)})}),h.promise},e.getFromUrl=function(a){var b=d.defer(),c=a.split("-").slice(1).join("-");return f.query(function(a){emit(a.clearName)},{key:c}).then(function(a){a.rows.length>0?b.resolve(a.rows[0].id):b.resolve(1e3)}),b.promise},e.refresh=function(){f.destroy().then(function(a){f=c("cities")})},e}]},{}],47:[function(a,b,c){"use strict";b.exports=["$rootScope","API","pouchDB","$q",function(a,b,c,d){var e={},f=c("cuisines");return e.get=function(e,g){var h=d.defer();return f.allDocs({include_docs:!0,attachments:!0}).then(function(d){if(0==d.rows)b.search.cusines().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;f.bulkDocs(b).then(function(a){h.resolve(b)})["catch"](function(a){console.log(a),h.reject(a)})})["catch"](function(a){console.log(a),h.reject(a)});else if(d.rows[0].doc.lang!=a.activeLang)f.destroy().then(function(d){f=c("cuisines"),b.search.cusines().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;f.bulkDocs(b).then(function(a){h.resolve(b)})["catch"](function(a){console.log(a),h.reject(a)})})["catch"](function(a){console.log(a),h.reject(a)})});else{var e=_.pluck(d.rows,"doc");h.resolve(e)}})["catch"](function(c){b.search.cusines().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;h.resolve(b)})}),h.promise},e.getFromUrl=function(a){var b=d.defer(),c=a.split("-").slice(1).join("-").split(",");return 0==c.length&&b.resolve(null),f.allDocs({include_docs:!0,attachments:!0}).then(function(a){var d=_.filter(a.rows,function(a){return c.indexOf(a.doc.clearName)>-1});d=_.pluck(d,"id").join(","),b.resolve(d)})["catch"](function(a){console.log(a),b.reject(a)}),b.promise},e.refresh=function(){f.destroy().then(function(a){f=c("cuisines")})},e.translate=function(a){var b=d.defer();if(!a)return b.resolve(""),b.promise;var a=a.split(",");return e.get().then(function(c){var d=_.filter(c,function(b){return a.indexOf(b._id)>-1});d=_.map(d,function(a){return a.clearName}).join(","),b.resolve(d)})["catch"](function(a){console.log(a),b.reject(a)}),b.promise},e}]},{}],48:[function(a,b,c){"use strict";b.exports=["$rootScope","API","pouchDB","$q",function(a,b,c,d){var e={},f=c("features");return e.get=function(e,g){var h=d.defer();return f.allDocs({include_docs:!0,attachments:!0}).then(function(d){if(0==d.rows)b.search.features().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),
b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;f.bulkDocs(b).then(function(a){h.resolve(b)})["catch"](function(a){console.log(a),h.reject(a)})})["catch"](function(a){console.log(a),h.reject(a)});else if(d.rows[0].doc.lang!=a.activeLang)f.destroy().then(function(d){f=c("features"),b.search.features().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;f.bulkDocs(b).then(function(a){h.resolve(b)})["catch"](function(a){console.log(a),h.reject(a)})})["catch"](function(a){console.log(a),h.reject(a)})});else{var e=_.pluck(d.rows,"doc");h.resolve(e)}})["catch"](function(c){b.search.features().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;h.resolve(b)})}),h.promise},e.getFromUrl=function(a){var b=d.defer(),c=a.split("-").slice(1).join("-").split(",");return 0==c.length&&b.resolve(null),f.allDocs({include_docs:!0,attachments:!0}).then(function(a){var d=_.filter(a.rows,function(a){return c.indexOf(a.doc.clearName)>-1});d=_.pluck(d,"id").join(","),b.resolve(d)})["catch"](function(a){console.log(a),b.reject(a)}),b.promise},e.refresh=function(){f.destroy().then(function(a){f=c("features")})},e.translate=function(a){var b=d.defer();if(!a)return b.resolve(""),b.promise;var a=a.split(",");return e.get().then(function(c){var d=_.filter(c,function(b){return a.indexOf(b._id)>-1});d=_.map(d,function(a){return a.clearName}).join(","),b.resolve(d)})["catch"](function(a){console.log(a),b.reject(a)}),b.promise},e}]},{}],49:[function(a,b,c){"use strict";b.exports=["CitiesLookup","AreasLookup","MoodsLookup","CuisinesLookup","FeaturesLookup",function(a,b,c,d,e){var f={};return f.cities=a,f.areas=b,f.moods=c,f.cuisines=d,f.features=e,f.refresh=function(){a.refresh(),b.refresh(),c.refresh(),d.refresh(),e.refresh()},f}]},{}],50:[function(a,b,c){"use strict";b.exports=["$rootScope","API","pouchDB","$q",function(a,b,c,d){var e={},f=c("moods");return e.get=function(c,e){var g=d.defer();return f.allDocs({include_docs:!0,attachments:!0}).then(function(c){b.search.moods().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;f.bulkDocs(b).then(function(a){g.resolve(b)})["catch"](function(a){console.log(a),g.reject(a)})})["catch"](function(a){console.log(a),g.reject(a)})})["catch"](function(c){b.search.moods().then(function(b){for(var c=b.length-1;c>=0;c--)b[c]._id=b[c].id.toString(),b[c].clearName=a.clearURL(b[c].name),b[c].lang=a.activeLang;g.resolve(b)})}),g.promise},e.getFromUrl=function(a){var b=d.defer(),c=a.split("-").slice(1).join("-").split(",");return 0==c.length&&b.resolve(null),f.allDocs({include_docs:!0,attachments:!0}).then(function(a){var d=_.filter(a.rows,function(a){return c.indexOf(a.doc.clearName)>-1});d=_.pluck(d,"id").join(","),b.resolve(d)})["catch"](function(a){console.log(a),b.reject(a)}),b.promise},e.refresh=function(){f.destroy().then(function(a){f=c("moods")})},e.translate=function(a){var b=d.defer();if(!a)return b.resolve(""),b.promise;var a=a.split(",");return e.get().then(function(c){var d=_.filter(c,function(b){return a.indexOf(b._id)>-1});d=_.map(d,function(a){return a.clearName}).join(","),b.resolve(d)})["catch"](function(a){console.log(a),b.reject(a)}),b.promise},e}]},{}],51:[function(a,b,c){"use strict";b.exports=["$scope","$state","log","$http","Session","$stateParams","Helpers","notifications","$anchorScroll","API","$rootScope","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){a.sortedBy="All"}a.state=b,a.currentUser=k.currentUser,i(),a.newsFeed=[],a.finishedLoadingResults=!1,a.getNewsFeed=function(b){if(!(a.finishedLoadingResults||10==a.newsFeed.length&&b)){a.finishedLoadingResults=!0;var c={city:k.search&&k.search.selectedUserCity?k.search.selectedUserCity:1e3,start:a.newsFeed.length,limit:10};a.showLoadMore=0===c.start,j.NewsFeed.foodiesFeed(c).then(function(b){a.moreResult=b.length,a.newsFeed=a.newsFeed.concat(b)})["catch"](function(a){console.log(a)})["finally"](function(){a.finishedLoadingResults=!1})}},m()}]},{}],52:[function(a,b,c){"use strict";b.exports=["$scope","$rootScope","$uibModalInstance","offer",function(a,b,c,d){a.offer=d,a.dismiss=function(){c.dismiss("cancel")}}]},{}],53:[function(a,b,c){"use strict";b.exports=["$scope","$state","$stateParams","API","$rootScope","$timeout","$location","$anchorScroll","$uibModalInstance",function(a,b,c,d,e,f,g,h,i){function j(){a.photoLoaded=!1,"photo"===b.current.name&&openPhoto({id:c.id,comments:[]}),a.userComment="",a.isOpen=!1;var d=document.getElementsByClassName("photoAreaFocus");f(function(){angular.element(d[0]).autofocus=!0,angular.element(d[0]).focus()},1e3)}a.onImageLoad=function(){a.photoLoaded=!0},a.dismissModal=function(){e.openedPhoto=!1,i.dismiss("cancel")},e.reportPhotoInner=function(b,c){b.repTypeId=c,e.reportPhoto(b),a.isOpen=!1},a.loadMoreComments=function(){if(!(a.photo.nComments<=a.photo.comments.length)){a.photoCommentsLoading=!0;var b=a.photo.comments.length,c=5;d.photos.get(a.photo.id,b,c).then(function(b){a.photo.comments=b.comments.concat(a.photo.comments)})["catch"](function(a){console.log(a)})["finally"](function(){a.photoCommentsLoading=!1})}},a.addComment=function(b){if(e.activeuser){var c=a.userComment,g=a;d.photos.addComment(b.id,c).then(function(b){b.author={avatarUrl:e.activeuser.avatarUrl,name:e.activeuser.name},b.createdAt||(b.createdAt=(new Date).getTime()/1e3),a.photo.nComments+=1,a.photo.comments.push(b),g.userComment="",f(function(){h("bottom")},1)})}else e.openLoginModal()},a.escapeModal=function(){a.userComment="",a.dismissModal()},a.arrowKeysHandeller=function(a,b,c,d,f){39==a&&e.getPhoto(f[b],d,f),37==a&&e.getPhoto(f[c],d,f)},j()}]},{}],54:[function(a,b,c){"use strict";var d=a("async"),e=["$scope","API","$rootScope",function(a,b,c){a.modalTitle="Tag Photos";var d=function(){a.selectPhotoForTagging(a.selectedPhotoModel)};a.selectPhotoForTagging=function(d){a.items||(a.menuLoading=!0,b.restaurants.menu(c.restaurant.id).then(function(b){a.items=[],_(b.menus).each(function(b){_(b.categories).each(function(b){a.items=a.items.concat(b.items)})})},function(a){console.log(a)})["finally"](function(){a.menuLoading=!1})),a.selectedPhotoModel=d},a.tagPhoto=function(a,b){a.taggedItem&&a.taggedItem===b?a.taggedItem=null:a.taggedItem=b},d()}],f=["$scope","$rootScope","$uibModal","API","notifications","Session",function(a,b,c,f,g,h){function i(a){a.getFiles(a.FILE_TYPES.VALID).forEach(function(a){a.deleteFile()})}a.$on("$dropletReady",function(){a["interface"].allowedExtensions(["png","jpg"]),a.FILE_TYPES={VALID:1,INVALID:2,DELETED:4,UPLOADED:8},a.actionName="Upload Photos",a.$parent.uploadReview&&(a.$parent["interface"]=a["interface"],a.actionName="Submit Review")}),a.$on("$dropletFileAdded",function(b,c){a.addReviewModal=!!a.$parent.uploadReview,a.tagPhoto(c)}),a.tagPhoto=function(d){a.selectedPhotoModel=d,a.activeLang=b.activeLang,a.tagPhotoModal=c.open({templateUrl:"photos/views/photo.tag.modal.html",controller:e,size:"md",scope:a})},a.uploadPhotos=function(){if(a.tagPhotoModal&&a.tagPhotoModal.close(),a.$parent.uploadReview)return a.$parent["interface"]=a["interface"],a.$parent.uploadReview();var c=a["interface"].getFiles(a["interface"].FILE_TYPES.VALID);d.eachSeries(c,function(a,c){a.isUploading=!0;var d={id:b.restaurant.id,branchId:b.restaurant.currentBranch.id,dishId:a.taggedItem?a.taggedItem.id:"",photos:a.file};f.restaurants.uploadPhoto(d).then(function(c){c.nShares=0,c.createdAt=(new Date).getTime()/1e3,c.nComments=0,c.yumsCount=0,c.author=h.getCurrentUser(),c.item=a.taggedItem||null,a.uploadSuccess=!0,b.photos.unshift(c)})["catch"](function(a){c(a&&a.data?a.data:a),console.log("error",a)})["finally"](function(b){a.isUploading=!1,c(b)})},function(b){var c=_.chain(b).filter(function(a){return a.hasOwnProperty("error")}).map(function(a){return a.error.error}).value();c.length?g.showError({message:c[0],hideDelay:1500,hide:!0}):g.showSuccess({message:"Uploaded Photos Successfully!",hideDelay:1500,hide:!0}),a.photosUploading=!1,i(a["interface"]),a.afterAddNewImage()})}}];b.exports=f},{async:74}],55:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"E",templateUrl:"photos/views/photo_upload_box.html",scope:{restaurantId:"@restaurantId",afterAddNewImage:"&"},controller:"PhotoUploadController"}}},{}],56:[function(a,b,c){"use strict";b.exports=["$q","$rootScope",function(a,b){function c(b){this.imageLocations=b,this.imageCount=this.imageLocations.length,this.loadCount=0,this.errorCount=0,this.states={PENDING:1,LOADING:2,RESOLVED:3,REJECTED:4},this.state=this.states.PENDING,this.deferred=a.defer(),this.promise=this.deferred.promise}return c.preloadImages=function(a){var b=new c(a);return b.load()},c.prototype={constructor:c,isInitiated:function(){return this.state!==this.states.PENDING},isRejected:function(){return this.state===this.states.REJECTED},isResolved:function(){return this.state===this.states.RESOLVED},load:function(){if(this.isInitiated())return this.promise;this.state=this.states.LOADING;for(var a=0;a<this.imageCount;a++)this.loadImageLocation(this.imageLocations[a]);return this.promise},handleImageError:function(a){this.errorCount++,this.isRejected()||(this.state=this.states.REJECTED,this.deferred.reject(a))},handleImageLoad:function(a){this.loadCount++,this.isRejected()||(this.deferred.notify({percent:Math.ceil(this.loadCount/this.imageCount*100),imageLocation:a}),this.loadCount===this.imageCount&&(this.state=this.states.RESOLVED,this.deferred.resolve(this.imageLocations)))},loadImageLocation:function(a){var c=this,d=$(new Image).load(function(a){b.$apply(function(){c.handleImageLoad(a.target.src),c=d=a=null})}).error(function(a){b.$apply(function(){c.handleImageError(a.target.src),c=d=a=null})}).prop("src",a)}},c}]},{}],57:[function(a,b,c){"use strict";b.exports=["$scope","$state","log","$http","Session","$stateParams","Helpers","notifications","$anchorScroll","API","$rootScope","$uibModal","$location",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){a.limit=10,a.basicUserInfo(),"followers"==a.popup&&a.openFollowModal("Followers")}function o(){var a=(f.userName?k.toTitleCase(f.userName):"")+"'s foodie profile on elmenus.com",b="بروفايل "+(f.userName?k.toTitleCase(f.userName):"")+" في elmenus.com",c=(f.userBio?f.userBio:"")+" Follow "+$(f.userName?k.toTitleCase(f.userName):"")+"'s profile on elmenus.com for their latest reviews, photos, dish ratings.",d=(f.userBio?f.userBio:"")+" Follow "+$(f.userName?k.toTitleCase(f.userName):"")+"'s profile on elmenus.com for their latest reviews, photos, dish ratings.";k.seoMetaTags(a,c,b,d)}a.absUrl=m.absUrl(),i(),a.activeTab=f.tab?f.tab:"timeline",a.popup=f.popup&&!f.id?f.popup:"unknown",a.loadingMoreTimeline=!1,k.$on("$stateChangeSuccess",function(){n()}),a.itemDishName="",a.basicUserInfo=function(){var b=f.id?f.id:k.currentUser.id;j.Profile.userInfo(b).then(function(b){a.userInfo=b,a.me=!1,k.currentUser&&(a.me=a.userInfo.id===k.currentUser.id),a.getTimeLine(),a.getYums(),a.getFavorites(),a.getFollowers(),a.getFollowings(),a.me&&a.getUntaggedPhotos("")})["catch"](function(a){console.log(a)})},a.getMoreTimeLine=function(b){a.loadingMoreTimeline=!0;var c=void 0,d=f.id?f.id:k.currentUser.id,e={id:d,filter:c?c.toString():void 0,start:b};j.Profile.timeLine(e).then(function(b){b.forEach(function(b){a.userFoodiesFeed.push(b)}),a.loadingMoreTimeline=!1})["catch"](function(b){console.log(b),a.loadingMoreTimeline=!1})},a.getTimeLine=function(b,c){2===c?a.sortedBy="Reviews":1===c?a.sortedBy="Photos":a.sortedBy="All",b=b?b:void 0;var d=f.id?f.id:k.currentUser.id,e={id:d,filter:b?b.toString():void 0,start:0};j.Profile.timeLine(e).then(function(b){k.userPhotos=[],a.userFoodiesFeed=_.map(b,function(a){return a.photo&&k.userPhotos.push(a.photo),a.isProfile=!0,a})})["catch"](function(a){console.log(a)})},a.getMoreYums=function(b){a.loadingMoreYums=!0;var c=f.id?f.id:k.currentUser.id,d={id:c,start:b};j.Profile.yums(d).then(function(b){b.forEach(function(b){b.type="photo",b.storyType="yumPhoto",b.photo=b,b.isProfile=!0,b.actors=[a.userInfo],a.userYums.push(b)}),a.loadingMoreYums=!1})["catch"](function(b){console.log(b),a.loadingMoreYums=!1})},a.getYums=function(){var b=f.id?f.id:k.currentUser.id,c={id:b,start:0};j.Profile.yums(c).then(function(b){var c=_.map(b,function(b){return b.type="photo",b.storyType="yumPhoto",b.photo=b,b.isProfile=!0,b.actors=[a.userInfo],b});a.userYums=c})["catch"](function(a){console.log(a)})},a.getMoreFavorites=function(b){a.loadingMoreFavorites=!0;var c=f.id?f.id:k.currentUser.id,d={id:c,start:b};j.Profile.favorites(d).then(function(b){b.forEach(function(b){a.userfavorites.push(b)}),a.loadingMoreFavorites=!1})["catch"](function(b){console.log(b),a.loadingMoreFavorites=!1})},a.getFavorites=function(){var b=f.id?f.id:k.currentUser.id,c={id:b,start:0,limit:void 0};j.Profile.favorites(c).then(function(b){a.userfavorites=b})["catch"](function(a){console.log(a)})},a.userFollow=function(){a.userInfo.id!=k.currentUser.id&&k.followUser(a.userInfo)},a.toggleFavorite=function(b){j.restaurants.toggleFavorite(b.id).then(function(c){a.userfavorites=a.userfavorites.filter(function(a){var c=!0;return a.id==b.id&&(c=!1),c}),k.userFavoritesCount=a.userfavorites.length,k.getUserFavorites()})["catch"](function(a){console.log(a)})},a.getUntaggedPhotos=function(b){a.finishedLoadingResults=!0,j.Profile.getUntaggedPhotos({start:0,limit:1e3}).then(function(c){c.length<=0||(a.untaggedPhotos=c,a.selectedPhoto=a.untaggedPhotos[0],a.onAutoCompeleteDish(a.selectedPhoto.restaurant.id,b))})["catch"](function(a){console.log(a)})["finally"](function(){a.finishedLoadingResults=!1})},a.onSelectedPhoto=function(b){a.selectedPhoto=b,a.dishesItems={},a.onChangeItemName(a.itemDishName)},a.onChangeItemName=function(b){a.itemDishName=b,a.selectedPhoto&&a.onAutoCompeleteDish(a.selectedPhoto.restaurant.id,b)},a.onAutoCompeleteDish=function(b,c){j.restaurants.dishesAutoCompleteUrl(b,c,0,10).then(function(b){a.dishesItems=b})["catch"](function(a){console.log(a)})},a.onTagPhoto=function(b,c){a.selectedPhoto&&j.photos.taggedphoto(a.selectedPhoto.id,a.selectedPhoto.restaurant.id,b.id,c).then(function(d){a.getUntaggedPhotos(c),h.showSuccess({message:"photo successfully tagged at "+a.selectedPhoto.restaurant.name+" with "+b.name,hideDelay:1500,hide:!0})})["catch"](function(a){console.log(a),h.showError({message:"Failed to tag photo",hideDelay:1500,hide:!0})})},a.deletePhoto=function(b){confirm("Are You Sure you want to delete this photo")&&j.photos.deletePhoto(b).then(function(b){a.userFoodiesFeed=a.userFoodiesFeed.filter(function(a){var c=!0;return a.photo&&a.photo.id==b.id&&(c=!1),c}),h.showSuccess({message:"Deleted Succesfully!",hideDelay:1500,hide:!0})})["catch"](function(a){h.showError({message:"Failed to delete",hideDelay:1500,hide:!0})})},a.deletereview=function(b){confirm("Are You Sure you want to delete this review")&&j.reviews.deleteReview(b).then(function(b){a.userFoodiesFeed=a.userFoodiesFeed.filter(function(a){var c=!0;return a.review&&a.review.id==b[0].id&&(c=!1),c}),h.showSuccess({message:"Review Deleted Succesfully!",hideDelay:1500,hide:!0})})["catch"](function(a){console.log(a),h.showError({message:"Review  Failed to delete",hideDelay:1500,hide:!0})})},a.getFollowers=function(){var b=f.id?f.id:k.currentUser.id,c={id:b};j.Profile.followers(c).then(function(b){a.followers=b.followers})["catch"](function(a){console.log(a)})},a.getFollowings=function(){var b=f.id?f.id:k.currentUser.id,c={id:b};j.Profile.followings(c).then(function(b){a.followings=b.followings})["catch"](function(a){console.log(a)})},a.openFollowModal=function(b){a.followModelType=b,l.open({templateUrl:"profile/views/profile.follow.modal.html",scope:a,controller:function(a,b){a.dismissModal=function(){b.dismiss("cancel")}}})},n(),o()}],jQuery(document).ready(function(){jQuery(".toggle-nav").click(function(a){jQuery(this).toggleClass("active"),jQuery(".toggle-menu ul").toggleClass("active"),a.preventDefault()})})},{}],58:[function(a,b,c){"use strict";b.exports=["$scope","$stateParams","API",function(a,b,c){a.miniDiscoveryLoading=!0,c.restaurants.discovery(b.id).then(function(b){a.collections=b})["catch"](function(a){console.log(a)})["finally"](function(){a.miniDiscoveryLoading=!1})}]},{}],59:[function(a,b,c){"use strict";b.exports=["$scope",function(a){}]},{}],60:[function(a,b,c){"use strict";b.exports=["$scope","$window","$state","log","$http","Session","$stateParams","Helpers","notifications","$anchorScroll","API","$rootScope","$uibModal","$timeout","$sce","DoubleClick","LocalStorageSrv",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(b){if("undefined"==typeof b||!b.disableTargting){p.flushPageTargeting(),p.setPageTargeting("city",l.selectedCity.clearName);var c="en"==l.activeLang?"english":"arabic";p.setPageTargeting("language",c)}a.getRestaurant(),a.getReportTypes(),a.requsted=!1,a.loadMorePhotos();var d=location.pathname.slice(location.pathname.indexOf("photo")+"photo-".length,location.pathname.length);location.pathname.indexOf("photo")!=-1&&d!=l.photoId&&(l.photoId=location.pathname.slice(location.pathname.indexOf("photo")+"photo-".length,location.pathname.length),l.openPhoto({id:l.photoId},{id:g.id,name:g.restaurantName}))}function s(a,b){var a=a||g.restaurantName,b=b||g.branch,d=b&&b.area.id;if(a){if("branches"==c.current.name.split(".")[2])var e=l.toTitleCase(a)+"'s branches on elmenus",f="فروع مطعم "+l.toTitleCase(a)+" علي المينيوز",h="",i="";else var e=l.toTitleCase(a)+", "+(l.selectedCity&&l.selectedCity?l.selectedCity.name:"")+" , Egypt | Restaurant Menu",f="منيو "+l.toTitleCase(a)+", "+(l.getSelectedCity()&&l.getSelectedCity()?l.getSelectedCity.nameAr:"")+", مصر |منيو المطعم| المنيوز |",h="Check out "+l.toTitleCase(a)+" original scanned menu on elmenus.com.",i=l.toTitleCase(a)+": "+(l.getSelectedCity()&&l.getSelectedCity()?l.getSelectedCity.nameAr:"")+", مصر, منيوالمطعم. نمر التليفون...";b&&(e=l.toTitleCase(a)+", "+b.area.name+", "+(l.selectedCity&&l.selectedCity?l.selectedCity.name:"")+" , Egypt | Restaurant Menu | elmenus.com  | "+l.toTitleCase(b.address),h=l.toTitleCase(a)+" : "+l.toTitleCase(b.address)+", "+b.area.name+", "+(l.selectedCity&&l.selectedCity?l.selectedCity.name:"")+", Egypt, Restaurant Menu. Phone Numbers: …"),d&&l.seoMetaTags(e,h,f,i)}}function t(a){return o.trustAsResourceUrl(a+".svg")}function u(a){return a=a.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[a],a.length>1&&(a=a.slice(1),a[5]=+a[0]<12?"AM":"PM",a[0]=+a[0]%12||12),a.join("")}a.state=c,a.basicInfoLoading=!0,a.branchesLoading=!0,a.restaurantId=g.id,j(),a.requsted=!1,a.trendings=[],a.resultEnded=!1,a.selectedTab=c.current.name.split(".")[2]||"menu",s(),a.featureIcons={Delivery:"icon-dilvery_dark",WiFi:"icon-wifi",Outdoor:"icon-outdoors_dark","No Smoking Area":"",Shisha:"",Playground:"",TV:"",Alcohol:"",Catering:"","24 hrs":"","Nile/Sea View":"","Pet Friendly":""},a.getNearestBranch=function(){a.dropdownBranches.splice(0,1),h.getLocation().then(function(b){return d(b),b?void a.getRestaurant(null,b.coords.latitude,b.coords.longitude):i.showError("Error getting your location!")})["catch"](function(a){return i.showError("Error getting your location!")})},a.getRestaurant=function(b,d,e){return a.branchFeatures=[],b&&a.restaurant&&a.restaurant.currentBranch.id===b?(angular.forEach(a.restaurant.currentBranch.features,function(a){a.svgUrl=t(a.photoUrl)}),void n(function(){a.branchFeatures=a.restaurant.currentBranch.features},0)):(a.basicInfoLoading=!0,void 0!==g.id?k.restaurants.get(g.id,g.branchId,d,e).then(function(b){a.restaurant=b,s(b.name,b.currentBranch),a.branchFeatures=a.restaurant.currentBranch.features,l.restaurant=b,a.restaurant.id=g.id,l.restaurant=a.restaurant;var d=b.currentBranch.phoneNumbers;return b.shortNumber&&d.unshift(b.shortNumber),a.restaurant.phoneNumbers=d.filter(function(a,b){return d.indexOf(a)==b}),a.joinedCuisines=_(b.cuisines).pluck("name").join(", "),angular.forEach(a.branchFeatures,function(a){a.svgUrl=t(a.photoUrl)}),p.setPageTargeting("cuisines",_.pluck(b.cuisines,"name")),p.setPageTargeting("areas",b.currentBranch.area.name),p.setPageTargeting("page","restaurant"),p.setPageTargeting("keyword",b.name.toString().replace(/'/g,"")),p.refreshAll(),w(),a.map={center:{latitude:b.currentBranch.lat,longitude:b.currentBranch.lon},zoom:15},l.requestMenuCount=b.menusWantedCount,a.checkUserSecondVisit(),y(c),Promise.resolve({success:!0,message:"$scope.restaurant  is set"})})["catch"](function(b){a.restaurant="Error",console.log(b)})["finally"](function(){a.basicInfoLoading=!1}):new Promise(function(){return Promise.resolve({success:!1,message:"$stateParams.id == undefined"})}))},a.getReportTypes=function(){q.getItem("restaurantReportsTypes")?a.reportsTypes=JSON.parse(q.getItem("restaurantReportsTypes")):k.restaurants.reportTypes("restaurants").then(function(b){a.reportsTypes=b,q.setItem("restaurantReportsTypes",JSON.stringify(b))})["catch"](function(a){console.log(a)})["finally"](function(){})},a.reportMenu=function(a){l.activeuser?k.restaurants.reportRestaurant({id:l.restaurant.id||g.id,reportTypeId:a}).then(function(a){i.showSuccess({message:"Restaurant Reported Successfully!",hideDelay:1500,hide:!0})})["catch"](function(a){i.showError({message:a,hideDelay:1500,hide:!0})})["finally"](function(){}):l.openLoginModal()},a.handleBranchDropdownSelect=function(b){var d=b.id;if(0===d)return a.getNearestBranch();var e=l.toTitleCase(g.restaurantName)+", "+b.area.name+", "+(JSON.parse(q.getItem("selected_city")).nameEn?JSON.parse(q.getItem("selected_city")).nameEn:"Cairo")+" , Egypt | Restaurant Menu | elmenus.com | "+b.address,f=l.toTitleCase(g.restaurantName)+" : "+b.address+", "+b.area.name+", "+(l.selectedCity?l.selectedCity.name:"")+", Egypt, Restaurant Menu. Phone Numbers: …",h="منيو "+l.toTitleCase(g.restaurantName)+", "+b.area.name+", "+(JSON.parse(q.getItem("selected_city")).nameAr?JSON.parse(q.getItem("selected_city")).nameAr:"القاهرة")+", مصر | منيو المطعم | المنيوز | "+b.address,i=l.toTitleCase(g.restaurantName)+" : "+b.address+", "+b.area.name+", "+(l.selectedCity?l.selectedCity.name:"")+", مصر, منيوالمطعم. نمر التليفون...";return l.seoMetaTags(e,f,h,i),c.go("app.restaurantbranches",{id:g.id,restaurantName:g.restaurantName,branchId:b.id,branchName:l.clearURL(b.area.name)},{reload:!1,notify:!1}),a.getRestaurant(d)},void 0!==g.id&&k.restaurants.branches(g.id).then(function(b){a.dropdownBranches=b.slice(),a.branches=b,v(a.branches)})["catch"](function(a){console.log(a)})["finally"](function(){a.branchesLoading=!1});var v=function(a){for(var b=new Date,c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],d=c[b.getDay()],e=0;e<a.length;e++){var f=a[e].workingHours[d];a[e].openingHours={from:u(f.from),to:u(f.to)}}};a.toggleLike=function(a){l.activeuser?(a.isLiked=!a.isLiked,a.dislikesCount=a.isDisliked?a.dislikesCount-1:a.dislikesCount,a.isDisliked=a.isLiked&&a.isDisliked?!a.isDisliked:a.isDisliked,a.likesCount=a.isLiked?a.likesCount+1:a.likesCount-1,k.restaurants.toggleLike(a.id).then(function(a){})["catch"](function(a){console.log(a)})):l.openLoginModal()},a.toggleDislike=function(a){l.activeuser?(a.isDisliked=!a.isDisliked,a.likesCount=a.isLiked?a.likesCount-1:a.likesCount,a.isLiked=a.isLiked&&a.isDisliked?!a.isLiked:a.isLiked,a.dislikesCount=a.isDisliked?a.dislikesCount+1:a.dislikesCount-1,k.restaurants.toggleDislike(a.id).then(function(a){})["catch"](function(a){console.log(a)})):l.openLoginModal()},a.toggleHelpful=function(a){l.activeuser?(a.isHelpful=!a.isHelpful,a.helpfulCount=a.isHelpful?a.helpfulCount+1:a.helpfulCount-1,k.reviews.toggleHelpful(a.id).then(function(b){a.isHelpful=b.isHelpful,a.helpfulCount=b.helpfulCount})["catch"](function(b){a.isHelpful=!a.isHelpful,console.log(b)})):l.openLoginModal()},a.toggleFavorite=function(){l.activeuser?(a.restaurant.isFavorited=!a.restaurant.isFavorited,k.restaurants.toggleFavorite(g.id).then(function(b){a.restaurant.isFavorited=b.isFavorited,l.storeResData(a.restaurant,!0)})["catch"](function(){a.restaurant.isFavorited=!a.restaurant.isFavorited})["finally"](function(){})):l.openLoginModal()},a.logCall=function(c){var d=f.getCurrentUser();k.users.logCall(d?d.id:null,a.restaurant.id,c,a.restaurant.currentBranch.id),b.location.href="tel:"+c},a.openMap=function(){a.render=!0,h.getLocation().then(function(b){var c=f.getCurrentUser();k.users.logMapView(c?c.id:null,a.restaurant.id,a.restaurant.currentBranch.id,b.latitude,b.longitude)}),a.map={center:{latitude:a.restaurant.currentBranch.lat,longitude:a.restaurant.currentBranch.lon},zoom:16,icon:{url:"/assets/elmenus-map-pin.png",scaledSize:new google.maps.Size(34,44)}},m.open({templateUrl:"restaurants/views/restaurant.map.modal.html",controller:["$scope","$uibModalInstance",function(a,b){a.dismissModal=function(){b.dismiss("cancel")}}],size:"lg",scope:a})},l.$on("onChangeCity",function(b,c){a.getNew(),a.getTrending()}),a.getNew=function(){k.restaurants["new"]({start:0,limit:3,sort:"latest",cityId:l.search.selectedUserCity}).then(function(b){a.newRestaurantsList=b.results,n(function(){angular.element(document.querySelector("#cuisines-list")).addClass("show")},1e3)})["catch"](function(a){console.log(a)})},a.getTrending=function(){k.restaurants.trending({start:0,limit:3,sort:"popular",cityId:l.search.selectedUserCity}).then(function(b){a.trendings=b.results,_.forEach(a.trendings,function(a){k.restaurants.photos(a.id,0,4).then(function(b){a.photos=b.photos})["catch"](function(a){console.log(a)})})})["catch"](function(a){console.log(a)})},a.getUsersSuggestedFollowings=function(){k.users.suggestedFollowings().then(function(b){a.usersSuggestedFollowingsList=b})["catch"](function(a){console.log(a)})},a.getFoodiesFeed=function(){var b={city:l.search.selectedUserCity,limit:4,start:0};k.restaurants.foodiesFeed(b).then(function(b){a.foodiesFeed=b})["catch"](function(a){console.log(a)})},a.openFavoriteModal=function(){m.open({templateUrl:"restaurants/views/restaurant.favorite.modal.html",scope:a,size:"sm",controller:["$scope","$rootScope","$uibModalInstance",function(a,b,c){a.toggleFavoriteModal=function(){a.toggleFavorite(),a.dismissModal()},a.dismissModal=function(){c.dismiss("cancel")},a.dontAskAgainModal=function(){b.activeuser&&(b.activeuser.dontAskFavorite=!0,b.storeAuthData(b.activeuser)),a.dismissModal()}}]})},a.checkUserSecondVisit=function(){if(!(a.restaurant.isFavorited||l.activeuser&&l.activeuser.dontAskFavorite)){var b=l.loadResData(),c=_.find(b,function(b){return b.id==a.restaurant.id});c&&c.visitCount>1?a.openFavoriteModal():l.storeResData(a.restaurant)}};var w=function(){var b=new Date,c=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],d=c[b.getDay()],e=a.restaurant.currentBranch.workingHours[d];a.openingHours={from:u(e.from),to:u(e.to)}};a.loadMorePhotos=function(){1!=a.resultEnded&&void 0!==a.restaurantId&&(a.photosLoading=!0,k.restaurants.photos(a.restaurantId,0,10,"mostLiked").then(function(b){b.photos?!a.recentPhotos&&b.photos&&b.photos.length&&(a.recentPhotos=b.photos.slice(1,10)):a.resultEnded=!0})["catch"](function(b){console.log(b),a.resultEnded=!0})["finally"](function(){a.photosLoading=!1}))},"appcity.home"===c.current.name||"app.home"===c.current.name||"ar.home"===c.current.name||"arcity.home"===c.current.name?(n(function(){a.getNew()},2e3),n(function(){a.getTrending()},3e3),n(function(){a.getUsersSuggestedFollowings()},4e3),r({disableTargting:!0})):r(),a.to_trusted=function(a){return o.trustAsHtml(a)},a.trustSrc=function(a){return o.trustAsResourceUrl(a)};var x={toggleLike:function(a){$(a).hasClass("active")?($(a).removeClass("active"),$(a).find("small").text(parseInt($(a).find("small").text())-1)):($(a).addClass("active"),$(a).next().removeClass("active"),$(a).find("small").text(parseInt($(a).find("small").text())+1))},toggleDislike:function(a){$(a).hasClass("active")?($(a).removeClass("active"),$(a).find("small").text(parseInt($(a).find("small").text())-1)):($(a).addClass("active"),$(a).prev().removeClass("active"),$(a).find(".dislike-count").text(parseInt($(a).find("small").text())+1))}},y=function(a){var b=a.current.name.replace("app","ar"),c=a.params;a.current.name.indexOf("restaurant")!==-1&&(c.restaurantName=l.clearURL(l.restaurant.nameAr)),a.current.name.indexOf("branches")!==-1&&(c.branchName=l.clearURL(l.restaurant.currentBranch.area.name_ar)),l.arabic_url=a.href(b,c,{absolute:!0});var d=a.current.name.replace("ar","app");a.current.name.indexOf("restaurant")!==-1&&(c.restaurantName=l.clearURL(l.restaurant.nameEn)),a.current.name.indexOf("branches")!==-1&&(c.branchName=l.clearURL(l.restaurant.currentBranch.area.name_en)),l.english_url=a.href(d,c,{absolute:!0})};$(document).on("click",".menu-like-button",function(){var b=$(this).data("dish_id");a.toggleLike({id:b}),x.toggleLike(this)}),$(document).on("click",".menu-dislike-button",function(){var b=$(this).data("dish_id");a.toggleDislike({id:b}),x.toggleDislike(this)}),$(document).on("click",".logo-container .logo-cell",function(){var b=$(this).data("photo_id");l.openPhoto({id:b},{id:a.restaurant.id,name:a.restaurant.name})}),jQuery(document).ready(function(){jQuery(".toggle-nav").click(function(a){jQuery(this).toggleClass("active"),jQuery(".toggle-menu ul").toggleClass("active"),a.preventDefault()})})}]},{}],61:[function(a,b,c){"use strict";b.exports=["$scope","$rootScope","$stateParams","API","$anchorScroll","$location","$uibModal","preloader","$timeout","$document","$state","LocalStorageSrv",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){if(c.branch)if("scanned"==k.current.name.split(".")[3])var a=b.toTitleCase(c.restaurantName)+", "+c.branch.area.name+",  Scanned Menu on elmenus.com, "+JSON.parse(l.getItem("selected_city")).nameEn+", Egypt | Restaurant Menu | elmenus.com"+c.branch.address,d=b.toTitleCase(c.restaurantName)+" صور المنيو على المنيوز, "+c.branch.area.name+JSON.parse(l.getItem("selected_city")).nameAr+", مصر | منيو المطعم | المنيوز |"+c.branch.address,e="Check out "+b.toTitleCase(c.restaurantName)+" Original Scanned Menu on elmenus.com.",f=b.toTitleCase(c.restaurantName)+": "+JSON.parse(l.getItem("selected_city")).nameAr+", مصر, منيو المطعم. نمر التليفون...";else var a=b.toTitleCase(c.restaurantName)+", "+c.branch.area.name+", "+(JSON.parse(l.getItem("selected_city")).nameEn?JSON.parse(l.getItem("selected_city")).nameEn:"Cairo")+" , Egypt | Restaurant Menu | elmenus.com | "+c.branch.address,e=b.toTitleCase(c.restaurantName)+" : "+c.branch.address+", "+c.branch.area.name+", "+(b.selectedCity?b.selectedCity.name:"")+", Egypt, Restaurant Menu. Phone Numbers: …",d="منيو "+b.toTitleCase(c.restaurantName)+", "+c.branch.area.name+", "+(JSON.parse(l.getItem("selected_city")).nameAr?JSON.parse(l.getItem("selected_city")).nameAr:"القاهرة")+", مصر | منيو المطعم | المنيوز | "+c.branch.address,f=b.toTitleCase(c.restaurantName)+" : "+c.branch.address+", "+c.branch.area.name+", "+(b.selectedCity?b.selectedCity.name:"")+", مصر, منيوالمطعم. نمر التليفون...";else{if(b.photo)return;if("scanned"==k.current.name.split(".")[3])var a=b.toTitleCase(c.restaurantName)+" Scanned Menu on elmenus.com, "+JSON.parse(l.getItem("selected_city")).nameEn+", Egypt | Restaurant Menu | elmenus.com",d=b.toTitleCase(c.restaurantName)+" صور المنيو على المنيوز, "+JSON.parse(l.getItem("selected_city")).nameAr+", مصر | منيو المطعم | المنيوز |",e="Check out "+b.toTitleCase(c.restaurantName)+" Original Scanned Menu on elmenus.com.",f=b.toTitleCase(c.restaurantName)+": "+JSON.parse(l.getItem("selected_city")).nameAr+", مصر, منيو المطعم. نمر التليفون...";else var a=b.toTitleCase(c.restaurantName)+", "+JSON.parse(l.getItem("selected_city")).nameEn+", Egypt | Restaurant Menu | elmenus.com",d="منيو "+b.toTitleCase(c.restaurantName)+", "+JSON.parse(l.getItem("selected_city")).nameAr+", مصر | منيو المطعم | المنيوز |",e=b.toTitleCase(c.restaurantName)+(b.selectedCity?b.selectedCity.name:"")+", Egypt, Restaurant Menu. Phone Numbers: …",f=b.toTitleCase(c.restaurantName)+": "+JSON.parse(l.getItem("selected_city")).nameAr+", مصر, منيو المطعم. نمر التليفون...";
}b.seoMetaTags(a,e,d,f)}a.activeElement,a.$rootScope=b,a.textMenuLoading=!0,a.scannedMenuLoading=!0,a.selectedMenuType="text",a.menuCategoriesLimit=5,a.expandedDishes=!1,a.open=!1,a.opts={index:2,history:!1,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"}]},a.getGallery=function(b){a.scannedMenuGallery=b},a.showGallery=function(){a.open=!0},a.changeImage=function(b,c){a.scannedMenuGallery.opts.index=b,c&&(a.open=!1)},a.closeGallery=function(){a.open=!1},d.restaurants.menu(c.id).then(function(b){var c=$("#single_item_template").html(),d=$("#single_item_template_mobile").html(),e=_.template(c),f=_.template(d);a.menusCount=b.menusCount,a.hasRequestedMenu=b.hasRequestedMenu,a.menus=b.menus,a.selectedMenu=b.menus[0],a.selectedMenuCategories=null,b.menus[0]&&(a.selectedMenuCategories=b.menus[0].categories),a.menusForDropdown=_(b.menus).map(function(a){return{id:a.id,name:a.name}}),a.items_list=[],_(b.menus).each(function(b){_(b.categories).each(function(b){a.items_list[b.id]="",_(b.items).each(function(c){a.$parent.isMobileDeviceFlag?a.items_list[b.id]+=f({item:c,category:b,activeLang:a.$parent.activeLang}):a.items_list[b.id]+=e({item:c,category:b,activeLang:a.$parent.activeLang})})})})})["catch"](function(a){console.log(a)})["finally"](function(){a.textMenuLoading=!1}),a.$watch("selectedMenuType",function(b){"text"===b&&$("div.ng-gallery img").imagesLoaded(function(){a.scannedMenuLoading=!1,i(function(){$("div.ng-gallery").masonry()},1e3)})}),a.switchMenuType=function(b){a.selectedMenuType=b||"text"},a.setSelectedMenu=function(b){var c=_(a.menus).filter(function(a){return a.id===b});a.selectedMenu=c[0],a.selectedMenuCategories=null,c[0]&&(a.selectedMenuCategories=c[0].categories)},a.requestMenu=function(b){a.hasRequestedMenu||(a.hasRequestedMenu=!0,d.restaurants.requestMenu(b).then(function(b){a.requestMenuCount=b.count})["catch"](function(b){console.log(b),a.hasRequestedMenu=!1}))},a.loadMoreCategories=function(){a.menuCategoriesLimit+=5},a.toggleCategory=function(a){angular.element(".menu-content-mobile #cat-"+a).toggleClass("closed")},a.menuItemFilter=function(b){return b.name.indexOf(a.menuSearchQuery)>-1},a.$on("$viewContentLoaded",function(){}),a.openPhoto=function(a,b,c){this.$rootScope.openPhoto(a,b,c)},a.lessDishs=function(){a.expandedDishes=!a.expandedDishes},a.getCommonDishSizesOfMyCategory=function(a,b,c){var d,e=b.sizes[a];return c.sizes.forEach(function(a){e.id==a.id&&(d=a)}),d||(d=0),d},a.isDishSizeInCategorySizes=function(a,b){var c=!1;return null!=b.sizes&&b.sizes.forEach(function(b){b.id==a.id&&(c=!0)}),c},a.categoryHasItems=function(a,b){if(void 0===b)return!0;var c=a.items.map(function(a){return a.name}).join("").toLowerCase().indexOf(b.toLowerCase());return c>-1},a.goTo=function(a){$("html, body").animate({scrollTop:$(a).offset().top-80},1e3)},m()}]},{}],62:[function(a,b,c){"use strict";b.exports=["$scope","$rootScope","API","$stateParams","$timeout","$window",function(a,b,c,d,e,f){function g(){var a=b.toTitleCase(d.restaurantName)+", food photos on elmenus",c=b.toTitleCase(d.restaurantName)+" صور الاكلات و المطعم, في المينيوز",e="",f="";b.seoMetaTags(a,e,c,f)}function h(){a.photos=[],a.getPhoto("Latest")}function i(){1!=a.resultEnded&&(a.photosLoading=!0,c.restaurants.photos(d.id,a.photos.length,a.photoLimit,a.storeby).then(function(c){c.photos?(a.photos=a.photos.concat(c.photos),b.photos=a.photos,!a.recentPhotos&&c.photos&&c.photos.length&&(a.recentPhotos=c.photos.slice(1,10))):a.resultEnded=!0})["catch"](function(b){console.log(b),a.resultEnded=!0})["finally"](function(){a.photosLoading=!1}))}a.photos=[],a.photosLoading=!0,a.restaurantId=d.id,a.storeby="mostLiked",a.sortByDisplay="Most yummed",a.resultEnded=!1,a.loadMorePhotos=i,a.afterAddNewImage=h,a.yumPhoto=function(b){a.$parent.yumPhoto(b)},a.photoLimit=10,a.photosLoading=!1,a.getPhoto=function(c){var d={mostLiked:"Most yummed",leastLiked:"Least yummed"};a.storeby=c,a.sortByDisplay="mostLiked"===c||"leastLiked"===c?d[c]:c,a.photos=[],b.photos=[],i()},g()}]},{}],63:[function(a,b,c){"use strict";b.exports=["$scope","$rootScope","$http","$stateParams","$window","API",function(a,b,c,d,e,f){function g(){if(!d.reviewId){var a=b.toTitleCase(d.restaurantName)+"'s Reviews on elmenus",c="تقييمات "+b.toTitleCase(d.restaurantName)+" علي المينيوز",e="",f="";b.seoMetaTags(a,e,c,f)}}a.start=0,a.limit=10,a.hasMore=!0,a.reviews=[],a.reviewsLoading=!1,a.afterAddNewReview=function(){a.loadMoreReviews("start")},a.loadMoreReviews=function(c){"start"===c&&(a.reviews=[],a.hasMore=!0,a.start=0),"force"==c&&(a.hasMore=!0),a.hasMore&&!a.reviewsLoading&&(a.reviewsLoading=!0,a.storeby=LocalStorageSrv.getItem("reviews_storeby")?LocalStorageSrv.getItem("reviews_storeby"):"most_helpful",a.sortByDisplay=LocalStorageSrv.getItem("reviews_sortByDisplay")?LocalStorageSrv.getItem("reviews_sortByDisplay"):"Most Helpful",f.restaurants.reviews(d.id,a.start,a.limit,a.storeby).then(function(c){if(d.reviewId){a.reviews=c.filter(function(a){return a.id==d.reviewId});var e=a.reviews[0].author.name+"'s review of "+b.toTitleCase(d.restaurantName),f="تقييم "+a.reviews[0].author.name+" عن "+b.toTitleCase(d.restaurantName),g=a.reviews[0].rating+" out of 5: "+a.reviews[0].body+" by "+a.reviews[0].author.name,h=a.reviews[0].rating+" من 5: "+a.reviews[0].body+" بواسطة "+a.reviews[0].author.name;b.seoMetaTags(e,g,f,h),a.hasMore=!1}else a.reviews=a.reviews.concat(c),a.start+=a.limit})["catch"](function(b){a.reviews="Error",console.log(b)})["finally"](function(){a.reviewsLoading=!1}))},a.loadMoreReviews(),a.getReview=function(b){a.storeby=b,a.sortByDisplay=b&&"most_helpful"!==b?b:"Most Helpful",LocalStorageSrv.setItem("reviews_storeby",a.storeby),LocalStorageSrv.setItem("reviews_sortByDisplay",a.sortByDisplay),a.loadMoreReviews("start")},g()}]},{}],64:[function(a,b,c){"use strict";b.exports=["$scope","$stateParams","API","preloader",function(a,b,c,d){c.restaurants.scannedMenu(b.id).then(function(b){a.scannedMenus=b,a.slides=_(b).map(function(a){return{src:a.normal,w:1600,h:1600}});var c=_(b).pluck("normal");d.preloadImages(c)})["catch"](function(a){console.log(a)})}]},{}],65:[function(a,b,c){"use strict";var d=a("async");b.exports=["$scope","$stateParams","API","$rootScope","notifications",function(a,b,c,e,f){function g(){a.rating=0,a.reviewBody="",a["interface"]&&a["interface"].getFiles(a["interface"].FILE_TYPES.VALID).forEach(function(a){a.deleteFile()}),a.afterAddNewReview(),f.showSuccess({message:"Review Submitted Successfully!",hideDelay:1500,hide:!0})}a.noPhotos=!0,a.uploadReview=function(){if(e.activeuser){if(null==a.reviewBody||a.reviewBody.length<20)return void f.showError({message:"Review cannot be less than 20 characters!",hideDelay:1500,hide:!0});if(0==a.rating)return void f.showError({message:"Please select rating!",hideDelay:1500,hide:!0});c.restaurants.addReview({id:parseInt(e.restaurant.id||b.id),rating:a.rating,body:a.reviewBody,photos:!!a["interface"]}).then(function(b){var f=b[0].id;if(a["interface"]){var h=a["interface"].getFiles(a["interface"].FILE_TYPES.VALID);d.eachSeries(h,function(a,b){a.isUploading=!0;var d={id:e.restaurant.id,branchId:e.restaurant.currentBranch.id,dishId:a.taggedItem?a.taggedItem.id:"",photos:a.file,reviewId:f,done:h.indexOf(a)===h.length-1};c.restaurants.uploadPhoto(d).then(function(b){a.uploadSuccess=!0})["catch"](function(a){console.log("error",a)})["finally"](function(){a.isUploading=!1,b()})},function(){g()})}else g()})["catch"](function(a){console.log(a)})}else e.openLoginModal()}}]},{async:74}],66:[function(a,b,c){"use strict";b.exports=function(){return{restrict:"E",templateUrl:"reviews/views/add_review_box.html",scope:{restaurantId:"@restaurantId",afterAddNewReview:"&",activeUser:"="},controller:"AddReviewController"}}},{}],67:[function(a,b,c){"use strict";var d=a("./search.js"),e=["$scope","$state","$stateParams","$http","$rootScope","Helpers","API","log","$q","$filter","$timeout",function(a,b,c,e,f,g,h,i,j,k,l){var m=new d("SearchBarController",a,b,c,e,f,g,h,i,j),n=function(){m.dispatch("SET_SCOPE"),m.dispatch("INIT_GLOBAL_SEARCH_BOX_DATA"),f.setArea(),f.setCity()};m.registerAction({name:"SET_SCOPE",action:function(){a.searchData=c,a.isHandledByAutocomplete=!1}}),m.registerAction({name:"CHANGE_SELECTED_AREA",action:function(a){c.city&&delete c.city,f.search.cityId&&delete f.search.cityId,f.search.selectedUserCity&&delete f.search.selectedUserCity,a&&a.id?a&&(c.area=a.id,f.glaobalArea=a):f.search.areaId=void 0,f.search.areaId=a.id,f.search.areaSelected=a.id,f.search.selectedUserArea=a.id,f.search.selectedArea=a,b.go("app.search",c,{notify:!0,reload:!0})}}),m.registerAction({name:"CHANGE_SELECTED_CITY",action:function(a){f.search.areaId&&delete f.search.areaId,f.search.areaSelected&&delete f.search.areaSelected,f.selectedUserAreas&&delete f.selectedUserAreas,f.search.selectedUserArea&&delete f.search.selectedUserArea,c.area&&delete c.area,f.search.cityId=a.id,f.search.selectedUserCity=a.id,c.city=a.id,c.location=a.name,f.search.selectedCity=a,LocalStorageSrv.setItem("selected_city",JSON.stringify(a)),b.current.name.indexOf("city")==-1&&(b.current.name.indexOf("app")!=-1?b.current.name=b.current.name.replace("app","appcity"):b.current.name.indexOf("ar")!=-1&&(b.current.name=b.current.name.replace("ar","arcity"))),b.go(b.current.name,c,{notify:!0})}}),m.registerAction({name:"CHANGE_SELECTED_MOOD",action:function(b){var d=b.id,e=_.isUndefined(c.mood)&&_.isNull(c.mood)?null:parseInt(c.mood);m.moodId=d||e;var f=!0;m.setFilterId("mood",d,f),a.searchData.mood=[],a.searchData.mood=b.id,a.goToSearch()}}),m.registerAction({name:"GET_AREAS_BASED_ON_CITY",action:function(){return h.search.areas({cityId:f.search.selectedUserCity}).then(function(a){f.search.userAreas=_.union([{id:void 0,name:k("translate")("Autodetect Location"),type:"autoDetect"}],a)})["catch"](function(a){g.apiErrorHandler(JSON.stringify(a,null,2),"GET_AREAS_BASED_ON_CITY")}),f.search.userAreas}}),m.registerAction({name:"GET_CITIES_BASED_ON_COUNTRY",action:function(){return f.search.userAreasWithCities||h.search.cities().then(function(b){f.search.userCities=[{id:void 0,name:k("translate")("Autodetect Location"),type:"autoDetect"}],f.search.userAreasWithCities=_.union([{id:void 0,name:k("translate")("Autodetect Location"),type:"autoDetect"}],b);var d=k("cleanAreasAndCities")(b);a.Search.selectedPlace=null,c.city?d.forEach(function(b){"city"==b.type&&b.id==c.city&&(a.Search.selectedPlace=b)}):c.area&&d.forEach(function(b){"area"==b.type&&b.id==c.area&&(a.Search.selectedPlace=b)}),_.forEach(b,function(a){_.forEach(a.areas,function(b){b.cityName=a.name,b.cityId=a.id,f.search.userCities.push(b)})})})["catch"](function(a){g.apiErrorHandler(JSON.stringify(a,null,2),"GET_CITIES_BASED_ON_COUNTRY")}),f.search.userCities}}),m.registerAction({name:"FETCH_MOODS_FROM_API",action:function(){}}),m.registerAction({name:"INIT_GLOBAL_SEARCH_BOX_DATA",action:function(){f.autocomplete=[],"app.search"!=b.current.name&&"appcity.search"!=b.current.name&&(m.keyword=null);a.keywordChange=function(b){f.autocomplete=[],a.autoComplete(b)},a.searchKeyword=function(a){if(!_.isObject(a)||_.isString(a.originalObject)||_.isNull(a.originalObject))f.search.keyword=a.originalObject,m.updateSearchListings({keyword:f.search.keyword,area:f.search.selectedUserArea,mood:f.search.selectedUserMood},!0);else{var b=a.originalObject.restaurant,c=a,d=c.nameEn;f.search.keyword=d;var e=_.isUndefined(b)?c.description.id:b.id;f.goToRestaurant("app.restaurant.menu",e,d)}},a.goToSearch=function(){if(document.activeElement.blur(),c.keyword){var a=c;delete a.area,delete a.cuisine,delete a.mood,a.delivery=0,a.isopen=0,delete a.feature,delete a.sort,delete a.lat,delete a.lon,b.go("app.search",a,{notify:!0})}}}}),m.registerAction({name:"AUTOMATIC_LOCATION_DETECTION",action:function(a){return 0===a&&g.getLocation().then(function(a){var b={lat:a.coords.latitude,"long":a.coords.longitude};alert(JSON.stringify(b)),i("pos",b)})["catch"](function(){}),0===a}}),m.registerAction({name:"UPDATE_CURRENT_STATE",action:function(){b.go("app.search",c),h.search.restaurants({}).then(function(a){i("res rest",a)})["catch"](function(a){i("err",a)})}}),a.dispatch=function(a,b){return m.dispatch(a,b)},a.Search=m,a.autoComplete=function(a){f.autocomplete=[],j.all([h.users.search(a||"",0,10),h.search.restaurantsAutoComplete({limit:10,start:0,q:a,cityId:f.search.selectedUserCity})]).then(function(a){f.autocomplete=[],a[0].forEach(function(a){a.type="user",f.autocomplete.push(a)}),a[1].forEach(function(a){a.type="restaurant",f.autocomplete.push(a)})})},n(),f.$on("$stateChangeSuccess",function(){m.dispatch("SET_SCOPE"),m.dispatch("GET_CITIES_BASED_ON_COUNTRY")})}];b.exports=e},{"./search.js":69}],68:[function(a,b,c){"use strict";var d={version:"0.0.0",userAreas:null,moreFilters:!1};b.exports=d},{}],69:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c,e,f,g,h,i,j,k,l,m,n){"ngInject";d(this,a),this.version="0.0.0",this.$scope=c,this.$state=e,this.$stateParams=f,this.$http=g,this.$sce=l,this.$rootScope=h,this.API=i,this.Helpers=j,this.log=k,this.controller=b,this.searchSorters=[{name:"Popular",id:0},{name:"Latest",id:1}],this.$location=n,this.$anchorScroll=m,h.stateParams=f,h.loadingCurrentLocation=!1,h.search=h.search||{selectedUserCity:f.city||isNaN(f.area)?parseInt(f.city||1e3):null,selectedUserArea:isNaN(f.area)?null:f.area,selectedUserFeature:null,userAreas:[],userCities:[],moodList:[],userMoods:null,userCuisines:null,features:null,selectedUserCuisine:f.cuisine||null,selectedUserMood:f.mood||null,keyword:f.keyword||null,delivery:f.delivery||null},h.expandedDishes=!1,h.expandedNewRestaurants=!1,h.expandedRestaurants1=!1,h.expandedRestaurants2=!1,c.finishedLoadingResults=!0}return a.$inject=["controller","$scope","$state","$stateParams","$http","$rootScope","API","Helpers","log","$sce","$anchorScroll","$location"],a.$inject=["controller","$scope","$state","$stateParams","$http","$rootScope","API","Helpers","log","$sce","$anchorScroll","$location"],e(a,[{key:"getImageSvg",value:function(a){return this.$sce.trustAsResourceUrl(a+".svg")}},{key:"registerAction",value:function(a){this.$scope.actionsMap=this.$scope.actionsMap||{},this.$scope.actionsMap[a.name]=a.action}},{key:"dispatch",value:function(a,b){return this.log("info","Dispatching action ["+this.controller+']: "'+a+'" with params "'+(_.isObject(b)?JSON.stringify(b):b)+'"'),_.isFunction(this.$scope.actionsMap[a])?void this.$scope.actionsMap[a](b):(this.log("error",'Could not find "'+a+'" as a registered Action for '+this.controller+", are you sure you've defined it?"),!1)}},{key:"parseUrlParams",value:function(){_.isNull(this.$stateParams.keyword)&&this.$state.go("app.search")}},{key:"pipe",value:function(a){for(var b=0;b<a.length;b++)this.dispatch(a[b].action,a[b].flush)}},{key:"getCurrentLocation",value:function(){return new Promise(function(a,b){navigator.geolocation.getCurrentPosition(function(c,d){d&&b(d),a(c)})})}},{key:"updateSearchListings",value:function(a,b){_.isObject(a)&&(this.$stateParams[Object.keys(a)[0]]=a[Object.keys(a)[0]]),"SearchController"===this.controller&&this.pipe([{action:"GET_LIST_OF_MATCHING_DISHES",flush:!0},{action:"GET_LIST_OF_NEW_RESTAURANTS",flush:!0},{action:"GET_LIST_OF_SAME_AREA_DELIVERY_RESTAURANTS",flush:!0},{action:"GET_LIST_OF_MATCHING_RESTAURANTS",flush:!0}])}},{key:"expandSearchResultsFor",value:function(a){this.$rootScope.searchResultsExpanded=!0,"dishes"===a&&(this.$rootScope.expandedDishes=!0),"restaurants-1"===a&&(this.$rootScope.expandedRestaurants1=!0),"restaurants-2"===a&&(this.$rootScope.expandedRestaurants2=!0)}},{key:"lessDishs",value:function(){this.$rootScope.expandedDishes=!1}},{key:"collapseSearchResultsFor",value:function(a){this.$rootScope.searchResultsExpanded=!1,"dishes"===a&&(this.$rootScope.expandedDishes=!1),"restaurants-1"===a&&(this.$rootScope.expandedRestaurants1=!1),"restaurants-2"===a&&(this.$rootScope.expandedRestaurants2=!1,this.$location.hash("restaurants-2"),this.$anchorScroll())}},{key:"openPhotoModal",value:function(a,b,c){this.$rootScope.openPhoto(a,b,c)}},{key:"setFilterId",value:function(a,b,c){var d=[];"cuisine"===a&&(!this.$rootScope.search.selectedUserCuisine&&this.$stateParams.cuisine&&(this.$rootScope.search.selectedUserCuisine=this.$stateParams.cuisine),d="number"==typeof this.$rootScope.search.selectedUserCuisine?this.$rootScope.search.selectedUserCuisine.toString():this.$rootScope.search.selectedUserCuisine),"mood"===a&&(!this.$rootScope.search.selectedUserMood&&this.$stateParams.mood&&(this.$rootScope.search.selectedUserMood=this.$stateParams.mood),d="number"==typeof this.$rootScope.search.selectedUserMood?this.$rootScope.search.selectedUserMood.toString():this.$rootScope.search.selectedUserMood,c&&(d="")),"feature"===a&&(!this.$rootScope.search.selectedUserFeature&&this.$stateParams.feature&&(this.$rootScope.search.selectedUserFeature=this.$stateParams.feature),d="number"==typeof this.$rootScope.search.selectedUserFeature?this.$rootScope.search.selectedUserFeature.toString():this.$rootScope.search.selectedUserFeature);var e=b.toString();_.isNull(d)||_.isNaN(d)||(d=_.uniq(d.split(",")),_.contains(d,e)?d=_.without(d,e):(d.push(e),d=_.without(d,"")),c&&(d=[],d.push(e)),d=_.uniq(d)),(_.isNull(d)||_.isNaN(d))&&(d=[e]),"cuisine"===a&&(this.$rootScope.search.selectedUserCuisine=d.join()),"mood"===a&&(this.$rootScope.search.selectedUserMood=d.join()),"feature"===a&&(this.$rootScope.search.selectedUserFeature=d.join()),"app.search"!==this.$state.current.name&&"ar.search"!==this.$state.current.name&&"appcity.search"!==this.$state.current.name&&"arcity.search"!==this.$state.current.name||(d=_.without(d,""),"cuisine"===a&&this.updateSearchListings({cuisine:d.join()}),"mood"===a&&this.updateSearchListings({mood:d.join()}),"feature"===a&&this.updateSearchListings({feature:d.join()}))}},{key:"getFilterId",value:function(a){if("area"===a){var b=this.$stateParams[""+a]?this.$stateParams[""+a]:null,c=!_.isNull(this.$rootScope.search.selectedUserArea)&&this.$rootScope.search.selectedUserArea;return _.isNull(b)?c:b&&"number"==typeof b?b:_.isString(b)&&2===b.split(",").length?0:c||parseInt(b)}var d=this.$stateParams[""+a]?this.$stateParams[""+a].toString().split(","):[],e=[];return"cuisine"===a&&(e=_.isNull(this.$rootScope.search.selectedUserCuisine)?[]:this.$rootScope.search.selectedUserCuisine),"mood"===a&&(e=_.isNull(this.$rootScope.search.selectedUserMood)?[]:this.$rootScope.search.selectedUserMood),"feature"===a&&(e=_.isNull(this.$rootScope.search.selectedUserFeature)?[]:this.$rootScope.search.selectedUserFeature),d||e}},{key:"getSearchResults",value:function(a){var b=this;!a.flush&&this.$scope["resultsStartingFromItem_"+a.endPoint]||(this.$scope["resultsStartingFromItem_"+a.endPoint]=0);var c={};c.limit=20,c.cityId=this.$rootScope.search.selectedUserCity,c.q=this.$stateParams.keyword,this.$stateParams.mood&&(c.tags=this.$stateParams.mood.toString()),c.cuisines=this.$stateParams.cuisine,c.isOpen=this.$stateParams.isopen,c.start=a.start||0,c.sort=this.$scope.activeSorter.name.toLowerCase();var d=this.$stateParams.isDeliverySection;return this.$rootScope.prevKeyword==this.$stateParams.keyword||d||this.$stateParams.delivery||(this.$rootScope.search.deliveryOnly=!1,this.$rootScope.expandedNewRestaurants=!1,this.$state.current.name.indexOf("restaurant")<0&&this.$state.go("app.search",{delivery:0},{notify:!1}),this.$stateParams.delivery=0),this.$rootScope.prevKeyword=this.$stateParams.keyword,(this.$rootScope.search.deliveryOnly||"GET_LIST_OF_SAME_AREA_DELIVERY_RESTAURANTS"===a.action)&&(c.deliveryAreas=this.$stateParams.area?this.$stateParams.area.toString():null,this.$rootScope.expandedNewRestaurants=!0),"GET_LIST_OF_SAME_AREA_DELIVERY_RESTAURANTS"!==a.action&&"GET_LIST_OF_NEW_RESTAURANTS"!==a.action||(c.sort="latest"),"GET_LIST_OF_MATCHING_RESTAURANTS"!==a.action&&"GET_LIST_OF_SAME_AREA_DELIVERY_RESTAURANTS"!==a.action||(c.features=this.$stateParams.feature,isNaN(this.$stateParams.area)?null:this.$stateParams.area,c.areaId=this.$stateParams.area,c.areas=this.$stateParams.area?this.$stateParams.area.toString():null),"GET_LIST_OF_MATCHING_RESTAURANTS"!==a.action&&(c.features=this.$stateParams.feature,this.$stateParams.area=this.areaId,"number"==typeof this.$stateParams.area?c.areas=this.$stateParams.area?this.$stateParams.area.toString():null:(c.lat=_.isString(this.$stateParams.area)?parseFloat(this.$stateParams.area.split(",")[0]):this.$stateParams.area.lat,c.lon=_.isString(this.$stateParams.area)?parseFloat(this.$stateParams.area.split(",")[1]):this.$stateParams.area.lon)),c.lat&&c.lon&&(c.deliveryAreas=null,c.areas=null),c=this.Helpers.cleanNullValues(c),this.$scope.finishedLoadingResults=!1,0===this.$scope["currentSearchResultsCountFor_"+a.addTo]?(this.$scope.finishedLoadingResults=!0,!1):void this.API.search[a.endPoint](c).then(function(c){c.count<20&&(b.$scope["resultsStartingFromItem_"+a.endPoint]=0),0==b.$scope["resultsStartingFromItem_"+a.endPoint]&&(b.$scope["currentSearchResultsCountFor_"+a.addTo]=0),b.$scope["resultsStartingFromItem_"+a.endPoint]+=c.count<20?c.count:20,b.$scope[a.addTo].results&&b.$scope["currentSearchResultsCountFor_"+a.addTo]===c.count?(b.$scope["currentSearchResultsCountFor_"+a.addTo]=c.count,0!==c.count&&(c.results=b.$scope[a.addTo].results.concat(c.results),b.$scope[a.addTo]=c)):(b.$scope["currentSearchResultsCountFor_"+a.addTo]=c.count,0!==c.count&&(b.$scope[a.addTo]=c)),"GET_LIST_OF_MATCHING_RESTAURANTS"===a.action&&(b.$scope.restaurantsListFinished=!0),b.$scope.finishedLoadingResults=!0,b.$scope.loadingResults=!1})["catch"](function(c){return b.Helpers.apiErrorHandler(JSON.stringify(c,null,2),a.action)})}},{key:"keyword",set:function(a){this.$rootScope.search.keyword=a,"app.search"===this.$state.current.name&&this.updateSearchListings({keyword:a})},get:function(){return this.$rootScope.search.keyword}},{key:"areaId",set:function(a){var b=this;return _.isUndefined(a)?(this.$rootScope.loadingCurrentLocation=!0,this.getCurrentLocation().then(function(a){return"app.search"!==b.$state.current.name&&"appcity.search"!==b.$state.current.name||(b.$rootScope.search.selectedUserArea={custom:!0,id:0,name:"Autodetect Location",lat:a.coords.latitude,lon:a.coords.longitude},b.updateSearchListings({area:a.coords.latitude+","+a.coords.longitude})),b.$rootScope.loadingCurrentLocation=!1,{lat:a.coords.latitude,lon:a.coords.longitude}}).then(function(a){return b.API.search?b.API.search.locateMe(a):b.Helpers.search.locateMe(a)}).then(function(a){b.areaId=a.area.id})["catch"](function(a){return console.log(a),b.log("error","Failed to autodetect your location!",a),alert("You should accept this geo request so I'm able to where are you at :)"),b.$rootScope.loadingCurrentLocation=!1,!1}),!0):(a=_.isObject(a)?a.id:a,this.$rootScope.search.selectedUserArea=a,void("app.search"!==this.$state.current.name&&"ar.search"!==this.$state.current.name&&"appcity.search"!==this.$state.current.name&&"arcity.search"!==this.$state.current.name||this.updateSearchListings({area:a})))},get:function(){return this.getFilterId("area")}},{key:"moodId",set:function(a){this.setFilterId("mood",a)},get:function(){return this.getFilterId("mood")}},{key:"featureId",set:function(a){this.setFilterId("feature",a)},get:function(){return this.getFilterId("feature")}},{key:"cuisineId",set:function(a){this.setFilterId("cuisine",a)},get:function(){return this.getFilterId("cuisine")}},{key:"areaDoc",set:function(a){this.areaId=a.id,this.log("SET areaDoc",a)},get:function(){var a=this.$rootScope.search.userCities;if(_.isNull(a)||_.isUndefined(a))return{name:"..."};for(var b=0;b<a.length;b++)for(var c in a[b])if(a[b].hasOwnProperty(c)){if(a[b].id===this.areaId)return a[b];if(0===this.areaId)return{id:0,name:"Your Location"}}return!1}}]),a}();jQuery(document).ready(function(){jQuery(".toggle-nav").click(function(a){jQuery(this).toggleClass("active"),jQuery(".toggle-menu ul").toggleClass("active"),a.preventDefault()})}),b.exports=f},{}],70:[function(a,b,c){"use strict";var d=a("./search.conf.js"),e=a("./search.js"),f=["$scope","$state","$stateParams","$http","$rootScope","API","Helpers","log","$sce","$anchorScroll","spinnerService","$location","DoubleClick",function(a,b,c,f,g,h,i,j,k,l,m,n,o){var p=new e("SearchController",a,b,c,f,g,h,i,j,k,l,n);a.adsShown=!1;var q=function(){if(a.adsShown===!0)return!1;o.flushPageTargeting(),o.setPageTargeting("keyword",c.keyword?c.keyword.toString().replace(/'/g,""):0),o.setPageTargeting("city",g.selectedCity.clearName);var b="en"==g.activeLang?"english":"arabic";o.setPageTargeting("language",b),o.setPageTargeting("page","search"),o.setPageTargeting("cuisines",c.cuisines?c.cuisines.split("-").join(" ").replace("cuisines ",""):0),o.setPageTargeting("moods",c.moods?c.moods.split("-").join(" ").replace("moods ",""):0),o.setPageTargeting("features",c.moods?c.moods.split("-").join(" ").replace("moods ",""):0),o.setPageTargeting("areas",c.areas?c.areas.split("-").join(" ").replace("area ",""):0),o.refreshAll(),a.adsShown=!0},r=function(){var b="Top "+(c.moods?a.getFilterNamse(c.moods)+", ":"")+(c.cuisines?a.getFilterNamse(c.cuisines)+", ":"")+(c.keyword?c.keyword:"")+" Restaurants"+(c.areas?" in "+a.getFilterNamse(c.areas)+" ":"")+(c.features?" with "+a.getFilterNamse(c.features)+", ":"")+" "+(c.cities?a.getFilterNamse(c.cities):" Cairo")+", Egypt - elmenus.com ",d="أحسن مطاعم "+(c.moods?"فيها "+a.getFilterNamse(c.moods)+", ":"")+(c.cuisines?a.getFilterNamse(c.cuisines)+", ":"")+(c.keyword?c.keyword:"")+(c.areas?" في "+a.getFilterNamse(c.areas):"")+(c.features?" فيها "+a.getFilterNamse(c.features)+", ":"")+(c.cities?+a.getFilterNamse(c.cities):" القاهرة")+", مصر - elmenus.com ",e="Discover the best "+(c.moods?a.getFilterNamse(c.moods+" "):"")+(c.cuisines?a.getFilterNamse(c.cuisines)+" ":"")+(c.keyword?c.keyword:"")+" Restaurants"+(c.areas?" in "+a.getFilterNamse(c.areas)+" ":"")+(c.features?" with "+a.getFilterNamse(c.features):"")+" "+(c.cities?a.getFilterNamse(c.cities):" Cairo")+", Egypt - elmenus.com ",f="إكتشف أحسن مطاعم "+(c.moods?"فيها "+a.getFilterNamse(c.moods)+", ":"")+(c.cuisines?a.getFilterNamse(c.cuisines)+", ":"")+(c.keyword?c.keyword:"")+(c.areas?" في "+a.getFilterNamse(c.areas):"")+(c.features?" فيها "+a.getFilterNamse(c.features):"")+(c.cities?+a.getFilterNamse(c.cities):" القاهرة")+", مصر - elmenus.com ";g.seoMetaTags(b,e,d,f),m._unregisterAll(),p.parseUrlParams(),p.dispatch("SET_SCOPE"),p.dispatch("PARSE_SEARCH_URL_PARAMS"),p.dispatch("FETCH_CUISINE_FROM_API"),p.dispatch("FETCH_MOODS_FROM_API"),p.dispatch("FETCH_FEATURES_FROM_API"),p.dispatch("GET_LIST_OF_MATCHING_DISHES"),p.dispatch("GET_LIST_OF_SAME_AREA_DELIVERY_RESTAURANTS"),p.dispatch("GET_LIST_OF_NEW_RESTAURANTS"),p.dispatch("GET_LIST_OF_MATCHING_RESTAURANTS")};a.getFilterNamse=function(b){return b?a.toTitleCase(b.split("-").slice(1).join(" ").split(",").join(", ")):""},a.toTitleCase=function(a){return a.split(" ").join(" ").replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},a.checkDeliveryArea=function(){return c.area==p.areaDoc.id},p.registerAction({name:"SET_SCOPE",action:function(){var b=(""!=c.keyword&&c.keyword,0);a.moreFilters=d.moreFilters,a.cuisineList=null,a.moodList=null,a.defaultListLimit=6,a.cuisineListLimit=6,a.featuresListLimit=6,a.moodListLimit=6,a.searchData=c,a.searchFilters={cuisine:"",mood:""},a.activeSorter=_.isNull(c.sort)?p.searchSorters[b]:p.searchSorters[parseInt(c.sort)],a.cuisine=!1,a.loadingResults=!1,a.openNowOnly=!_.isBoolean(c.isopen)||c.isopen,a.topDishPhotosLoading=!0,a.finishedLoadingResults=!0,a.noResults=!1,a.matchingDishesList=[],a.matchingRestaurantsList=[],a.restaurantsListFinished=!1,a.matchingDeliveryList=[],a.matchingNewRestaurantsList=[],g.search.deliveryOnly=c.delivery,g.search.keyword=c.keyword,g.search.selectedUserArea=parseInt(c.area),g.search.selectedUserCuisine=_.isUndefined(c.cuisine)||_.isNull(c.cuisine)?null:c.cuisine,g.search.selectedUserMood=_.isUndefined(c.mood)||_.isNull(c.mood)?null:c.mood,g.$broadcast("angucomplete-alt:changeInput","searchBox",g.search.keyword)}}),p.registerAction({name:"PARSE_SEARCH_URL_PARAMS",action:function(){p.parseUrlParams()}}),p.registerAction({name:"FETCH_CUISINE_FROM_API",action:function(){a.cuisineList||h.search.cusines().then(function(b){a.cuisineList=b})["catch"](function(a){i.apiErrorHandler(JSON.stringify(a,null,2),"FETCH_CUISINE_FROM_API")})}}),p.registerAction({name:"FETCH_MOODS_FROM_API",action:function(){a.moodList||h.search.moods().then(function(b){a.moodList=b})["catch"](function(a){i.apiErrorHandler(JSON.stringify(a,null,2),"FETCH_MOODS_FROM_API")})}}),p.registerAction({name:"FETCH_FEATURES_FROM_API",action:function(){a.featuresList||h.search.features().then(function(b){angular.forEach(b,function(a){a.svgUrl=p.getImageSvg(a.photoUrl)}),a.featuresList=b})["catch"](function(a){i.apiErrorHandler(JSON.stringify(a,null,2),"FETCH_FEATURES_FROM_API")})}}),p.registerAction({name:"GET_AREAS_BASED_ON_CITY",action:function(){return h.search.areas({cityId:g.search.selectedUserCity}).then(function(a){g.search.userAreas=_.union([{id:void 0,name:"Autodetect Location"}],a)})["catch"](function(a){i.apiErrorHandler(JSON.stringify(a,null,2),"GET_AREAS_BASED_ON_CITY")}),g.search.userAreas}}),p.registerAction({name:"GET_CITIES_BASED_ON_COUNTRY",action:function(){return h.search.cities().then(function(a){g.search.userCities=[{id:void 0,name:"Autodetect Location"}],_.forEach(a,function(a){_.forEach(a.areas,function(b){b.cityName=a.name,b.cityId=a.id,g.search.userCities.push(b)})})})["catch"](function(a){i.apiErrorHandler(JSON.stringify(a,null,2),"GET_CITIES_BASED_ON_COUNTRY")}),g.search.userCities}}),p.registerAction({name:"SHOW_MORE_FILTERS",action:function(){a.moreFilters=!a.moreFilters}}),p.registerAction({name:"CHANGE_SELECTED_AREA",action:function(a){p.areaId=a,g.glaobalArea=a,b.go("app.search",c,{notify:!0})}}),p.registerAction({name:"FILTER_BY_AREA",action:function(a){c.area==a.id&&(delete c.area,c.delivery=0),b.go("app.search",c,{notify:!0})}}),p.registerAction({name:"FILTER_BY_CUISINE",action:function(a){var d=a.id;g.selectedCuisine.indexOf(a.name)==-1?g.selectedCuisine.push(a.name):delete g.selectedCuisine[g.selectedCuisine.indexOf(a.name)];var e=_.isUndefined(c.cuisine)&&_.isNull(c.cuisine)?null:parseInt(c.cuisine);p.cuisineId=d||e,isNaN(c.area)&&delete c.area,b.go("app.search",c,{notify:!0})}}),p.registerAction({name:"FILTER_BY_MOOD",action:function(a){var d=a.id;g.selectedMood.indexOf(a.name)==-1?g.selectedMood.push(a.name):delete g.selectedMood[g.selectedMood.indexOf(a.name)];var e=_.isUndefined(c.mood)&&_.isNull(c.mood)?null:parseInt(c.mood);p.moodId=d||e,isNaN(c.area)&&delete c.area,b.go("app.search",c,{notify:!0})}}),p.registerAction({name:"FILTER_BY_FEATURE",action:function(a){var d=a.id;g.selectedFeature.indexOf(a.name)==-1?g.selectedFeature.push(a.name):delete g.selectedFeature[g.selectedFeature.indexOf(a.name)];var e=_.isUndefined(c.feature)&&_.isNull(c.feature)?null:parseInt(c.feature);p.featureId=d||e,isNaN(c.area)&&delete c.area,b.go("app.search",c,{notify:!1,reload:!1})}}),p.registerAction({name:"FILTER_BY_OPEN_ONLY",action:function(){var d=c.isopen;d=!d,a.openNowOnly=d,c.isopen=d,b.go("app.search",c,{notify:!0,reload:!1}),p.updateSearchListings({isopen:d})}}),p.registerAction({name:"SORT_BY",action:function(d){a.matchingRestaurantsList=[],a.activeSorter=p.searchSorters[d],c.sort=d,
b.go("app.search",c,{notify:!0,reload:!1}),p.updateSearchListings({sort:d})}}),p.registerAction({name:"FILTER_BY_DELIVERY",action:function(){p.areaDoc.name?(g.search.deliveryOnly=!g.search.deliveryOnly,c.delivery=g.search.deliveryOnly,b.go("app.search",c,{notify:!0,reload:!1}),p.updateSearchListings({delivery:g.search.deliveryOnly?g.search.deliveryOnly:""})):g.search.areaDropdownIsOpen=!0}}),p.registerAction({name:"SWITCH_LIMIT_OF_A_LIST",action:function(b){a[b+"Limit"]<a[b].length?a[b+"Limit"]=a[b].length:a[b+"Limit"]=a.defaultListLimit}}),p.registerAction({name:"GET_LIST_OF_MATCHING_DISHES",action:function(b){a.loadingResults=b,p.getSearchResults({endPoint:"items",addTo:"matchingDishesList",action:"GET_LIST_OF_MATCHING_DISHES",start:a.matchingDishesList.results?a.matchingDishesList.results.length:0,flush:b||!1})}}),p.registerAction({name:"GET_LIST_OF_SAME_AREA_DELIVERY_RESTAURANTS",action:function(b){a.loadingResults=b,p.getSearchResults({endPoint:"restaurants",addTo:"matchingDeliveryList",action:"GET_LIST_OF_SAME_AREA_DELIVERY_RESTAURANTS",start:a.matchingDeliveryList.results?a.matchingDeliveryList.results.length:0,flush:b||!1})}}),p.registerAction({name:"GET_LIST_OF_NEW_RESTAURANTS",action:function(b){a.loadingResults=b,p.getSearchResults({endPoint:"restaurants",addTo:"matchingNewRestaurantsList",action:"GET_LIST_OF_NEW_RESTAURANTS",start:a.matchingNewRestaurantsList.results?a.matchingNewRestaurantsList.results.length:0,flush:b||!1})}}),p.registerAction({name:"GET_LIST_OF_MATCHING_RESTAURANTS",action:function(b){a.loadingResults=b,p.getSearchResults({endPoint:"restaurants",addTo:"matchingRestaurantsList",action:"GET_LIST_OF_MATCHING_RESTAURANTS",start:a.matchingRestaurantsList.results?a.matchingRestaurantsList.results.length:0,flush:b||!1}),q()}}),a.getMoodName=function(a,b){var c=0;"NaN"==b[0]&&(c=1);for(var d in a)if(a[d].id==b[c])return a[d].name},a.toggleFavorite=function(a){g.activeuser?(a.isFavorited=!a.isFavorited,h.restaurants.toggleFavorite(c.id).then(function(b){a.isFavorited=isFavorited,g.storeResData(a,!0)})["catch"](function(){a.isFavorited=a.isFavorited})["finally"](function(){})):g.openLoginModal()},a.dispatch=function(a,b){return p.dispatch(a,b)},a.$on("$destroy",function(){g.selectedMood=[],g.search.keyword=null}),a.Search=p,a.keyword=p.keyword||"",r()}];b.exports=f},{"./search.conf.js":68,"./search.js":69}],71:[function(a,b,c){"use strict";b.exports=["$scope","API","Session","toaster","$rootScope","$uibModalInstance","GAuth","$state",function(a,b,c,d,e,f,g,h){a.types={SIGNUP:0,LOGIN:1,FORGETPASSWORD:2},0===a.mood?a.type=a.types.SIGNUP:2===a.mood?a.type=a.types.FORGETPASSWORD:a.type=a.types.LOGIN,a.showLogin=function(){return a.type=a.types.LOGIN},a.showSignup=function(){return a.type=a.types.SIGNUP},a.showForgetPassword=function(){return a.type=a.types.FORGETPASSWORD},a.validateEmail=function(a){var b=/^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;return String(a).search(b)===-1},a.originalLogin=e.login,a.login=function(g,i){a.loginErrors="",g&&0!==g.length?a.validateEmail(g)===!0?a.loginErrors="Email not valid":i&&0!==i.length?b.users.authenticate(g,i).then(function(a){c.setCurrentUser(a);var b=h.current.name.indexOf("photo")==-1;h.go(h.current.name,h.params,{notify:!0,reload:b}),d.pop({type:"success",body:"Logged In Succesfully!",timeout:1500,showCloseButton:!0}),e.activeuser=a,e.storeAuthData(a),e.reInit(),f.dismiss("cancel")})["catch"](function(b){console.log(b),a.activeuser=null,200===b.status||400===b.status||404===b.status?(d.pop({type:"error",body:"Email and password did not match",timeout:1500,showCloseButton:!0}),a.loginErrors="Email and password did not match",console.log(a.loginErrors)):(d.pop({type:"error",body:"Can't connect to server (no response)",timeout:1500,showCloseButton:!0}),a.loginErrors="Can't connect - to server (no response)",console.log(a.loginErrors))})["finally"](function(){}):a.loginErrors="Password is required.":a.loginErrors="Email is required."},a.forgotPassword=function(a){b.users.forgotPassword(a).then(function(a){d.pop({type:"success",body:"Your password reset link has been sent to your email",timeout:1500,showCloseButton:!0}),f.dismiss("cancel")})["catch"](function(a){console.log(a),d.pop({type:"error",body:"there is problem in connection ",timeout:1500,showCloseButton:!0})})["finally"](function(){})},a.signup=function(g,i,j){a.loginErrors="",g.cityId=1e3,g.name&&""!==g.name?g.name.length<3?a.loginErrors="Name has to be bigger than 2 characters":g.email?a.validateEmail(g.email)===!0?a.loginErrors="Email not valid":g.password?g.password.length<6?a.loginErrors="Password must be at least 6 characters":(j&&(g.photos=j),b.users.signup(g).then(function(a){c.setCurrentUser(a),h.go(h.current.name,h.params,{notify:!0,reload:!0}),e.activeuser=a,e.storeAuthData(a),d.pop({type:"success",body:"Signup Succesfully!",timeout:1500,showCloseButton:!0}),f.dismiss("cancel")})["catch"](function(b){console.log(b),a.loginErrors="Either email taken or bad data sent.",console.log(a.loginErrors)})["finally"](function(){})):a.loginErrors="Password Required":a.loginErrors="Email Required":a.loginErrors="Name Required"},a.dismiss=function(){f.dismiss("cancel")},a.loginWithFacebook=function(){FB.login(function(g){if(g.authResponse){var i=g.authResponse.accessToken;b.users.authenticate.facebook(i).then(function(a){c.setCurrentUser(a),h.go(h.current.name,h.params,{notify:!0,reload:!0}),d.pop({type:"success",body:"Logged In Succesfully!",timeout:1500,showCloseButton:!0}),e.activeuser=a,e.storeAuthData(a),f.dismiss("cancel")})["catch"](function(b){console.log(b),a.loginErrors="Wrong email and password combination",console.log(a.loginErrors)})["finally"](function(){})}else console.log("User cancelled login or did not fully authorize.")},{scope:"email,user_photos,user_videos"})},a.loginWithGoogle=function(){g.login().then(function(i){i?g.getToken().then(function(g){var i=g.access_token;b.users.authenticate.google(i).then(function(a){c.setCurrentUser(a),h.go(h.current.name,h.params,{notify:!0,reload:!0}),d.pop({type:"success",body:"Logged In Succesfully!",timeout:1500,showCloseButton:!0}),e.activeuser=a,e.storeAuthData(a),f.dismiss("cancel")})["catch"](function(b){console.log(b),a.loginErrors="Wrong email and password combination",console.log(a.loginErrors)})["finally"](function(){})}):console.log("User cancelled login or did not fully authorize.")},function(){console.log("login fail")})}}]},{}],72:[function(a,b,c){"use strict";b.exports=["$scope","API","Session","toaster","$rootScope","$state","$location",function(a,b,c,d,e,f,g){a.resetPassword=function(a,c){a!==c?d.pop({type:"error",body:"Passwords doesn't match",timeout:2e3,showCloseButton:!0}):b.users.resetPassword(g.search().resetToken,a,c).then(function(a){f.go("main"),d.pop({type:"success",body:"Your password changed successflly",timeout:3e3,showCloseButton:!0})})["catch"](function(a){console.log(a),d.pop({type:"error",body:"Error, Please try again later",timeout:2e3,showCloseButton:!0})})["finally"](function(){})}}]},{}],73:[function(a,b,c){"use strict";angular.module("core").run(["$templateCache",function(a){a.put("common/views/footer.html",'<footer ng-if="$state.current.name !== \'landing\'" class="footer" id="footerContainer"><div><div class="footer_container"><div class="row" id="footer-top"><div class="col-md-3" id="footer-about"><img src="/assets/logo_dark.png" title="elmenus" alt="elmenus"><p translate>about text</p><p><a ui-sref="app.about" class="btn-orange" translate>Read More</a></p></div><div class="col-md-3" id="footer-services"><h2 translate>Useful Links</h2><ul><li><a ui-sref="app.about" ng-click="returnToTheTop()"><span translate>About elmenus</span> <i class="fa {{faDirection}}"></i></a></li><li><a ui-sref="app.add-menu" ng-click="returnToTheTop()"><span translate>Add Your Menu</span> <i class="fa {{faDirection}}"></i></a></li><li><a ui-sref="app.careers" ng-click="returnToTheTop()"><span translate>Careers</span> <i class="fa {{faDirection}}"></i></a></li><li><a ui-sref="app.advertise" ng-click="returnToTheTop()"><span translate>Advertise with us</span> <i class="fa {{faDirection}}"></i></a></li></ul></div><div class="col-md-3" id="footer-restaurants"><h2 translate>Restaurants</h2><ul><li><a ui-sref="app.search({city:1000})" ng-click="selectCity(getCityById(1000));" ng-click="returnToTheTop()"><span translate>Restaurants in Cairo</span> <i class="fa {{faDirection}}"></i></a></li><li><a ui-sref="app.search({city:1001})" ng-click="selectCity(getCityById(1001))" ng-click="returnToTheTop()"><span translate>Restaurants in Alexandria</span> <i class="fa {{faDirection}}"></i></a></li><li><a ui-sref="app.search({city:1003})" ng-click="selectCity(getCityById(1003))" ng-click="returnToTheTop()"><span translate>Restaurants in North Coast</span> <i class="fa {{faDirection}}"></i></a></li><li><a ui-sref="app.search({city:1002})" ng-click="selectCity(getCityById(1002))" ng-click="returnToTheTop()"><span translate>Restaurants in El Gouna</span> <i class="fa {{faDirection}}"></i></a></li></ul></div><div class="col-md-3" id="footer-restaurants"><h2 translate>Restaurants</h2><ul><li><a ui-sref="app.search({city:1000})" ng-click="selectCity(getCityById(1004));" ng-click="returnToTheTop()"><span translate>Restaurants in El Mansoura</span> <i class="fa {{faDirection}}"></i></a></li><li><a ui-sref="app.search({city:1001})" ng-click="selectCity(getCityById(1005))" ng-click="returnToTheTop()"><span translate>Restaurants in Sharm El Sheikh</span> <i class="fa {{faDirection}}"></i></a></li><li><a ui-sref="app.search({city:1003})" ng-click="selectCity(getCityById(1006))" ng-click="returnToTheTop()"><span translate>Restaurants in Ras Sudr</span> <i class="fa {{faDirection}}"></i></a></li><li><a ui-sref="app.search({city:1002})" ng-click="selectCity(getCityById(1007))" ng-click="returnToTheTop()"><span translate>Restaurants in Hurghada</span> <i class="fa {{faDirection}}"></i></a></li></ul><div id="footer-newsletter"><a href="mailto:support@elmenus.com" translate>support@elmenus.com</a></div></div></div></div></div></footer>'),a.put("common/views/app-banner.html",'<div id="app-download-banner" ng-if="isMobileDevice.android()" ng-hide="hideBanner"><div class="close-icon" ng-click="hideAppBanner();$event.stopPropagation();"><p>x</p></div><div class="row"><a href="https://play.google.com/store/apps/details?id=com.elmenus.app"><div class="col-xs-2" style="padding: 0px" ng-click="hideAppBanner();$event.stopPropagation();"><div class="close-icon"><p style="padding: 2px">x</p></div></div><div class="col-xs-3" style="padding: 0px"><img class="logo" src="assets/elmenus-logo.png"></div><div class="col-xs-4" style="padding: 0px"><p class="brand"><b>elmenus</b> <small>for android</small></p><p class="download">Download the app for a better experience on your phone</p></div><div class="col-xs-3" style="padding: 0px"><img class="download-icon" src="/assets/googleplay_btn.png" title="Download from Google Play Store" alt="Download from Google Play Store"></div></a></div></div><div id="app-download-banner" ng-if="isMobileDevice.ios();" ng-hide="hideBanner"><div class="close-icon" ng-click="hideAppBanner();$event.stopPropagation();"><p>x</p></div><div class="row"><a href="https://itunes.apple.com/eg/app/elmenus/id843479108?mt=8"><div class="col-xs-2" style="width: 20%; padding-left: 20px"><img class="logo" src="assets/elmenus-logo.png"></div><div class="col-xs-5"><p class="brand"><b>elmenus</b> <small>for ios</small></p><p class="download">Download the app for a better experience on your phone</p></div><div class="col-xs-4" style="padding: 0px"><img class="download-icon" src="/assets/appstore_btn.svg" title="Download from App Store" alt="Download from App Store"></div></a></div></div>'),a.put("common/views/navbar3.html","<div class=\"navbar3\" ng-controller=\"SearchBarController\"><span ng-if=\"$state.current.name !== 'appcity.home' && $state.current.name !== 'arcity.home' && $state.current.name !== 'app.home' && $state.current.name !== 'ar.home' && $state.current.name !== 'landing' \" ng-include=\"'common/views/nav-bar.min.html'\"></span><span ng-if=\"$state.current.name === 'appcity.home' || $state.current.name === 'arcity.home' || $state.current.name === 'app.home' || $state.current.name === 'ar.home' \" ng-include=\"'common/views/nav-bar.max.html'\"></span></div>"),a.put("common/views/main.html","<div ng-include=\"'home/views/home.html'\"></div>"),a.put("common/views/city.drop-down.html",'<div class="dropdown area"><button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><span><i class="fa fa-map-marker" aria-hidden="true"></i></span> <span class="selected-city">{{ selectedCity && selectedCity.index ? cities[selectedCity.index].name : (activeLang==\'en\' ? "Cairo": "القاهرة") }} </span><span><i class="fa fa-angle-down" aria-hidden="true"></i></span></button><ul class="dropdown-menu" ng-if="cities.length > 0"><li ng-repeat="city in cities"><a ng-href="/{{city.clearName}}" ng-click="selectCity(city)" ng-bind-html="( city.name | highlight: $select.search)"></a></li></ul></div>'),a.put("common/views/area.drop-down.html",'<div class="dropdown area delivering-to"><button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown"><span><i class="fa fa-map-marker" aria-hidden="true"></i></span>{{selectedArea && selectedArea.index ? areas[selectedArea.index].name : selectedArea.name }} <span ng-if="!selectedArea" style="font-weight: normal;color: #333333">{{ areas[0].name }} </span><span><i class="fa fa-angle-down" aria-hidden="true"></i></span></button><ul role="menu" class="dropdown-menu" style="overflow-x: hidden; width: 100%"><div class="input-group" style="margin:7px; width: 95%"><input class="form-control select-search list-autocomplete" id="list-autocomplete-areas" type="text" ng-model="letter" placeholder="{{ areas[0].name }}" autofocus style="width: 100%" ng-show="!selectedArea"> <input class="form-control select-search list-autocomplete" id="list-autocomplete-areas" type="text" ng-model="letter" placeholder="{{selectedArea && selectedArea.index ? areas[selectedArea.index].name  : areas[0].name }}" autofocus style="width: 100%" ng-show="selectedArea"></div><li ng-repeat="area in areas | filter:letter:startsWith | orderBy:\'name\'"><a ng-href="/{{selectedCity.clearName}}/search/area-{{area.clearName}}?delivery=1&isopen=0" ng-click="selectArea(area)" ng-bind-html="( area.name | highlight: $select.search)"></a></li></ul></div>'),a.put("common/views/language.html",'<span uib-dropdown><a href uib-dropdown-toggle><span class="text" translate>{{activeLang==\'ar\'?\'AR\':\'EN\'}}</span> <i class="icon-arrow_down_grey sward_of_world"></i></a><ul class="uib-dropdown-menu langoptdropdown"><li><a href="{{arabic_url || \'#\'}}" class="langopt" ng-click="changeLanguage(\'ar\')" translate>AR</a></li><li role="separator" class="divider"></li><li><a href="{{english_url || \'#\'}}" class="langopt" ng-click="changeLanguage(\'en\')" translate>EN</a></li></ul></span>'),a.put("common/views/sidefooter.html",'<div class="row"><div class="col-md-12"><a href="#"><span translate>Restaurants in Cairo</span></a> <span>&sdot;</span> <a href="#"><span translate>Restaurants in Alexandria</span></a> <span>&sdot;</span> <a href="#"><span translate>Restaurants in North Coast</span></a> <span>&sdot;</span> <a href="#"><span translate>Restaurants in El Gouna</span></a></div></div><div class="row"><div class="col-md-12"><a href="#"><span translate>Copyright &copy; 2016 El Menus</span></a> <span>&sdot;</span> <a href="#"><span translate>Privacy Policy</span></a> <span>&sdot;</span> <a href="#"><span translate>About elmenus</span></a> <span>&sdot;</span> <a href="#"><span translate>FAQ</span></a> <span>&sdot;</span> <a href="#"><span translate>Advertise with us</span></a></div></div>'),a.put("common/views/nav-bar-collapse.right.html",'<li ng-if="activeuser" class="dropdown current-item" id="profile-dropdown"><span ng-include="\'common/views/user-nav-deopdown.html\'"></span></li><li ng-if="activeuser" class="active current-item"><span ng-include="\'common/views/favorite.html\'"></span></li><li ng-if="activeuser"><span ng-include="\'common/views/notification.html\'"></span></li><li ng-if="!activeuser"><a class="custom_button" ng-click="openLoginModal(true)" translate>Log in</a> <a class="custom_button" ng-click="openSignupModal()" translate>Sign up</a></li><li class="dropdown" id="language-dropdown"><span ng-include="\'common/views/language.html\'"></span></li>'),a.put("common/views/nav-bar.max.html",'<div class="header-nav max"><div class="col-md-12 col-sm-12 navbar navbar-default" role="navigation"><div class="header-margin"><div class="navbar-header"><a class="navbar-brand" href="{{getURL(\'home\')}}"><img class="logo" src="assets/logo_dark.png" alt=""> </a><span ng-include="\'common/views/city.drop-down.html\'"></span><button type="button" class="navbar-toggle {{$root.opendMenue == \'user-menue\' ? \'active\' : \'\'}}" data-toggle="collapse" ng-click="$root.opendMenue== \'user-menue\' ? $root.opendMenue = null : $root.opendMenue = \'user-menue\'"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right" ng-include="\'common/views/nav-bar-collapse.right.html\'"></ul></div><div class="mobile-drop-menue" ng-click="$root.opendMenue = null" ng-if=" $root.opendMenue == \'user-menue\'"><div class="photo-section" ng-if="activeuser"><img ng-click="openProfile(activeuser)" ng-src="{{activeuser.avatarUrl||\'/assets/profile_no_pic.svg\'}}"><h1 ng-click="openProfile(activeuser)"><i class="fa {{(activeLang == \'ar\') ? \'fa-chevron-left\' : \'fa-chevron-right\'" aria-hidden="true"></i></h1></div><div class="list"><div ng-if="!activeuser"><h1><span translate ng-click="openLoginModal(true)">Login</span></h1><h1><span translate ng-click="openSignupModal()">Sign up</span></h1></div><h1><span translate ui-sref="app.about" ui-sref-opts="{reload: true, notify: true}">About elmenus </span><i class="fa {{(activeLang == \'ar\') ? \'fa-chevron-left\' : \'fa-chevron-right\'}}" aria-hidden="true"></i></h1><h1><span translate ui-sref="app.advertise" ui-sref-opts="{reload: true, notify: true}">Advertise with us </span><i class="fa {{(activeLang == \'ar\') ? \'fa-chevron-left\' : \'fa-chevron-right\'}}" aria-hidden="true"></i></h1><h1><span translate ui-sref="app.add-menu" ui-sref-opts="{reload: true, notify: true}">Add Your Menu </span><i class="fa {{(activeLang == \'ar\') ? \'fa-chevron-left\' : \'fa-chevron-right\'}}" aria-hidden="true"></i></h1><h1 ng-if="activeuser"><span translate ng-click="logout()">Sign Out</span></h1><span class="language-btn {{(activeLang == \'en\') ? \'active\' : \'\'}}" translate ng-click="changeLanguage(\'en\')">English</span> <span class="language-btn {{(activeLang == \'ar\') ? \'active\' : \'\'}}" translate ng-click="changeLanguage(\'ar\')">العربية</span></div></div></div></div><div ng-include="\'search/views/search.bar.max-conatiner.html\'" class="col-md-12 search-max-container"></div></div>'),a.put("common/views/nav-bar.min.html",'<div class="header-nav min"><div class="row navbar navbar-default" role="navigation"><div class="col-sm-8 header-margin"><div class="row"><div class="col-md-5 col-xs-12 navbar-header"><a class="navbar-brand" href="{{getURL(\'home\')}}"><img class="logo" src="assets/logo_dark.png" alt=""> </a><span ng-include="\'common/views/city.drop-down.html\'"></span> <i ng-if="$root.opendMenue != \'search-menue\' " class="fa fa-search" aria-hidden="true"></i> <i ng-if="$root.opendMenue == \'search-menue\' " class="fa fa-times" aria-hidden="true"></i> <button type="button" class="navbar-toggle {{$root.opendMenue == \'user-menue\' ? \'active\' : \'\'}}" data-toggle="collapse" ng-click="$root.opendMenue== \'user-menue\' ? $root.opendMenue = null : $root.opendMenue = \'user-menue\'"><span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><div ng-include="\'search/views/search.bar.min.html\'" class="col-md-7 hidden-sm hidden-xs search-up"></div></div></div><div class="col-sm-3 language-bar collapse navbar-collapse"><ul class="nav navbar-nav navbar-right" ng-include="\'common/views/nav-bar-collapse.right.html\'"></ul></div><div class="mobile-drop-menue" ng-click="$root.opendMenue = null" ng-if=" $root.opendMenue == \'user-menue\'"><div class="photo-section" ng-if="activeuser"><img ng-click="openProfile(activeuser)" ng-src="{{activeuser.avatarUrl||\'/assets/profile_no_pic.svg\'}}"><h1 ng-click="openProfile(activeuser)"><i class="fa {{(activeLang == \'ar\') ? \'fa-chevron-left\' : \'fa-chevron-right\'" aria-hidden="true"></i></h1></div><div class="list"><div ng-if="!activeuser"><h1><span translate ng-click="openLoginModal(true)">Login</span></h1><h1><span translate ng-click="openSignupModal()">Sign up</span></h1></div><h1><span translate ui-sref="app.about" ui-sref-opts="{reload: true, notify: true}">About elmenus </span><i class="fa {{(activeLang == \'ar\') ? \'fa-chevron-left\' : \'fa-chevron-right\'}}" aria-hidden="true"></i></h1><h1><span translate ui-sref="app.advertise" ui-sref-opts="{reload: true, notify: true}">Advertise with us </span><i class="fa {{(activeLang == \'ar\') ? \'fa-chevron-left\' : \'fa-chevron-right\'}}" aria-hidden="true"></i></h1><h1><span translate ui-sref="app.add-menu" ui-sref-opts="{reload: true, notify: true}">Add Your Menu </span><i class="fa {{(activeLang == \'ar\') ? \'fa-chevron-left\' : \'fa-chevron-right\'}}" aria-hidden="true"></i></h1><h1 ng-if="activeuser"><span translate ng-click="logout()">Sign Out</span></h1><span class="language-btn {{(activeLang == \'en\') ? \'active\' : \'\'}}" translate ng-click="changeLanguage(\'en\')">English</span> <span class="language-btn {{(activeLang == \'ar\') ? \'active\' : \'\'}}" translate ng-click="changeLanguage(\'ar\')">العربية</span></div></div><div class="visible-xs visible-sm mobile-drop-menue mobile-search restaurant-search-mobile-menu"><div class="row"><div class="header-container white-box"><span ng-include="\'search/views/search-input.container.html\'"></span></div></div></div></div><div class="search-min header-margin ng-scope search-btn" ng-controller="SearchBarController"><div class="hidden-lg hidden-md col-sm-4 col-xs-12 pull-right ng-scope"></div></div></div>'),a.put("common/directives/star_rating/star_rating.html",'<div ng-if="module !== \'searchRating\'"><span ng-style="{\'cursor\' : (module == \'addReview\')?\'pointer\':\'default\'}" ng-click="setRating($index+1)" ng-repeat="i in [].constructor(rating) track by $index"><img src="assets/Star_medium.svg" alt=""> </span><span ng-style="{\'cursor\' : (module == \'addReview\')?\'pointer\':\'default\'}" ng-click="setRating(rating+$index+1)" ng-repeat="i in [].constructor(5-rating) track by $index"><img src="assets/Star_disabled_medium.svg" alt=""> </span><span class="review-count">{{reviewCount? \'(\' + reviewCount + \')\' : \'\' }}</span></div><div ng-if="module === \'searchRating\'"><img ng-repeat="i in [].constructor(rating) track by $index" src="assets/Star_medium.svg" alt=""> <img ng-repeat="i in [].constructor(5-rating) track by $index" src="assets/Star_disabled_medium.svg" alt=""> <span class="review-count">{{reviewCount? \'(\' + reviewCount + \')\' : \'\' }}</span></div>')}])},{}],74:[function(a,b,c){(function(a,c){!function(){function d(){}function e(a){return a}function f(a){return!!a}function g(a){return!a}function h(a){return function(){if(null===a)throw new Error("Callback was already called.");a.apply(this,arguments),a=null}}function i(a){return function(){null!==a&&(a.apply(this,arguments),a=null)}}function j(a){return N(a)||"number"==typeof a.length&&a.length>=0&&a.length%1===0}function k(a,b){for(var c=-1,d=a.length;++c<d;)b(a[c],c,a)}function l(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function m(a){return l(Array(a),function(a,b){return b})}function n(a,b,c){return k(a,function(a,d,e){c=b(c,a,d,e)}),c}function o(a,b){k(P(a),function(c){b(a[c],c)})}function p(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function q(a){var b,c,d=-1;return j(a)?(b=a.length,function(){return d++,d<b?d:null}):(c=P(a),b=c.length,function(){return d++,d<b?c[d]:null})}function r(a,b){return b=null==b?a.length-1:+b,function(){for(var c=Math.max(arguments.length-b,0),d=Array(c),e=0;e<c;e++)d[e]=arguments[e+b];switch(b){case 0:return a.call(this,d);case 1:return a.call(this,arguments[0],d)}}}function s(a){return function(b,c,d){return a(b,d)}}function t(a){return function(b,c,e){e=i(e||d),b=b||[];var f=q(b);if(a<=0)return e(null);var g=!1,j=0,k=!1;!function l(){if(g&&j<=0)return e(null);for(;j<a&&!k;){var d=f();if(null===d)return g=!0,void(j<=0&&e(null));j+=1,c(b[d],d,h(function(a){j-=1,a?(e(a),k=!0):l()}))}}()}}function u(a){return function(b,c,d){return a(K.eachOf,b,c,d)}}function v(a){return function(b,c,d,e){return a(t(c),b,d,e)}}function w(a){return function(b,c,d){return a(K.eachOfSeries,b,c,d)}}function x(a,b,c,e){e=i(e||d),b=b||[];var f=j(b)?[]:{};a(b,function(a,b,d){c(a,function(a,c){f[b]=c,d(a)})},function(a){e(a,f)})}function y(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(c){c&&e.push({index:b,value:a}),d()})},function(){d(l(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function z(a,b,c,d){y(a,b,function(a,b){c(a,function(a){b(!a)})},d)}function A(a,b,c){return function(d,e,f,g){function h(){g&&g(c(!1,void 0))}function i(a,d,e){return g?void f(a,function(d){g&&b(d)&&(g(c(!0,a)),g=f=!1),e()}):e()}arguments.length>3?a(d,e,i,h):(g=f,f=e,a(d,i,h))}}function B(a,b){return b}function C(a,b,c){c=c||d;var e=j(b)?[]:{};a(b,function(a,b,c){a(r(function(a,d){d.length<=1&&(d=d[0]),e[b]=d,c(a)}))},function(a){c(a,e)})}function D(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]),d(a)})},function(a){d(a,e)})}function E(a,b,c){function e(a,b,c,e){if(null!=e&&"function"!=typeof e)throw new Error("task callback must be a function");return a.started=!0,N(b)||(b=[b]),0===b.length&&a.idle()?K.setImmediate(function(){a.drain()}):(k(b,function(b){var f={data:b,callback:e||d};c?a.tasks.unshift(f):a.tasks.push(f),a.tasks.length===a.concurrency&&a.saturated()}),void K.setImmediate(a.process))}function f(a,b){return function(){g-=1;var c=!1,d=arguments;k(b,function(a){k(i,function(b,d){b!==a||c||(i.splice(d,1),c=!0)}),a.callback.apply(a,d)}),a.tasks.length+g===0&&a.drain(),a.process()}}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var g=0,i=[],j={tasks:[],concurrency:b,payload:c,saturated:d,empty:d,drain:d,started:!1,paused:!1,push:function(a,b){e(j,a,!1,b)},kill:function(){j.drain=d,j.tasks=[]},unshift:function(a,b){e(j,a,!0,b)},process:function(){for(;!j.paused&&g<j.concurrency&&j.tasks.length;){var b=j.payload?j.tasks.splice(0,j.payload):j.tasks.splice(0,j.tasks.length),c=l(b,function(a){return a.data});0===j.tasks.length&&j.empty(),g+=1,i.push(b[0]);var d=h(f(j,b));a(c,d)}},length:function(){return j.tasks.length},running:function(){return g},workersList:function(){return i},idle:function(){return j.tasks.length+g===0},pause:function(){j.paused=!0},resume:function(){if(j.paused!==!1){j.paused=!1;for(var a=Math.min(j.concurrency,j.tasks.length),b=1;b<=a;b++)K.setImmediate(j.process)}}};return j}function F(a){return r(function(b,c){b.apply(null,c.concat([r(function(b,c){"object"==typeof console&&(b?console.error&&console.error(b):console[a]&&k(c,function(b){console[a](b)}))})]))})}function G(a){return function(b,c,d){a(m(b),c,d)}}function H(a){return r(function(b,c){var d=r(function(c){var d=this,e=c.pop();return a(b,function(a,b,e){a.apply(d,c.concat([e]))},e)});return c.length?d.apply(this,c):d})}function I(a){return r(function(b){var c=b.pop();b.push(function(){var a=arguments;d?K.setImmediate(function(){c.apply(null,a)}):c.apply(null,a)});var d=!0;a.apply(this,b),d=!1})}var J,K={},L="object"==typeof self&&self.self===self&&self||"object"==typeof c&&c.global===c&&c||this;null!=L&&(J=L.async),K.noConflict=function(){return L.async=J,K};var M=Object.prototype.toString,N=Array.isArray||function(a){return"[object Array]"===M.call(a)},O=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},P=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},Q="function"==typeof setImmediate&&setImmediate,R=Q?function(a){Q(a)}:function(a){setTimeout(a,0)};"object"==typeof a&&"function"==typeof a.nextTick?K.nextTick=a.nextTick:K.nextTick=R,K.setImmediate=Q?R:K.nextTick,K.forEach=K.each=function(a,b,c){return K.eachOf(a,s(b),c)},K.forEachSeries=K.eachSeries=function(a,b,c){return K.eachOfSeries(a,s(b),c)},K.forEachLimit=K.eachLimit=function(a,b,c,d){return t(b)(a,s(c),d)},K.forEachOf=K.eachOf=function(a,b,c){function e(a){j--,a?c(a):null===f&&j<=0&&c(null)}c=i(c||d),a=a||[];for(var f,g=q(a),j=0;null!=(f=g());)j+=1,b(a[f],f,h(e));0===j&&c(null)},K.forEachOfSeries=K.eachOfSeries=function(a,b,c){function e(){var d=!0;return null===g?c(null):(b(a[g],g,h(function(a){if(a)c(a);else{if(g=f(),null===g)return c(null);d?K.setImmediate(e):e()}})),void(d=!1))}c=i(c||d),a=a||[];var f=q(a),g=f();e()},K.forEachOfLimit=K.eachOfLimit=function(a,b,c,d){t(b)(a,c,d)},K.map=u(x),K.mapSeries=w(x),K.mapLimit=v(x),K.inject=K.foldl=K.reduce=function(a,b,c,d){K.eachOfSeries(a,function(a,d,e){c(b,a,function(a,c){b=c,e(a)})},function(a){d(a,b)})},K.foldr=K.reduceRight=function(a,b,c,d){var f=l(a,e).reverse();K.reduce(f,b,c,d)},K.transform=function(a,b,c,d){3===arguments.length&&(d=c,c=b,b=N(a)?[]:{}),K.eachOf(a,function(a,d,e){c(b,a,d,e)},function(a){d(a,b)})},K.select=K.filter=u(y),K.selectLimit=K.filterLimit=v(y),K.selectSeries=K.filterSeries=w(y),K.reject=u(z),K.rejectLimit=v(z),K.rejectSeries=w(z),K.any=K.some=A(K.eachOf,f,e),K.someLimit=A(K.eachOfLimit,f,e),K.all=K.every=A(K.eachOf,g,g),K.everyLimit=A(K.eachOfLimit,g,g),K.detect=A(K.eachOf,e,B),K.detectSeries=A(K.eachOfSeries,e,B),K.detectLimit=A(K.eachOfLimit,e,B),K.sortBy=function(a,b,c){function d(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}K.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){return a?c(a):void c(null,l(b.sort(d),function(a){return a.value}))})},K.auto=function(a,b,c){function e(a){s.unshift(a)}function f(a){var b=p(s,a);b>=0&&s.splice(b,1)}function g(){j--,k(s.slice(0),function(a){a()})}"function"==typeof arguments[1]&&(c=b,b=null),c=i(c||d);var h=P(a),j=h.length;if(!j)return c(null);b||(b=j);var l={},m=0,q=!1,s=[];e(function(){j||c(null,l)}),k(h,function(d){function h(){return m<b&&n(t,function(a,b){return a&&l.hasOwnProperty(b)},!0)&&!l.hasOwnProperty(d)}function i(){h()&&(m++,f(i),k[k.length-1](s,l))}if(!q){for(var j,k=N(a[d])?a[d]:[a[d]],s=r(function(a,b){if(m--,b.length<=1&&(b=b[0]),a){var e={};o(l,function(a,b){e[b]=a}),e[d]=b,q=!0,c(a,e)}else l[d]=b,K.setImmediate(g)}),t=k.slice(0,k.length-1),u=t.length;u--;){if(!(j=a[t[u]]))throw new Error("Has nonexistent dependency in "+t.join(", "));if(N(j)&&p(j,d)>=0)throw new Error("Has cyclic dependencies")}h()?(m++,k[k.length-1](s,l)):e(i)}})},K.retry=function(a,b,c){function d(a,b){if("number"==typeof b)a.times=parseInt(b,10)||f;else{if("object"!=typeof b)throw new Error("Unsupported argument type for 'times': "+typeof b);a.times=parseInt(b.times,10)||f,a.interval=parseInt(b.interval,10)||g}}function e(a,b){function c(a,c){return function(d){a(function(a,b){d(!a||c,{err:a,result:b})},b)}}function d(a){return function(b){setTimeout(function(){b(null)},a)}}for(;i.times;){var e=!(i.times-=1);h.push(c(i.task,e)),!e&&i.interval>0&&h.push(d(i.interval))}K.series(h,function(b,c){c=c[c.length-1],(a||i.callback)(c.err,c.result)})}var f=5,g=0,h=[],i={times:f,interval:g},j=arguments.length;if(j<1||j>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");
return j<=2&&"function"==typeof a&&(c=b,b=a),"function"!=typeof a&&d(i,a),i.callback=c,i.task=b,i.callback?e():e},K.waterfall=function(a,b){function c(a){return r(function(d,e){if(d)b.apply(null,[d].concat(e));else{var f=a.next();f?e.push(c(f)):e.push(b),I(a).apply(null,e)}})}if(b=i(b||d),!N(a)){var e=new Error("First argument to waterfall must be an array of functions");return b(e)}return a.length?void c(K.iterator(a))():b()},K.parallel=function(a,b){C(K.eachOf,a,b)},K.parallelLimit=function(a,b,c){C(t(b),a,c)},K.series=function(a,b){C(K.eachOfSeries,a,b)},K.iterator=function(a){function b(c){function d(){return a.length&&a[c].apply(null,arguments),d.next()}return d.next=function(){return c<a.length-1?b(c+1):null},d}return b(0)},K.apply=r(function(a,b){return r(function(c){return a.apply(null,b.concat(c))})}),K.concat=u(D),K.concatSeries=w(D),K.whilst=function(a,b,c){if(c=c||d,a()){var e=r(function(d,f){d?c(d):a.apply(this,f)?b(e):c.apply(null,[null].concat(f))});b(e)}else c(null)},K.doWhilst=function(a,b,c){var d=0;return K.whilst(function(){return++d<=1||b.apply(this,arguments)},a,c)},K.until=function(a,b,c){return K.whilst(function(){return!a.apply(this,arguments)},b,c)},K.doUntil=function(a,b,c){return K.doWhilst(a,function(){return!b.apply(this,arguments)},c)},K.during=function(a,b,c){c=c||d;var e=r(function(b,d){b?c(b):(d.push(f),a.apply(this,d))}),f=function(a,d){a?c(a):d?b(e):c(null)};a(f)},K.doDuring=function(a,b,c){var d=0;K.during(function(a){d++<1?a(null,!0):b.apply(this,arguments)},a,c)},K.queue=function(a,b){var c=E(function(b,c){a(b[0],c)},b,1);return c},K.priorityQueue=function(a,b){function c(a,b){return a.priority-b.priority}function e(a,b,c){for(var d=-1,e=a.length-1;d<e;){var f=d+(e-d+1>>>1);c(b,a[f])>=0?d=f:e=f-1}return d}function f(a,b,f,g){if(null!=g&&"function"!=typeof g)throw new Error("task callback must be a function");return a.started=!0,N(b)||(b=[b]),0===b.length?K.setImmediate(function(){a.drain()}):void k(b,function(b){var h={data:b,priority:f,callback:"function"==typeof g?g:d};a.tasks.splice(e(a.tasks,h,c)+1,0,h),a.tasks.length===a.concurrency&&a.saturated(),K.setImmediate(a.process)})}var g=K.queue(a,b);return g.push=function(a,b,c){f(g,a,b,c)},delete g.unshift,g},K.cargo=function(a,b){return E(a,1,b)},K.log=F("log"),K.dir=F("dir"),K.memoize=function(a,b){var c={},d={},f=Object.prototype.hasOwnProperty;b=b||e;var g=r(function(e){var g=e.pop(),h=b.apply(null,e);f.call(c,h)?K.setImmediate(function(){g.apply(null,c[h])}):f.call(d,h)?d[h].push(g):(d[h]=[g],a.apply(null,e.concat([r(function(a){c[h]=a;var b=d[h];delete d[h];for(var e=0,f=b.length;e<f;e++)b[e].apply(null,a)})])))});return g.memo=c,g.unmemoized=a,g},K.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},K.times=G(K.map),K.timesSeries=G(K.mapSeries),K.timesLimit=function(a,b,c,d){return K.mapLimit(m(a),b,c,d)},K.seq=function(){var a=arguments;return r(function(b){var c=this,e=b[b.length-1];"function"==typeof e?b.pop():e=d,K.reduce(a,b,function(a,b,d){b.apply(c,a.concat([r(function(a,b){d(a,b)})]))},function(a,b){e.apply(c,[a].concat(b))})})},K.compose=function(){return K.seq.apply(null,Array.prototype.reverse.call(arguments))},K.applyEach=H(K.eachOf),K.applyEachSeries=H(K.eachOfSeries),K.forever=function(a,b){function c(a){return a?e(a):void f(c)}var e=h(b||d),f=I(a);c()},K.ensureAsync=I,K.constant=r(function(a){var b=[null].concat(a);return function(a){return a.apply(this,b)}}),K.wrapSync=K.asyncify=function(a){return r(function(b){var c,d=b.pop();try{c=a.apply(this,b)}catch(e){return d(e)}O(c)&&"function"==typeof c.then?c.then(function(a){d(null,a)})["catch"](function(a){d(a.message?a:new Error(a))}):d(null,c)})},"object"==typeof b&&b.exports?b.exports=K:"function"==typeof define&&define.amd?define([],function(){return K}):L.async=K}()}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:135}],75:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/copy"),f=a("es5-ext/object/normalize-options"),g=a("es5-ext/object/valid-callable"),h=a("es5-ext/object/map"),i=a("es5-ext/object/valid-callable"),j=a("es5-ext/object/valid-value"),k=Function.prototype.bind,l=Object.defineProperty,m=Object.prototype.hasOwnProperty;d=function(a,b,c){var d,f=j(b)&&i(b.value);return d=e(b),delete d.writable,delete d.value,d.get=function(){return!c.overwriteDefinition&&m.call(this,a)?f:(b.value=k.call(f,c.resolveContext?c.resolveContext(this):this),l(this,a,b),this[a])},d},b.exports=function(a){var b=f(arguments[1]);return null!=b.resolveContext&&g(b.resolveContext),h(a,function(a,c){return d(c,a,b)})}},{"es5-ext/object/copy":97,"es5-ext/object/map":106,"es5-ext/object/normalize-options":107,"es5-ext/object/valid-callable":111,"es5-ext/object/valid-value":112}],76:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/assign"),f=a("es5-ext/object/normalize-options"),g=a("es5-ext/object/is-callable"),h=a("es5-ext/string/#/contains");d=b.exports=function(a,b){var c,d,g,i,j;return arguments.length<2||"string"!=typeof a?(i=b,b=a,a=null):i=arguments[2],null==a?(c=g=!0,d=!1):(c=h.call(a,"c"),d=h.call(a,"e"),g=h.call(a,"w")),j={value:b,configurable:c,enumerable:d,writable:g},i?e(f(i),j):j},d.gs=function(a,b,c){var d,i,j,k;return"string"!=typeof a?(j=c,c=b,b=a,a=null):j=arguments[3],null==b?b=void 0:g(b)?null==c?c=void 0:g(c)||(j=c,c=void 0):(j=b,b=c=void 0),null==a?(d=!0,i=!1):(d=h.call(a,"c"),i=h.call(a,"e")),k={get:b,set:c,configurable:d,enumerable:i},j?e(f(j),k):k}},{"es5-ext/object/assign":94,"es5-ext/object/is-callable":100,"es5-ext/object/normalize-options":107,"es5-ext/string/#/contains":113}],77:[function(a,b,c){"use strict";var d=a("../../object/valid-value");b.exports=function(){return d(this).length=0,this}},{"../../object/valid-value":112}],78:[function(a,b,c){"use strict";var d=a("../../number/is-nan"),e=a("../../number/to-pos-integer"),f=a("../../object/valid-value"),g=Array.prototype.indexOf,h=Object.prototype.hasOwnProperty,i=Math.abs,j=Math.floor;b.exports=function(a){var b,c,k,l;if(!d(a))return g.apply(this,arguments);for(c=e(f(this).length),k=arguments[1],k=isNaN(k)?0:k>=0?j(k):e(this.length)-j(i(k)),b=k;b<c;++b)if(h.call(this,b)&&(l=this[b],d(l)))return b;return-1}},{"../../number/is-nan":88,"../../number/to-pos-integer":92,"../../object/valid-value":112}],79:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Array.from:a("./shim")},{"./is-implemented":80,"./shim":81}],80:[function(a,b,c){"use strict";b.exports=function(){var a,b,c=Array.from;return"function"==typeof c&&(a=["raz","dwa"],b=c(a),Boolean(b&&b!==a&&"dwa"===b[1]))}},{}],81:[function(a,b,c){"use strict";var d=a("es6-symbol").iterator,e=a("../../function/is-arguments"),f=a("../../function/is-function"),g=a("../../number/to-pos-integer"),h=a("../../object/valid-callable"),i=a("../../object/valid-value"),j=a("../../object/is-value"),k=a("../../string/is-string"),l=Array.isArray,m=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;b.exports=function(a){var b,c,p,q,r,s,t,u,v,w,x=arguments[1],y=arguments[2];if(a=Object(i(a)),j(x)&&h(x),this&&this!==Array&&f(this))b=this;else{if(!x){if(e(a))return r=a.length,1!==r?Array.apply(null,a):(q=new Array(1),q[0]=a[0],q);if(l(a)){for(q=new Array(r=a.length),c=0;c<r;++c)q[c]=a[c];return q}}q=[]}if(!l(a))if(void 0!==(v=a[d])){for(t=h(v).call(a),b&&(q=new b),u=t.next(),c=0;!u.done;)w=x?m.call(x,y,u.value,c):u.value,b?(n.value=w,o(q,c,n)):q[c]=w,u=t.next(),++c;r=c}else if(k(a)){for(r=a.length,b&&(q=new b),c=0,p=0;c<r;++c)w=a[c],c+1<r&&(s=w.charCodeAt(0),s>=55296&&s<=56319&&(w+=a[++c])),w=x?m.call(x,y,w,p):w,b?(n.value=w,o(q,p,n)):q[p]=w,++p;r=p}if(void 0===r)for(r=g(a.length),b&&(q=new b(r)),c=0;c<r;++c)w=x?m.call(x,y,a[c],c):a[c],b?(n.value=w,o(q,c,n)):q[c]=w;return b&&(n.value=null,q.length=r),q}},{"../../function/is-arguments":82,"../../function/is-function":83,"../../number/to-pos-integer":92,"../../object/is-value":102,"../../object/valid-callable":111,"../../object/valid-value":112,"../../string/is-string":116,"es6-symbol":129}],82:[function(a,b,c){"use strict";var d=Object.prototype.toString,e=d.call(function(){return arguments}());b.exports=function(a){return d.call(a)===e}},{}],83:[function(a,b,c){"use strict";var d=Object.prototype.toString,e=d.call(a("./noop"));b.exports=function(a){return"function"==typeof a&&d.call(a)===e}},{"./noop":84}],84:[function(a,b,c){"use strict";b.exports=function(){}},{}],85:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Math.sign:a("./shim")},{"./is-implemented":86,"./shim":87}],86:[function(a,b,c){"use strict";b.exports=function(){var a=Math.sign;return"function"==typeof a&&(1===a(10)&&a(-20)===-1)}},{}],87:[function(a,b,c){"use strict";b.exports=function(a){return a=Number(a),isNaN(a)||0===a?a:a>0?1:-1}},{}],88:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Number.isNaN:a("./shim")},{"./is-implemented":89,"./shim":90}],89:[function(a,b,c){"use strict";b.exports=function(){var a=Number.isNaN;return"function"==typeof a&&(!a({})&&a(NaN)&&!a(34))}},{}],90:[function(a,b,c){"use strict";b.exports=function(a){return a!==a}},{}],91:[function(a,b,c){"use strict";var d=a("../math/sign"),e=Math.abs,f=Math.floor;b.exports=function(a){return isNaN(a)?0:(a=Number(a),0!==a&&isFinite(a)?d(a)*f(e(a)):a)}},{"../math/sign":85}],92:[function(a,b,c){"use strict";var d=a("./to-integer"),e=Math.max;b.exports=function(a){return e(0,d(a))}},{"./to-integer":91}],93:[function(a,b,c){"use strict";var d=a("./valid-callable"),e=a("./valid-value"),f=Function.prototype.bind,g=Function.prototype.call,h=Object.keys,i=Object.prototype.propertyIsEnumerable;b.exports=function(a,b){return function(c,j){var k,l=arguments[2],m=arguments[3];return c=Object(e(c)),d(j),k=h(c),m&&k.sort("function"==typeof m?f.call(m,c):void 0),"function"!=typeof a&&(a=k[a]),g.call(a,k,function(a,d){return i.call(c,a)?g.call(j,l,c[a],a,c,d):b})}}},{"./valid-callable":111,"./valid-value":112}],94:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.assign:a("./shim")},{"./is-implemented":95,"./shim":96}],95:[function(a,b,c){"use strict";b.exports=function(){var a,b=Object.assign;return"function"==typeof b&&(a={foo:"raz"},b(a,{bar:"dwa"},{trzy:"trzy"}),a.foo+a.bar+a.trzy==="razdwatrzy")}},{}],96:[function(a,b,c){"use strict";var d=a("../keys"),e=a("../valid-value"),f=Math.max;b.exports=function(a,b){var c,g,h,i=f(arguments.length,2);for(a=Object(e(a)),h=function(d){try{a[d]=b[d]}catch(e){c||(c=e)}},g=1;g<i;++g)b=arguments[g],d(b).forEach(h);if(void 0!==c)throw c;return a}},{"../keys":103,"../valid-value":112}],97:[function(a,b,c){"use strict";var d=a("../array/from"),e=a("./assign"),f=a("./valid-value");b.exports=function(a){var b=Object(f(a)),c=arguments[1],g=Object(arguments[2]);if(b!==a&&!c)return b;var h={};return c?d(c,function(b){(g.ensure||b in a)&&(h[b]=a[b])}):e(h,a),h}},{"../array/from":79,"./assign":94,"./valid-value":112}],98:[function(a,b,c){"use strict";var d,e=Object.create;a("./set-prototype-of/is-implemented")()||(d=a("./set-prototype-of/shim")),b.exports=function(){var a,b,c;return d?1!==d.level?e:(a={},b={},c={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){return"__proto__"===a?void(b[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(b[a]=c)}),Object.defineProperties(a,b),Object.defineProperty(d,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:a}),function(b,c){return e(null===b?a:b,c)}):e}()},{"./set-prototype-of/is-implemented":109,"./set-prototype-of/shim":110}],99:[function(a,b,c){"use strict";b.exports=a("./_iterate")("forEach")},{"./_iterate":93}],100:[function(a,b,c){"use strict";b.exports=function(a){return"function"==typeof a}},{}],101:[function(a,b,c){"use strict";var d=a("./is-value"),e={"function":!0,object:!0};b.exports=function(a){return d(a)&&e[typeof a]||!1}},{"./is-value":102}],102:[function(a,b,c){"use strict";var d=a("../function/noop")();b.exports=function(a){return a!==d&&null!==a}},{"../function/noop":84}],103:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.keys:a("./shim")},{"./is-implemented":104,"./shim":105}],104:[function(a,b,c){"use strict";b.exports=function(){try{return Object.keys("primitive"),!0}catch(a){return!1}}},{}],105:[function(a,b,c){"use strict";var d=a("../is-value"),e=Object.keys;b.exports=function(a){return e(d(a)?Object(a):a)}},{"../is-value":102}],106:[function(a,b,c){"use strict";var d=a("./valid-callable"),e=a("./for-each"),f=Function.prototype.call;b.exports=function(a,b){var c={},g=arguments[2];return d(b),e(a,function(a,d,e,h){c[d]=f.call(b,g,a,d,e,h)}),c}},{"./for-each":99,"./valid-callable":111}],107:[function(a,b,c){"use strict";var d=a("./is-value"),e=Array.prototype.forEach,f=Object.create,g=function(a,b){var c;for(c in a)b[c]=a[c]};b.exports=function(a){var b=f(null);return e.call(arguments,function(a){d(a)&&g(Object(a),b)}),b}},{"./is-value":102}],108:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Object.setPrototypeOf:a("./shim")},{"./is-implemented":109,"./shim":110}],109:[function(a,b,c){"use strict";var d=Object.create,e=Object.getPrototypeOf,f={};b.exports=function(){var a=Object.setPrototypeOf,b=arguments[0]||d;return"function"==typeof a&&e(a(b(null),f))===f}},{}],110:[function(a,b,c){"use strict";var d,e=a("../is-object"),f=a("../valid-value"),g=Object.prototype.isPrototypeOf,h=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};d=function(a,b){if(f(a),null===b||e(b))return a;throw new TypeError("Prototype must be null or an object")},b.exports=function(a){var b,c;return a?(2===a.level?a.set?(c=a.set,b=function(a,b){return c.call(d(a,b),b),a}):b=function(a,b){return d(a,b).__proto__=b,a}:b=function e(a,b){var c;return d(a,b),c=g.call(e.nullPolyfill,a),c&&delete e.nullPolyfill.__proto__,null===b&&(b=e.nullPolyfill),a.__proto__=b,c&&h(e.nullPolyfill,"__proto__",i),a},Object.defineProperty(b,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null}(function(){var a,b=Object.create(null),c={},d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(d){try{a=d.set,a.call(b,c)}catch(e){}if(Object.getPrototypeOf(b)===c)return{set:a,level:2}}return b.__proto__=c,Object.getPrototypeOf(b)===c?{level:2}:(b={},b.__proto__=c,Object.getPrototypeOf(b)===c&&{level:1})}()),a("../create")},{"../create":98,"../is-object":101,"../valid-value":112}],111:[function(a,b,c){"use strict";b.exports=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");return a}},{}],112:[function(a,b,c){"use strict";var d=a("./is-value");b.exports=function(a){if(!d(a))throw new TypeError("Cannot use null or undefined");return a}},{"./is-value":102}],113:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?String.prototype.contains:a("./shim")},{"./is-implemented":114,"./shim":115}],114:[function(a,b,c){"use strict";var d="razdwatrzy";b.exports=function(){return"function"==typeof d.contains&&(d.contains("dwa")===!0&&d.contains("foo")===!1)}},{}],115:[function(a,b,c){"use strict";var d=String.prototype.indexOf;b.exports=function(a){return d.call(this,a,arguments[1])>-1}},{}],116:[function(a,b,c){"use strict";var d=Object.prototype.toString,e=d.call("");b.exports=function(a){return"string"==typeof a||a&&"object"==typeof a&&(a instanceof String||d.call(a)===e)||!1}},{}],117:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/set-prototype-of"),f=a("es5-ext/string/#/contains"),g=a("d"),h=a("es6-symbol"),i=a("./"),j=Object.defineProperty;d=b.exports=function(a,b){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");i.call(this,a),b=b?f.call(b,"key+value")?"key+value":f.call(b,"key")?"key":"value":"value",j(this,"__kind__",g("",b))},e&&e(d,i),delete d.prototype.constructor,d.prototype=Object.create(i.prototype,{_resolve:g(function(a){return"value"===this.__kind__?this.__list__[a]:"key+value"===this.__kind__?[a,this.__list__[a]]:a})}),j(d.prototype,h.toStringTag,g("c","Array Iterator"))},{"./":120,d:76,"es5-ext/object/set-prototype-of":108,"es5-ext/string/#/contains":113,"es6-symbol":129}],118:[function(a,b,c){"use strict";var d=a("es5-ext/function/is-arguments"),e=a("es5-ext/object/valid-callable"),f=a("es5-ext/string/is-string"),g=a("./get"),h=Array.isArray,i=Function.prototype.call,j=Array.prototype.some;b.exports=function(a,b){var c,k,l,m,n,o,p,q,r=arguments[2];if(h(a)||d(a)?c="array":f(a)?c="string":a=g(a),e(b),l=function(){m=!0},"array"===c)return void j.call(a,function(a){return i.call(b,r,a,l),m});if("string"!==c)for(k=a.next();!k.done;){if(i.call(b,r,k.value,l),m)return;k=a.next()}else for(o=a.length,n=0;n<o&&(p=a[n],n+1<o&&(q=p.charCodeAt(0),q>=55296&&q<=56319&&(p+=a[++n])),i.call(b,r,p,l),!m);++n);}},{"./get":119,"es5-ext/function/is-arguments":82,"es5-ext/object/valid-callable":111,"es5-ext/string/is-string":116}],119:[function(a,b,c){"use strict";var d=a("es5-ext/function/is-arguments"),e=a("es5-ext/string/is-string"),f=a("./array"),g=a("./string"),h=a("./valid-iterable"),i=a("es6-symbol").iterator;b.exports=function(a){return"function"==typeof h(a)[i]?a[i]():d(a)?new f(a):e(a)?new g(a):new f(a)}},{"./array":117,"./string":122,"./valid-iterable":123,"es5-ext/function/is-arguments":82,"es5-ext/string/is-string":116,"es6-symbol":129}],120:[function(a,b,c){"use strict";var d,e=a("es5-ext/array/#/clear"),f=a("es5-ext/object/assign"),g=a("es5-ext/object/valid-callable"),h=a("es5-ext/object/valid-value"),i=a("d"),j=a("d/auto-bind"),k=a("es6-symbol"),l=Object.defineProperty,m=Object.defineProperties;b.exports=d=function(a,b){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");m(this,{__list__:i("w",h(a)),__context__:i("w",b),__nextIndex__:i("w",0)}),b&&(g(b.on),b.on("_add",this._onAdd),b.on("_delete",this._onDelete),b.on("_clear",this._onClear))},delete d.prototype.constructor,m(d.prototype,f({_next:i(function(){var a;if(this.__list__)return this.__redo__&&(a=this.__redo__.shift(),void 0!==a)?a:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:i(function(){return this._createResult(this._next())}),_createResult:i(function(a){return void 0===a?{done:!0,value:void 0}:{done:!1,value:this._resolve(a)}}),_resolve:i(function(a){return this.__list__[a]}),_unBind:i(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:i(function(){return"[object "+(this[k.toStringTag]||"Object")+"]"})},j({_onAdd:i(function(a){if(!(a>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void l(this,"__redo__",i("c",[a]));this.__redo__.forEach(function(b,c){b>=a&&(this.__redo__[c]=++b)},this),this.__redo__.push(a)}}),_onDelete:i(function(a){var b;a>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(b=this.__redo__.indexOf(a),b!==-1&&this.__redo__.splice(b,1),this.__redo__.forEach(function(b,c){b>a&&(this.__redo__[c]=--b)},this)))}),_onClear:i(function(){this.__redo__&&e.call(this.__redo__),this.__nextIndex__=0})}))),l(d.prototype,k.iterator,i(function(){return this}))},{d:76,"d/auto-bind":75,"es5-ext/array/#/clear":77,"es5-ext/object/assign":94,"es5-ext/object/valid-callable":111,"es5-ext/object/valid-value":112,"es6-symbol":129}],121:[function(a,b,c){"use strict";var d=a("es5-ext/function/is-arguments"),e=a("es5-ext/object/is-value"),f=a("es5-ext/string/is-string"),g=a("es6-symbol").iterator,h=Array.isArray;b.exports=function(a){return!!e(a)&&(!!h(a)||(!!f(a)||(!!d(a)||"function"==typeof a[g])))}},{"es5-ext/function/is-arguments":82,"es5-ext/object/is-value":102,"es5-ext/string/is-string":116,"es6-symbol":129}],122:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/set-prototype-of"),f=a("d"),g=a("es6-symbol"),h=a("./"),i=Object.defineProperty;d=b.exports=function(a){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");a=String(a),h.call(this,a),i(this,"__length__",f("",a.length))},e&&e(d,h),delete d.prototype.constructor,d.prototype=Object.create(h.prototype,{_next:f(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:f(function(a){var b,c=this.__list__[a];return this.__nextIndex__===this.__length__?c:(b=c.charCodeAt(0),b>=55296&&b<=56319?c+this.__list__[this.__nextIndex__++]:c)})}),i(d.prototype,g.toStringTag,f("c","String Iterator"))},{"./":120,d:76,"es5-ext/object/set-prototype-of":108,"es6-symbol":129}],123:[function(a,b,c){"use strict";var d=a("./is-iterable");b.exports=function(a){if(!d(a))throw new TypeError(a+" is not iterable");return a}},{"./is-iterable":121}],124:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Set:a("./polyfill")},{"./is-implemented":125,"./polyfill":128}],125:[function(a,b,c){"use strict";b.exports=function(){var a,b,c;return"function"==typeof Set&&(a=new Set(["raz","dwa","trzy"]),"[object Set]"===String(a)&&(3===a.size&&("function"==typeof a.add&&("function"==typeof a.clear&&("function"==typeof a["delete"]&&("function"==typeof a.entries&&("function"==typeof a.forEach&&("function"==typeof a.has&&("function"==typeof a.keys&&("function"==typeof a.values&&(b=a.values(),c=b.next(),c.done===!1&&"raz"===c.value)))))))))))}},{}],126:[function(a,b,c){"use strict";b.exports=function(){return"undefined"!=typeof Set&&"[object Set]"===Object.prototype.toString.call(Set.prototype)}()},{}],127:[function(a,b,c){"use strict";var d,e=a("es5-ext/object/set-prototype-of"),f=a("es5-ext/string/#/contains"),g=a("d"),h=a("es6-iterator"),i=a("es6-symbol").toStringTag,j=Object.defineProperty;d=b.exports=function(a,b){return this instanceof d?(h.call(this,a.__setData__,a),b=b&&f.call(b,"key+value")?"key+value":"value",void j(this,"__kind__",g("",b))):new d(a,b)},e&&e(d,h),d.prototype=Object.create(h.prototype,{constructor:g(d),_resolve:g(function(a){return"value"===this.__kind__?this.__list__[a]:[this.__list__[a],this.__list__[a]]}),toString:g(function(){return"[object Set Iterator]"})}),j(d.prototype,i,g("c","Set Iterator"))},{d:76,"es5-ext/object/set-prototype-of":108,"es5-ext/string/#/contains":113,"es6-iterator":120,"es6-symbol":129}],128:[function(a,b,c){"use strict";var d,e,f,g=a("es5-ext/array/#/clear"),h=a("es5-ext/array/#/e-index-of"),i=a("es5-ext/object/set-prototype-of"),j=a("es5-ext/object/valid-callable"),k=a("d"),l=a("event-emitter"),m=a("es6-symbol"),n=a("es6-iterator/valid-iterable"),o=a("es6-iterator/for-of"),p=a("./lib/iterator"),q=a("./is-native-implemented"),r=Function.prototype.call,s=Object.defineProperty,t=Object.getPrototypeOf;q&&(f=Set),b.exports=d=function(){var a,b=arguments[0];if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");return a=q&&i?i(new f,t(this)):this,null!=b&&n(b),s(a,"__setData__",k("c",[])),b?(o(b,function(a){h.call(this,a)===-1&&this.push(a)},a.__setData__),a):a},q&&(i&&i(d,f),d.prototype=Object.create(f.prototype,{constructor:k(d)})),l(Object.defineProperties(d.prototype,{add:k(function(a){return this.has(a)?this:(this.emit("_add",this.__setData__.push(a)-1,a),this)}),clear:k(function(){this.__setData__.length&&(g.call(this.__setData__),this.emit("_clear"))}),"delete":k(function(a){var b=h.call(this.__setData__,a);return b!==-1&&(this.__setData__.splice(b,1),this.emit("_delete",b,a),!0)}),entries:k(function(){return new p(this,"key+value")}),forEach:k(function(a){var b,c,d,e=arguments[1];for(j(a),b=this.values(),c=b._next();void 0!==c;)d=b._resolve(c),r.call(a,e,d,d,this),c=b._next()}),has:k(function(a){return h.call(this.__setData__,a)!==-1}),keys:k(e=function(){return this.values()}),size:k.gs(function(){return this.__setData__.length}),values:k(function(){return new p(this)}),toString:k(function(){return"[object Set]"})})),s(d.prototype,m.iterator,k(e)),s(d.prototype,m.toStringTag,k("c","Set"))},{"./is-native-implemented":126,"./lib/iterator":127,d:76,"es5-ext/array/#/clear":77,"es5-ext/array/#/e-index-of":78,"es5-ext/object/set-prototype-of":108,"es5-ext/object/valid-callable":111,"es6-iterator/for-of":118,"es6-iterator/valid-iterable":123,"es6-symbol":129,"event-emitter":134}],129:[function(a,b,c){"use strict";b.exports=a("./is-implemented")()?Symbol:a("./polyfill")},{"./is-implemented":130,"./polyfill":132}],130:[function(a,b,c){"use strict";var d={object:!0,symbol:!0};b.exports=function(){var a;if("function"!=typeof Symbol)return!1;a=Symbol("test symbol");try{String(a)}catch(b){return!1}return!!d[typeof Symbol.iterator]&&(!!d[typeof Symbol.toPrimitive]&&!!d[typeof Symbol.toStringTag])}},{}],131:[function(a,b,c){"use strict";b.exports=function(a){return!!a&&("symbol"==typeof a||!!a.constructor&&("Symbol"===a.constructor.name&&"Symbol"===a[a.constructor.toStringTag]))}},{}],132:[function(a,b,c){"use strict";var d,e,f,g,h=a("d"),i=a("./validate-symbol"),j=Object.create,k=Object.defineProperties,l=Object.defineProperty,m=Object.prototype,n=j(null);if("function"==typeof Symbol){d=Symbol;try{String(d()),g=!0}catch(o){}}var p=function(){var a=j(null);return function(b){for(var c,d,e=0;a[b+(e||"")];)++e;return b+=e||"",a[b]=!0,c="@@"+b,l(m,c,h.gs(null,function(a){d||(d=!0,l(this,c,h(a)),d=!1)})),c}}();f=function(a){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return e(a)},b.exports=e=function q(a){var b;if(this instanceof q)throw new TypeError("Symbol is not a constructor");return g?d(a):(b=j(f.prototype),a=void 0===a?"":String(a),k(b,{__description__:h("",a),__name__:h("",p(a))}))},k(e,{"for":h(function(a){return n[a]?n[a]:n[a]=e(String(a))}),keyFor:h(function(a){var b;i(a);for(b in n)if(n[b]===a)return b}),hasInstance:h("",d&&d.hasInstance||e("hasInstance")),isConcatSpreadable:h("",d&&d.isConcatSpreadable||e("isConcatSpreadable")),iterator:h("",d&&d.iterator||e("iterator")),match:h("",d&&d.match||e("match")),replace:h("",d&&d.replace||e("replace")),search:h("",d&&d.search||e("search")),species:h("",d&&d.species||e("species")),split:h("",d&&d.split||e("split")),toPrimitive:h("",d&&d.toPrimitive||e("toPrimitive")),toStringTag:h("",d&&d.toStringTag||e("toStringTag")),unscopables:h("",d&&d.unscopables||e("unscopables"))}),k(f.prototype,{constructor:h(e),toString:h("",function(){return this.__name__})}),k(e.prototype,{toString:h(function(){return"Symbol ("+i(this).__description__+")"}),valueOf:h(function(){return i(this)})}),l(e.prototype,e.toPrimitive,h("",function(){var a=i(this);return"symbol"==typeof a?a:a.toString()})),l(e.prototype,e.toStringTag,h("c","Symbol")),l(f.prototype,e.toStringTag,h("c",e.prototype[e.toStringTag])),l(f.prototype,e.toPrimitive,h("c",e.prototype[e.toPrimitive]))},{"./validate-symbol":133,d:76}],133:[function(a,b,c){"use strict";var d=a("./is-symbol");b.exports=function(a){if(!d(a))throw new TypeError(a+" is not a symbol");return a}},{"./is-symbol":131}],134:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=a("d"),l=a("es5-ext/object/valid-callable"),m=Function.prototype.apply,n=Function.prototype.call,o=Object.create,p=Object.defineProperty,q=Object.defineProperties,r=Object.prototype.hasOwnProperty,s={configurable:!0,enumerable:!1,writable:!0};d=function(a,b){var c;return l(b),r.call(this,"__ee__")?c=this.__ee__:(c=s.value=o(null),p(this,"__ee__",s),s.value=null),c[a]?"object"==typeof c[a]?c[a].push(b):c[a]=[c[a],b]:c[a]=b,this},e=function(a,b){var c,e;return l(b),e=this,d.call(this,a,c=function(){f.call(e,a,c),m.call(b,this,arguments)}),c.__eeOnceListener__=b,this},f=function(a,b){var c,d,e,f;if(l(b),!r.call(this,"__ee__"))return this;if(c=this.__ee__,!c[a])return this;if(d=c[a],"object"==typeof d)for(f=0;e=d[f];++f)e!==b&&e.__eeOnceListener__!==b||(2===d.length?c[a]=d[f?0:1]:d.splice(f,1));else d!==b&&d.__eeOnceListener__!==b||delete c[a];return this},g=function(a){var b,c,d,e,f;if(r.call(this,"__ee__")&&(e=this.__ee__[a]))if("object"==typeof e){for(c=arguments.length,f=new Array(c-1),b=1;b<c;++b)f[b-1]=arguments[b];for(e=e.slice(),b=0;d=e[b];++b)m.call(d,this,f)}else switch(arguments.length){case 1:n.call(e,this);break;case 2:n.call(e,this,arguments[1]);break;case 3:n.call(e,this,arguments[1],arguments[2]);break;default:for(c=arguments.length,f=new Array(c-1),b=1;b<c;++b)f[b-1]=arguments[b];m.call(e,this,f)}},h={on:d,once:e,off:f,emit:g},i={on:k(d),once:k(e),off:k(f),emit:k(g)},j=q({},i),b.exports=c=function(a){return null==a?o(j):q(Object(a),i)},c.methods=h},{d:76,"es5-ext/object/valid-callable":111}],135:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(a){return[]},n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],136:[function(a,b,c){(function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&f<g;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=v(d,f,4);var g=!C(c)&&u.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function d(a){return function(b,c,d){c=w(c,d);for(var e=B(b),f=a>0?0:e-1;f>=0&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}}function e(a,b,c){return function(d,e,f){var g=0,h=B(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(m.call(d,g,h),u.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&f<h;f+=a)if(d[f]===e)return f;return-1}}function f(a,b){var c=H.length,d=a.constructor,e=u.isFunction(d)&&d.prototype||j,f="constructor";for(u.has(a,f)&&!u.contains(b,f)&&b.push(f);c--;)f=H[c],f in a&&a[f]!==e[f]&&!u.contains(b,f)&&b.push(f)}var g=this,h=g._,i=Array.prototype,j=Object.prototype,k=Function.prototype,l=i.push,m=i.slice,n=j.toString,o=j.hasOwnProperty,p=Array.isArray,q=Object.keys,r=k.bind,s=Object.create,t=function(){},u=function(a){return a instanceof u?a:this instanceof u?void(this._wrapped=a):new u(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=u),c._=u):g._=u,u.VERSION="1.8.3";var v=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},w=function(a,b,c){return null==a?u.identity:u.isFunction(a)?v(a,b,c):u.isObject(a)?u.matcher(a):u.property(a);
};u.iteratee=function(a,b){return w(a,b,1/0)};var x=function(a,b){return function(c){var d=arguments.length;if(d<2||null==c)return c;for(var e=1;e<d;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;i<h;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},y=function(a){if(!u.isObject(a))return{};if(s)return s(a);t.prototype=a;var b=new t;return t.prototype=null,b},z=function(a){return function(b){return null==b?void 0:b[a]}},A=Math.pow(2,53)-1,B=z("length"),C=function(a){var b=B(a);return"number"==typeof b&&b>=0&&b<=A};u.each=u.forEach=function(a,b,c){b=v(b,c);var d,e;if(C(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=u.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},u.map=u.collect=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=Array(e),g=0;g<e;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},u.reduce=u.foldl=u.inject=a(1),u.reduceRight=u.foldr=a(-1),u.find=u.detect=function(a,b,c){var d;if(d=C(a)?u.findIndex(a,b,c):u.findKey(a,b,c),void 0!==d&&d!==-1)return a[d]},u.filter=u.select=function(a,b,c){var d=[];return b=w(b,c),u.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},u.reject=function(a,b,c){return u.filter(a,u.negate(w(b)),c)},u.every=u.all=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},u.some=u.any=function(a,b,c){b=w(b,c);for(var d=!C(a)&&u.keys(a),e=(d||a).length,f=0;f<e;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},u.contains=u.includes=u.include=function(a,b,c,d){return C(a)||(a=u.values(a)),("number"!=typeof c||d)&&(c=0),u.indexOf(a,b,c)>=0},u.invoke=function(a,b){var c=m.call(arguments,2),d=u.isFunction(b);return u.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},u.pluck=function(a,b){return u.map(a,u.property(b))},u.where=function(a,b){return u.filter(a,u.matcher(b))},u.findWhere=function(a,b){return u.find(a,u.matcher(b))},u.max=function(a,b,c){var d,e,f=-(1/0),g=-(1/0);if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d>f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-(1/0)&&f===-(1/0))&&(f=a,g=e)});return f},u.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=C(a)?a:u.values(a);for(var h=0,i=a.length;h<i;h++)d=a[h],d<f&&(f=d)}else b=w(b,c),u.each(a,function(a,c,d){e=b(a,c,d),(e<g||e===1/0&&f===1/0)&&(f=a,g=e)});return f},u.shuffle=function(a){for(var b,c=C(a)?a:u.values(a),d=c.length,e=Array(d),f=0;f<d;f++)b=u.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},u.sample=function(a,b,c){return null==b||c?(C(a)||(a=u.values(a)),a[u.random(a.length-1)]):u.shuffle(a).slice(0,Math.max(0,b))},u.sortBy=function(a,b,c){return b=w(b,c),u.pluck(u.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var D=function(a){return function(b,c,d){var e={};return c=w(c,d),u.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};u.groupBy=D(function(a,b,c){u.has(a,c)?a[c].push(b):a[c]=[b]}),u.indexBy=D(function(a,b,c){a[c]=b}),u.countBy=D(function(a,b,c){u.has(a,c)?a[c]++:a[c]=1}),u.toArray=function(a){return a?u.isArray(a)?m.call(a):C(a)?u.map(a,u.identity):u.values(a):[]},u.size=function(a){return null==a?0:C(a)?a.length:u.keys(a).length},u.partition=function(a,b,c){b=w(b,c);var d=[],e=[];return u.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},u.first=u.head=u.take=function(a,b,c){if(null!=a)return null==b||c?a[0]:u.initial(a,a.length-b)},u.initial=function(a,b,c){return m.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},u.last=function(a,b,c){if(null!=a)return null==b||c?a[a.length-1]:u.rest(a,Math.max(0,a.length-b))},u.rest=u.tail=u.drop=function(a,b,c){return m.call(a,null==b||c?1:b)},u.compact=function(a){return u.filter(a,u.identity)};var E=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=B(a);g<h;g++){var i=a[g];if(C(i)&&(u.isArray(i)||u.isArguments(i))){b||(i=E(i,b,c));var j=0,k=i.length;for(e.length+=k;j<k;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};u.flatten=function(a,b){return E(a,b,!1)},u.without=function(a){return u.difference(a,m.call(arguments,1))},u.uniq=u.unique=function(a,b,c,d){u.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=w(c,d));for(var e=[],f=[],g=0,h=B(a);g<h;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?u.contains(f,j)||(f.push(j),e.push(i)):u.contains(e,i)||e.push(i)}return e},u.union=function(){return u.uniq(E(arguments,!0,!0))},u.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=B(a);d<e;d++){var f=a[d];if(!u.contains(b,f)){for(var g=1;g<c&&u.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},u.difference=function(a){var b=E(arguments,!0,!0,1);return u.filter(a,function(a){return!u.contains(b,a)})},u.zip=function(){return u.unzip(arguments)},u.unzip=function(a){for(var b=a&&u.max(a,B).length||0,c=Array(b),d=0;d<b;d++)c[d]=u.pluck(a,d);return c},u.object=function(a,b){for(var c={},d=0,e=B(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},u.findIndex=d(1),u.findLastIndex=d(-1),u.sortedIndex=function(a,b,c,d){c=w(c,d,1);for(var e=c(b),f=0,g=B(a);f<g;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},u.indexOf=e(1,u.findIndex,u.sortedIndex),u.lastIndexOf=e(-1,u.findLastIndex),u.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;f<d;f++,a+=c)e[f]=a;return e};var F=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=y(a.prototype),g=a.apply(f,e);return u.isObject(g)?g:f};u.bind=function(a,b){if(r&&a.bind===r)return r.apply(a,m.call(arguments,1));if(!u.isFunction(a))throw new TypeError("Bind must be called on a function");var c=m.call(arguments,2),d=function(){return F(a,d,b,this,c.concat(m.call(arguments)))};return d},u.partial=function(a){var b=m.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;g<e;g++)f[g]=b[g]===u?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return F(a,c,this,this,f)};return c},u.bindAll=function(a){var b,c,d=arguments.length;if(d<=1)throw new Error("bindAll must be passed function names");for(b=1;b<d;b++)c=arguments[b],a[c]=u.bind(a[c],a);return a},u.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return u.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},u.delay=function(a,b){var c=m.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},u.defer=u.partial(u.delay,u,1),u.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:u.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=u.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,k<=0||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},u.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=u.now()-g;j<b&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=u.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},u.wrap=function(a,b){return u.partial(b,a)},u.negate=function(a){return function(){return!a.apply(this,arguments)}},u.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},u.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}},u.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),a<=1&&(b=null),c}},u.once=u.partial(u.before,2);var G=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];u.keys=function(a){if(!u.isObject(a))return[];if(q)return q(a);var b=[];for(var c in a)u.has(a,c)&&b.push(c);return G&&f(a,b),b},u.allKeys=function(a){if(!u.isObject(a))return[];var b=[];for(var c in a)b.push(c);return G&&f(a,b),b},u.values=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},u.mapObject=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=e.length,g={},h=0;h<f;h++)d=e[h],g[d]=b(a[d],d,a);return g},u.pairs=function(a){for(var b=u.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},u.invert=function(a){for(var b={},c=u.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},u.functions=u.methods=function(a){var b=[];for(var c in a)u.isFunction(a[c])&&b.push(c);return b.sort()},u.extend=x(u.allKeys),u.extendOwn=u.assign=x(u.keys),u.findKey=function(a,b,c){b=w(b,c);for(var d,e=u.keys(a),f=0,g=e.length;f<g;f++)if(d=e[f],b(a[d],d,a))return d},u.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;u.isFunction(b)?(e=u.allKeys(g),d=v(b,c)):(e=E(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;h<i;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},u.omit=function(a,b,c){if(u.isFunction(b))b=u.negate(b);else{var d=u.map(E(arguments,!1,!1,1),String);b=function(a,b){return!u.contains(d,b)}}return u.pick(a,b,c)},u.defaults=x(u.allKeys,!0),u.create=function(a,b){var c=y(a);return b&&u.extendOwn(c,b),c},u.clone=function(a){return u.isObject(a)?u.isArray(a)?a.slice():u.extend({},a):a},u.tap=function(a,b){return b(a),a},u.isMatch=function(a,b){var c=u.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;f<d;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var I=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof u&&(a=a._wrapped),b instanceof u&&(b=b._wrapped);var e=n.call(a);if(e!==n.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(u.isFunction(g)&&g instanceof g&&u.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!I(a[i],b[i],c,d))return!1}else{var j,k=u.keys(a);if(i=k.length,u.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!u.has(b,j)||!I(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};u.isEqual=function(a,b){return I(a,b)},u.isEmpty=function(a){return null==a||(C(a)&&(u.isArray(a)||u.isString(a)||u.isArguments(a))?0===a.length:0===u.keys(a).length)},u.isElement=function(a){return!(!a||1!==a.nodeType)},u.isArray=p||function(a){return"[object Array]"===n.call(a)},u.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},u.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){u["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}}),u.isArguments(arguments)||(u.isArguments=function(a){return u.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(u.isFunction=function(a){return"function"==typeof a||!1}),u.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},u.isNaN=function(a){return u.isNumber(a)&&a!==+a},u.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===n.call(a)},u.isNull=function(a){return null===a},u.isUndefined=function(a){return void 0===a},u.has=function(a,b){return null!=a&&o.call(a,b)},u.noConflict=function(){return g._=h,this},u.identity=function(a){return a},u.constant=function(a){return function(){return a}},u.noop=function(){},u.property=z,u.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},u.matcher=u.matches=function(a){return a=u.extendOwn({},a),function(b){return u.isMatch(b,a)}},u.times=function(a,b,c){var d=Array(Math.max(0,a));b=v(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},u.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},u.now=Date.now||function(){return(new Date).getTime()};var J={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},K=u.invert(J),L=function(a){var b=function(b){return a[b]},c="(?:"+u.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};u.escape=L(J),u.unescape=L(K),u.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),u.isFunction(d)?d.call(a):d};var M=0;u.uniqueId=function(a){var b=++M+"";return a?a+b:b},u.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},P=/\\|'|\r|\n|\u2028|\u2029/g,Q=function(a){return"\\"+O[a]};u.template=function(a,b,c){!b&&c&&(b=c),b=u.defaults({},b,u.templateSettings);var d=RegExp([(b.escape||N).source,(b.interpolate||N).source,(b.evaluate||N).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(P,Q),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,u)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},u.chain=function(a){var b=u(a);return b._chain=!0,b};var R=function(a,b){return a._chain?u(b).chain():b};u.mixin=function(a){u.each(u.functions(a),function(b){var c=u[b]=a[b];u.prototype[b]=function(){var a=[this._wrapped];return l.apply(a,arguments),R(this,c.apply(u,a))}})},u.mixin(u),u.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=i[a];u.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],R(this,c)}}),u.each(["concat","join","slice"],function(a){var b=i[a];u.prototype[a]=function(){return R(this,b.apply(this._wrapped,arguments))}}),u.prototype.value=function(){return this._wrapped},u.prototype.valueOf=u.prototype.toJSON=u.prototype.value,u.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return u})}).call(this)},{}]},{},[14,73]);